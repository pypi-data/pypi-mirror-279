import{_ as T,V as m,D as g,B as y,ck as k,cl as I,W as A,b0 as B,aF as a,aO as t,S as i,$ as u,aJ as r,Y as P,Z as d,aH as l,U as S,aG as w,aj as _,aP as K,cm as v,aT as V,bV as D,aQ as R,aR as E}from"./admin-drawer-panel-SpPhIMP4.js";import{C as N}from"./confirm-dialog-BEiVusri.js";import{c as O}from"./copy-to-clipboard-DoUvDJVx.js";import{c as L}from"./to-case-CMMdeNjM.js";import{V as c}from"./VTable-BPFJigN3.js";import"./VDialog-PmbYIKIh.js";import"./main-BMxHA4IB.js";const U="Copy API Key to clipboard",p="&nbsp;&nbsp;&nbsp;&nbsp;",F={name:"AdminTasksTab",components:{ConfirmDialog:N},data(){return{showTooltip:{show:!1},apiSchemaURL:window.CODEX.API_V3_PATH}},computed:{...m(g,{}),...m(y,{stats:s=>s.stats}),clipBoardEnabled(){return location.prototcal=="https:"},apiTooltip(){return U?this.clipBoardEnabled:void 0},clipBoardIcon(){return this.showTooltip?k:I}},created(){this.loadStats()},methods:{...A(y,["loadStats","updateAPIKey"]),regenAPIKey(){this.updateAPIKey().then(this.loadStats).catch(console.warn)},nf(s){return B.format(s)},onClickAPIKey(){this.clipBoardEnabled&&O(this.stats.config.apiKey,this.showTooltip)},metadataTitle(s){let o=s.replace(/Count$/,"");return o=L(o),o=o.replace(/^Contributor\s/,p),o=o.replace(/^Identifier\s/,p),o=o.replace(/^Story\sArc\s/,p),o}}},e=s=>(R("data-v-79937b65"),s=s(),E(),s),M={key:0,id:"stats"},H={class:"statBlock"},j=e(()=>t("h3",null,"Platform",-1)),z=e(()=>t("td",null,"Docker",-1)),G=e(()=>t("td",null,"Machine",-1)),X=e(()=>t("td",null,"System",-1)),Z=e(()=>t("td",null,"Python",-1)),J=e(()=>t("td",null,"Codex",-1)),Q={class:"statBlock"},W=e(()=>t("h3",null,"Config",-1)),Y=e(()=>t("td",null,"Libraries",-1)),q=e(()=>t("td",null,"Anonymous Users",-1)),x=e(()=>t("td",null,"Registered Users",-1)),$=e(()=>t("td",null,"Groups",-1)),tt={class:"statBlock"},st=e(()=>t("h3",null,"Groups",-1)),et=e(()=>t("td",null,"Folders",-1)),lt=e(()=>t("td",null,"Story Arcs",-1)),nt=e(()=>t("td",null,"Publishers",-1)),ot=e(()=>t("td",null,"Imprints",-1)),at=e(()=>t("td",null,"Series",-1)),dt=e(()=>t("td",null,"Volumes",-1)),it=e(()=>t("td",null,"Issues",-1)),rt={key:0},ut=e(()=>t("td",{class:"indent"},"CBZ",-1)),ct={key:1},ht=e(()=>t("td",{class:"indent"},"CBR",-1)),_t={key:2},pt=e(()=>t("td",{class:"indent"},"CBX",-1)),ft={key:3},mt=e(()=>t("td",{class:"indent"},"CBT",-1)),yt={key:4},Ct=e(()=>t("td",{class:"indent"},"PDF",-1)),bt={key:5},Tt=e(()=>t("td",{class:"indent"},"Unknown",-1)),gt={class:"statBlock"},kt=e(()=>t("h3",null,"Metadata",-1)),It=["innerHTML"],At={class:"statBlock"},Bt=e(()=>t("h3",null,"API",-1)),Pt=e(()=>t("td",null,"Schema Documentation:",-1)),St={id:"schemaDocValue"},wt=["href"],Kt=["title"],vt={key:0},Vt={class:"copied"},Dt={id:"apiKey"},Rt={colspan:"2"};function Et(s,o,Nt,Ot,f,n){const C=P("ConfirmDialog");return s.stats?(d(),a("div",M,[t("div",H,[j,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[z,t("td",null,l(s.stats.platform.docker),1)]),t("tr",null,[G,t("td",null,l(s.stats.platform.machine),1)]),t("tr",null,[X,t("td",null,l(s.stats.platform.system)+" "+l(s.stats.platform.systemRelease),1)]),t("tr",null,[Z,t("td",null,l(s.stats.platform.python),1)]),t("tr",null,[J,t("td",null,l(s.stats.platform.codex),1)])])]),_:1})]),t("div",Q,[W,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[Y,t("td",null,l(n.nf(s.stats.config.librariesCount)),1)]),t("tr",null,[q,t("td",null,l(n.nf(s.stats.config.sessionsAnonCount)),1)]),t("tr",null,[x,t("td",null,l(n.nf(s.stats.config.usersCount)),1)]),t("tr",null,[$,t("td",null,l(n.nf(s.stats.config.groupsCount)),1)])])]),_:1})]),t("div",tt,[st,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[et,t("td",null,l(n.nf(s.stats.groups.foldersCount)),1)]),t("tr",null,[lt,t("td",null,l(n.nf(s.stats.groups.storyArcsCount)),1)]),t("tr",null,[nt,t("td",null,l(n.nf(s.stats.groups.publishersCount)),1)]),t("tr",null,[ot,t("td",null,l(n.nf(s.stats.groups.imprintsCount)),1)]),t("tr",null,[at,t("td",null,l(n.nf(s.stats.groups.seriesCount)),1)]),t("tr",null,[dt,t("td",null,l(n.nf(s.stats.groups.volumesCount)),1)]),t("tr",null,[it,t("td",null,l(n.nf(s.stats.groups.issuesCount)),1)]),s.stats.fileTypes.cbzCount?(d(),a("tr",rt,[ut,t("td",null,l(n.nf(s.stats.fileTypes.cbzCount)),1)])):r("",!0),s.stats.fileTypes.cbrCount?(d(),a("tr",ct,[ht,t("td",null,l(n.nf(s.stats.fileTypes.cbrCount)),1)])):r("",!0),s.stats.fileTypes.cbxCount?(d(),a("tr",_t,[pt,t("td",null,l(n.nf(s.stats.fileTypes.cbxCount)),1)])):r("",!0),s.stats.fileTypes.cbtCount?(d(),a("tr",ft,[mt,t("td",null,l(n.nf(s.stats.fileTypes.cbtCount)),1)])):r("",!0),s.stats.fileTypes.pdfCount?(d(),a("tr",yt,[Ct,t("td",null,l(n.nf(s.stats.fileTypes.pdfCount)),1)])):r("",!0),s.stats.fileTypes.unknownCount?(d(),a("tr",bt,[Tt,t("td",null,l(n.nf(s.stats.fileTypes.unknownCount)),1)])):r("",!0)])]),_:1})]),t("div",gt,[kt,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[(d(!0),a(S,null,w(Object.entries(s.stats.metadata),([h,b])=>(d(),a("tr",{key:h},[t("td",{innerHTML:n.metadataTitle(h)},null,8,It),t("td",null,l(n.nf(b)),1)]))),128))])]),_:1})]),t("div",At,[Bt,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[Pt,t("td",St,[_(" The only endpoint accessible with API Key access is "),t("a",{href:`${f.apiSchemaURL}#/api/api_v3_admin_stats_retrieve`,target:"_blank"},"/admin/stats",8,wt)])]),t("tr",{id:"apiKeyRow",title:n.apiTooltip,onClick:o[0]||(o[0]=(...h)=>n.onClickAPIKey&&n.onClickAPIKey(...h))},[t("td",null,[_(" API Key "),n.clipBoardEnabled?(d(),a("span",vt,[i(K,{class:"clipBoardIcon",size:"small"},{default:u(()=>[_(l(n.clipBoardIcon),1)]),_:1}),i(v,null,{default:u(()=>[V(t("span",Vt,"Copied",512),[[D,f.showTooltip.show]])]),_:1})])):r("",!0)]),t("td",Dt,l(s.stats.config.apiKey),1)],8,Kt),t("tr",null,[t("td",Rt,[i(C,{"button-text":"Regenerate API Key","title-text":"Regenerate","object-name":"API Key","confirm-text":"Regenerate",onConfirm:n.regenAPIKey},null,8,["onConfirm"])])])])]),_:1})])])):r("",!0)}const Gt=T(F,[["render",Et],["__scopeId","data-v-79937b65"]]);export{Gt as default};
