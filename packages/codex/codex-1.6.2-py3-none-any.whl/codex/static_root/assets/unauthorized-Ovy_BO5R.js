import{E as N,O as T,aw as K,cA as le,r as de,ag as ue,h as j,F as ce,R as z,cB as me,S as a,as as k,U as W,bg as $,ce as fe,aP as X,cC as ge,cD as H,al as J,aK as he,V as L,D as ve,m as p,br as ye,W as Q,_ as S,Y as g,Z as u,X as c,$ as f,bn as F,bQ as pe,aJ as R,aj as be,cE as _e,aF as we,aX as ke,bd as Se,M as Y,b2 as Z,cF as Ve,N as Ce,P as Pe,aA as Le,aB as Ae,b5 as ee,cv as De,c6 as Me,K as Ee,ar as Be,bl as Ie,aG as xe,by as Fe,ay as Ue,c3 as $e,bB as Re,an as Ne,aO as Te}from"./admin-drawer-panel-DsgLbfnD.js";import{C as ze}from"./change-password-dialog-B-Sd5U5p.js";import{S as We,V as U,a as Oe}from"./VTextField-BayL7C1D.js";import{a as Ke,c as je,u as qe,V as q,d as G}from"./VSelectionControl-DXxRmssH.js";import{V as Ge}from"./VDialog-DTWAoZBU.js";import{l as Xe}from"./main-BjGE3kSi.js";const He=N({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ke(),...je()},"VSwitch"),Je=T()({name:"VSwitch",inheritAttrs:!1,props:He(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,o){let{attrs:r,slots:t}=o;const s=K(e,"indeterminate"),i=K(e,"modelValue"),{loaderClasses:d}=le(e),{isFocused:l,focus:n,blur:V}=qe(e),b=de(),C=ue&&window.matchMedia("(forced-colors: active)").matches,A=j(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),D=ce(),M=j(()=>e.id||`switch-${D}`);function _(){s.value&&(s.value=!1)}function P(h){var v,y;h.stopPropagation(),h.preventDefault(),(y=(v=b.value)==null?void 0:v.input)==null||y.click()}return z(()=>{const[h,v]=me(r),y=q.filterProps(e),te=G.filterProps(e);return a(q,k({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":s.value},d.value,e.class]},h,y,{modelValue:i.value,"onUpdate:modelValue":E=>i.value=E,id:M.value,focused:l.value,style:e.style}),{...t,default:E=>{let{id:ae,messagesId:se,isDisabled:oe,isReadonly:ne,isValid:O}=E;const B={model:i,isValid:O};return a(G,k({ref:b},te,{modelValue:i.value,"onUpdate:modelValue":[w=>i.value=w,_],id:ae.value,"aria-describedby":se.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:oe.value,readonly:ne.value,onFocus:n,onBlur:V},v),{...t,default:w=>{let{backgroundColorClasses:I,backgroundColorStyles:m}=w;return a("div",{class:["v-switch__track",C?void 0:I.value],style:m.value,onClick:P},[t["track-true"]&&a("div",{key:"prepend",class:"v-switch__track-true"},[t["track-true"](B)]),t["track-false"]&&a("div",{key:"append",class:"v-switch__track-false"},[t["track-false"](B)])])},input:w=>{let{inputNode:I,icon:m,backgroundColorClasses:ie,backgroundColorStyles:re}=w;return a(W,null,[I,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":m||e.loading},e.inset||C?void 0:ie.value],style:e.inset?void 0:re.value},[t.thumb?a($,{defaults:{VIcon:{icon:m,size:"x-small"}}},{default:()=>[t.thumb({...B,icon:m})]}):a(fe,null,{default:()=>[e.loading?a(ge,{name:"v-switch",active:!0,color:O.value===!1?void 0:A.value},{default:x=>t.loader?t.loader(x):a(H,{active:x.isActive,color:x.color,indeterminate:!0,size:"16",width:"2"},null)}):m&&a(X,{key:String(m),icon:m,size:"x-small"},null)]})])])}})}})}),{}}}),Qe={name:"AuthLoginDialog",components:{SubmitFooter:We,DrawerItem:J},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:he}},computed:{...L(ve,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...L(p,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...ye(p,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:o})=>this.submitButtonEnabled=o).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){window.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){window.removeEventListener("keyup",this._keyUpListener)},methods:{...Q(p,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>this.showLoginDialog=this.formErrors&&this.formErrors.length>0).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:o})=>{if(!o)return;const r=this.registerMode?"register":"login";return this.doAuth(r)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function Ye(e,o,r,t,s,i){const d=g("DrawerItem"),l=g("SubmitFooter");return u(),c(Ge,{modelValue:e.showLoginDialog,"onUpdate:modelValue":o[7]||(o[7]=n=>e.showLoginDialog=n),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:f(({props:n})=>[a(d,k(n,{"prepend-icon":s.mdiLogin,title:i.loginLabel}),null,16,["prepend-icon","title"])]),default:f(()=>[a(Oe,{id:"authDialog",ref:"form"},{default:f(()=>[a(U,{modelValue:s.credentials.username,"onUpdate:modelValue":o[0]||(o[0]=n=>s.credentials.username=n),autocomplete:"username",label:"Username",rules:s.rules.username,clearable:"",autofocus:"",onKeydown:o[1]||(o[1]=F(n=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),a(U,{ref:"password",modelValue:s.credentials.password,"onUpdate:modelValue":o[2]||(o[2]=n=>s.credentials.password=n),autocomplete:s.registerMode?"new-password":"current-password",label:"Password",rules:s.rules.password,clearable:"",type:"password",onKeydown:o[3]||(o[3]=F(n=>{s.registerMode?e.$refs.passwordConfirm.focus():i.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),a(pe,null,{default:f(()=>[s.registerMode?(u(),c(U,{key:0,ref:"passwordConfirm",modelValue:s.credentials.passwordConfirm,"onUpdate:modelValue":o[4]||(o[4]=n=>s.credentials.passwordConfirm=n),autocomplete:"new-password",label:"Confirm Password",rules:s.rules.passwordConfirm,clearable:"",type:"password",onKeydown:F(i.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):R("",!0)]),_:1}),e.adminFlags.registration?(u(),c(Je,{key:0,modelValue:s.registerMode,"onUpdate:modelValue":o[5]||(o[5]=n=>s.registerMode=n),label:"Register"},{default:f(()=>[be(" Register ")]),_:1},8,["modelValue"])):R("",!0),a(l,{verb:s.registerMode?"Register":"Login",table:"",disabled:!s.submitButtonEnabled,onSubmit:i.submit,onCancel:o[6]||(o[6]=n=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const Ze=S(Qe,[["render",Ye],["__scopeId","data-v-b0ce47fa"]]),et={name:"AuthMenu",components:{AuthLoginDialog:Ze,ChangePasswordDialog:ze,DrawerItem:J},data(){return{mdiLogout:_e}},computed:{...L(p,{user:e=>e.user}),logoutTitle(){return`Logout ${this.user.username}`}},methods:{...Q(p,["logout"])}};function tt(e,o,r,t,s,i){const d=g("DrawerItem"),l=g("ChangePasswordDialog"),n=g("AuthLoginDialog");return u(),we(W,null,[e.user?(u(),c(d,{key:0,"prepend-icon":s.mdiLogout,title:i.logoutTitle},null,8,["prepend-icon","title"])):R("",!0),e.user?(u(),c(l,{key:1,user:e.user,onClick:ke(e.logout,["stop"])},null,8,["user","onClick"])):(u(),c(n,{key:2}))],64)}const at=S(et,[["render",tt]]),st={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function ot(e,o,r,t,s,i){return u(),c(H,k({"aria-label":"loading",class:"codexProgressCircular",indeterminate:r.indeterminate},e.$attrs),null,16,["indeterminate"])}const nt=S(st,[["render",ot],["__scopeId","data-v-7bb4cf22"]]),it=N({actionText:String,bgColor:String,color:String,icon:Se,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Y(),...Z(),...Ve({size:void 0}),...Ce()},"VEmptyState"),rt=T()({name:"VEmptyState",props:it(),emits:{"click:action":e=>!0},setup(e,o){let{emit:r,slots:t}=o;const{themeClasses:s}=Pe(e),{backgroundColorClasses:i,backgroundColorStyles:d}=Le(Ae(e,"bgColor")),{dimensionStyles:l}=ee(e),{displayClasses:n}=De();function V(b){r("click:action",b)}return z(()=>{var P,h,v;const b=!!(t.actions||e.actionText),C=!!(t.headline||e.headline),A=!!(t.title||e.title),D=!!(t.text||e.text),M=!!(t.media||e.image||e.icon),_=e.size||(e.image?200:96);return a("div",{class:["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},s.value,i.value,n.value,e.class],style:[d.value,l.value,e.style]},[M&&a("div",{key:"media",class:"v-empty-state__media"},[t.media?a($,{key:"media-defaults",defaults:{VImg:{src:e.image,height:_},VIcon:{size:_,icon:e.icon}}},{default:()=>[t.media()]}):a(W,null,[e.image?a(Me,{key:"image",src:e.image,height:_},null):e.icon?a(X,{key:"icon",color:e.color,size:_,icon:e.icon},null):void 0])]),C&&a("div",{key:"headline",class:"v-empty-state__headline"},[((P=t.headline)==null?void 0:P.call(t))??e.headline]),A&&a("div",{key:"title",class:"v-empty-state__title"},[((h=t.title)==null?void 0:h.call(t))??e.title]),D&&a("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Ee(e.textWidth)}},[((v=t.text)==null?void 0:v.call(t))??e.text]),t.default&&a("div",{key:"content",class:"v-empty-state__content"},[t.default()]),b&&a("div",{key:"actions",class:"v-empty-state__actions"},[a($,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",text:e.actionText}}},{default:()=>{var y;return[((y=t.actions)==null?void 0:y.call(t,{props:{onClick:V}}))??a(Be,{onClick:V},null)]}})])])}),{}}}),lt={name:"EmptyState"};function dt(e,o,r,t,s,i){return u(),c(rt,{class:"empty"},Ie({_:2},[xe(e.$slots,(d,l)=>({name:l,fn:f(n=>[Fe(e.$slots,l,k({props:d},n),void 0,!0)])}))]),1024)}const ut=S(lt,[["render",dt],["__scopeId","data-v-c7e33c8c"]]),ct=N({scrollable:Boolean,...Y(),...Z(),...Ue({tag:"main"})},"VMain"),mt=T()({name:"VMain",props:ct(),setup(e,o){let{slots:r}=o;const{dimensionStyles:t}=ee(e),{mainStyles:s,layoutIsReady:i}=Xe(),{ssrBootStyles:d}=$e();return z(()=>a(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[s.value,d.value,t.value,e.style]},{default:()=>{var l,n;return[e.scrollable?a("div",{class:"v-main__scroller"},[(l=r.default)==null?void 0:l.call(r)]):(n=r.default)==null?void 0:n.call(r)]}})),i}}),ft={name:"UnauthorizedEmptyState",components:{AuthMenu:at,PlaceholderLoading:nt,EmptyState:ut},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:Re}},computed:{...Ne(p,["isAuthChecked","isAuthorized","isUserAdmin"]),...L(p,{registration:e=>e.adminFlags.registration}),text(){return this.registration?"":"Registration is disabled"}}},gt={class:"login"};function ht(e,o,r,t,s,i){const d=g("AuthMenu"),l=g("EmptyState"),n=g("PlaceholderLoading");return u(),c(mt,{id:"unauthorized"},{default:f(()=>[e.isAuthChecked?(u(),c(l,{key:0,class:"empty",headline:"Unauthorized",text:i.text,icon:s.mdiLockOutline},{default:f(()=>[Te("div",gt,[a(d)])]),_:1},8,["text","icon"])):(u(),c(n,{key:1,id:"unauthorizedPlaceholder"}))]),_:1})}const kt=S(ft,[["render",ht],["__scopeId","data-v-4bf2ea2c"]]);export{at as A,ut as E,nt as P,kt as U,mt as V};
