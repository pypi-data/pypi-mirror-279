import{E as T,O as z,aw as K,cA as le,r as ue,ag as de,h as j,F as ce,R as $,cB as me,S as a,as as C,U as W,bh as R,ce as fe,aP as G,cC as ge,cD as H,al as J,aK as he,V as P,D as ve,m as y,br as ye,W as Q,_ as L,Y as b,Z as d,X as c,$ as v,bo as F,bQ as be,aJ as N,aj as we,cE as ke,aF as pe,aX as _e,be as Ve,M as Y,b2 as Z,cF as Se,N as Ce,P as Pe,aA as Le,aB as Ae,b5 as ee,cv as De,c6 as Me,K as Be,ar as Ie,ay as xe,c3 as Ee,bB as Fe,an as Ue,aO as Re}from"./admin-drawer-panel-BXpIDQXM.js";import{C as Ne}from"./change-password-dialog-BBsJLPXZ.js";import{S as Te,V as U,a as ze}from"./VTextField-o1N9ylIb.js";import{a as $e,c as We,u as Oe,V as q,d as X}from"./VSelectionControl-CmFPvGMS.js";import{V as Ke}from"./VDialog-Bd5dN_E1.js";import{l as je}from"./main-ipmlipkF.js";const qe=T({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...$e(),...We()},"VSwitch"),Xe=z()({name:"VSwitch",inheritAttrs:!1,props:qe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,o){let{attrs:r,slots:t}=o;const s=K(e,"indeterminate"),i=K(e,"modelValue"),{loaderClasses:u}=le(e),{isFocused:l,focus:n,blur:_}=Oe(e),w=ue(),V=de&&window.matchMedia("(forced-colors: active)").matches,A=j(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),D=ce(),M=j(()=>e.id||`switch-${D}`);function k(){s.value&&(s.value=!1)}function S(f){var g,h;f.stopPropagation(),f.preventDefault(),(h=(g=w.value)==null?void 0:g.input)==null||h.click()}return $(()=>{const[f,g]=me(r),h=q.filterProps(e),te=X.filterProps(e);return a(q,C({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":s.value},u.value,e.class]},f,h,{modelValue:i.value,"onUpdate:modelValue":B=>i.value=B,id:M.value,focused:l.value,style:e.style}),{...t,default:B=>{let{id:ae,messagesId:se,isDisabled:oe,isReadonly:ne,isValid:O}=B;const I={model:i,isValid:O};return a(X,C({ref:w},te,{modelValue:i.value,"onUpdate:modelValue":[p=>i.value=p,k],id:ae.value,"aria-describedby":se.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:oe.value,readonly:ne.value,onFocus:n,onBlur:_},g),{...t,default:p=>{let{backgroundColorClasses:x,backgroundColorStyles:m}=p;return a("div",{class:["v-switch__track",V?void 0:x.value],style:m.value,onClick:S},[t["track-true"]&&a("div",{key:"prepend",class:"v-switch__track-true"},[t["track-true"](I)]),t["track-false"]&&a("div",{key:"append",class:"v-switch__track-false"},[t["track-false"](I)])])},input:p=>{let{inputNode:x,icon:m,backgroundColorClasses:ie,backgroundColorStyles:re}=p;return a(W,null,[x,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":m||e.loading},e.inset||V?void 0:ie.value],style:e.inset?void 0:re.value},[t.thumb?a(R,{defaults:{VIcon:{icon:m,size:"x-small"}}},{default:()=>[t.thumb({...I,icon:m})]}):a(fe,null,{default:()=>[e.loading?a(ge,{name:"v-switch",active:!0,color:O.value===!1?void 0:A.value},{default:E=>t.loader?t.loader(E):a(H,{active:E.isActive,color:E.color,indeterminate:!0,size:"16",width:"2"},null)}):m&&a(G,{key:String(m),icon:m,size:"x-small"},null)]})])])}})}})}),{}}}),Ge={name:"AuthLoginDialog",components:{SubmitFooter:Te,DrawerItem:J},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:he}},computed:{...P(ve,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...P(y,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...ye(y,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:o})=>this.submitButtonEnabled=o).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){window.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){window.removeEventListener("keyup",this._keyUpListener)},methods:{...Q(y,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>this.showLoginDialog=this.formErrors&&this.formErrors.length>0).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:o})=>{if(!o)return;const r=this.registerMode?"register":"login";return this.doAuth(r)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function He(e,o,r,t,s,i){const u=b("DrawerItem"),l=b("SubmitFooter");return d(),c(Ke,{modelValue:e.showLoginDialog,"onUpdate:modelValue":o[7]||(o[7]=n=>e.showLoginDialog=n),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:v(({props:n})=>[a(u,C(n,{"prepend-icon":s.mdiLogin,title:i.loginLabel}),null,16,["prepend-icon","title"])]),default:v(()=>[a(ze,{id:"authDialog",ref:"form"},{default:v(()=>[a(U,{modelValue:s.credentials.username,"onUpdate:modelValue":o[0]||(o[0]=n=>s.credentials.username=n),autocomplete:"username",label:"Username",rules:s.rules.username,clearable:"",autofocus:"",onKeydown:o[1]||(o[1]=F(n=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),a(U,{ref:"password",modelValue:s.credentials.password,"onUpdate:modelValue":o[2]||(o[2]=n=>s.credentials.password=n),autocomplete:s.registerMode?"new-password":"current-password",label:"Password",rules:s.rules.password,clearable:"",type:"password",onKeydown:o[3]||(o[3]=F(n=>{s.registerMode?e.$refs.passwordConfirm.focus():i.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),a(be,null,{default:v(()=>[s.registerMode?(d(),c(U,{key:0,ref:"passwordConfirm",modelValue:s.credentials.passwordConfirm,"onUpdate:modelValue":o[4]||(o[4]=n=>s.credentials.passwordConfirm=n),autocomplete:"new-password",label:"Confirm Password",rules:s.rules.passwordConfirm,clearable:"",type:"password",onKeydown:F(i.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):N("",!0)]),_:1}),e.adminFlags.registration?(d(),c(Xe,{key:0,modelValue:s.registerMode,"onUpdate:modelValue":o[5]||(o[5]=n=>s.registerMode=n),label:"Register"},{default:v(()=>[we(" Register ")]),_:1},8,["modelValue"])):N("",!0),a(l,{verb:s.registerMode?"Register":"Login",table:"",disabled:!s.submitButtonEnabled,onSubmit:i.submit,onCancel:o[6]||(o[6]=n=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const Je=L(Ge,[["render",He],["__scopeId","data-v-b0ce47fa"]]),Qe={name:"AuthMenu",components:{AuthLoginDialog:Je,ChangePasswordDialog:Ne,DrawerItem:J},data(){return{mdiLogout:ke}},computed:{...P(y,{user:e=>e.user}),logoutTitle(){return`Logout ${this.user.username}`}},methods:{...Q(y,["logout"])}};function Ye(e,o,r,t,s,i){const u=b("DrawerItem"),l=b("ChangePasswordDialog"),n=b("AuthLoginDialog");return d(),pe(W,null,[e.user?(d(),c(u,{key:0,"prepend-icon":s.mdiLogout,title:i.logoutTitle},null,8,["prepend-icon","title"])):N("",!0),e.user?(d(),c(l,{key:1,user:e.user,onClick:_e(e.logout,["stop"])},null,8,["user","onClick"])):(d(),c(n,{key:2}))],64)}const Ze=L(Qe,[["render",Ye]]),et={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function tt(e,o,r,t,s,i){return d(),c(H,C({"aria-label":"loading",class:"codexProgressCircular",indeterminate:r.indeterminate},e.$attrs),null,16,["indeterminate"])}const at=L(et,[["render",tt],["__scopeId","data-v-7bb4cf22"]]),st=T({actionText:String,bgColor:String,color:String,icon:Ve,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Y(),...Z(),...Se({size:void 0}),...Ce()},"VEmptyState"),ot=z()({name:"VEmptyState",props:st(),emits:{"click:action":e=>!0},setup(e,o){let{emit:r,slots:t}=o;const{themeClasses:s}=Pe(e),{backgroundColorClasses:i,backgroundColorStyles:u}=Le(Ae(e,"bgColor")),{dimensionStyles:l}=ee(e),{displayClasses:n}=De();function _(w){r("click:action",w)}return $(()=>{var S,f,g;const w=!!(t.actions||e.actionText),V=!!(t.headline||e.headline),A=!!(t.title||e.title),D=!!(t.text||e.text),M=!!(t.media||e.image||e.icon),k=e.size||(e.image?200:96);return a("div",{class:["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},s.value,i.value,n.value,e.class],style:[u.value,l.value,e.style]},[M&&a("div",{key:"media",class:"v-empty-state__media"},[t.media?a(R,{key:"media-defaults",defaults:{VImg:{src:e.image,height:k},VIcon:{size:k,icon:e.icon}}},{default:()=>[t.media()]}):a(W,null,[e.image?a(Me,{key:"image",src:e.image,height:k},null):e.icon?a(G,{key:"icon",color:e.color,size:k,icon:e.icon},null):void 0])]),V&&a("div",{key:"headline",class:"v-empty-state__headline"},[((S=t.headline)==null?void 0:S.call(t))??e.headline]),A&&a("div",{key:"title",class:"v-empty-state__title"},[((f=t.title)==null?void 0:f.call(t))??e.title]),D&&a("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Be(e.textWidth)}},[((g=t.text)==null?void 0:g.call(t))??e.text]),t.default&&a("div",{key:"content",class:"v-empty-state__content"},[t.default()]),w&&a("div",{key:"actions",class:"v-empty-state__actions"},[a(R,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",text:e.actionText}}},{default:()=>{var h;return[((h=t.actions)==null?void 0:h.call(t,{props:{onClick:_}}))??a(Ie,{onClick:_},null)]}})])])}),{}}}),nt=T({scrollable:Boolean,...Y(),...Z(),...xe({tag:"main"})},"VMain"),it=z()({name:"VMain",props:nt(),setup(e,o){let{slots:r}=o;const{dimensionStyles:t}=ee(e),{mainStyles:s,layoutIsReady:i}=je(),{ssrBootStyles:u}=Ee();return $(()=>a(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[s.value,u.value,t.value,e.style]},{default:()=>{var l,n;return[e.scrollable?a("div",{class:"v-main__scroller"},[(l=r.default)==null?void 0:l.call(r)]):(n=r.default)==null?void 0:n.call(r)]}})),i}}),rt={name:"UnauthorizedEmptyState",components:{AuthMenu:Ze,PlaceholderLoading:at},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:Fe}},computed:{...Ue(y,["isAuthChecked","isAuthorized","isUserAdmin"]),...P(y,{registration:e=>e.adminFlags.registration}),text(){return this.registration?"":"Registration is disabled"}}},lt={class:"login"};function ut(e,o,r,t,s,i){const u=b("AuthMenu"),l=b("PlaceholderLoading");return d(),c(it,{id:"unauthorized"},{default:v(()=>[e.isAuthChecked?(d(),c(ot,{key:0,class:"empty",headline:"Unauthorized",text:i.text,icon:s.mdiLockOutline},{default:v(()=>[Re("div",lt,[a(u)])]),_:1},8,["text","icon"])):(d(),c(l,{key:1,id:"unauthorizedPlaceholder"}))]),_:1})}const vt=L(rt,[["render",ut],["__scopeId","data-v-f524aeea"]]);export{Ze as A,at as P,vt as U,it as V,ot as a};
