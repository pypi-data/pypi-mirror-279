import{v as q,N as F,r as k,a0 as E,a1 as I,a2 as $,a3 as A,t as R,P as D,a4 as L,a5 as Q,a6 as N,a7 as j,a8 as O,j as T,c as K,a9 as M,f as U,n as Y,p as c,q as l,aa as p,B as v,D as g,I as z,C as G,Y as H,ab as J,_ as W}from"./index-BGuuL7R9.js";import{Q as X}from"./QInput-CcGqASe5.js";import{Q as Z}from"./QPage-BE0diHHk.js";import"./use-key-composition-LsVaZQ7e.js";import"./use-id-CMiYphtp.js";const ee=q({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(i,{slots:h,emit:d}){const b=F(),o=k(null);let n=0;const s=[];function _(e){const u=typeof e=="boolean"?e:i.noErrorFocus!==!0,m=++n,C=(t,a)=>{d(`validation${t===!0?"Success":"Error"}`,a)},P=t=>{const a=t.validate();return typeof a.then=="function"?a.then(r=>({valid:r,comp:t}),r=>({valid:!1,comp:t,err:r})):Promise.resolve({valid:a,comp:t})};return(i.greedy===!0?Promise.all(s.map(P)).then(t=>t.filter(a=>a.valid!==!0)):s.reduce((t,a)=>t.then(()=>P(a).then(r=>{if(r.valid===!1)return Promise.reject(r)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return m===n&&C(!0),!0;if(m===n){const{comp:a,err:r}=t[0];if(r!==void 0&&console.error(r),C(!1,a),u===!0){const V=t.find(({comp:B})=>typeof B.focus=="function"&&L(B.$)===!1);V!==void 0&&V.comp.focus()}}return!1})}function x(){n++,s.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function y(e){e!==void 0&&Q(e);const u=n+1;_().then(m=>{u===n&&m===!0&&(i.onSubmit!==void 0?d("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function S(e){e!==void 0&&Q(e),d("reset"),N(()=>{x(),i.autofocus===!0&&i.noResetFocus!==!0&&f()})}function f(){j(()=>{if(o.value===null)return;const e=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),u=>u.tabIndex!==-1);e?.focus({preventScroll:!0})})}E(O,{bindComponent(e){s.push(e)},unbindComponent(e){const u=s.indexOf(e);u!==-1&&s.splice(u,1)}});let w=!1;return I(()=>{w=!0}),$(()=>{w===!0&&i.autofocus===!0&&f()}),A(()=>{i.autofocus===!0&&f()}),Object.assign(b.proxy,{validate:_,resetValidation:x,submit:y,reset:S,focus:f,getValidationComponents:()=>s}),()=>R("form",{class:"q-form",ref:o,onSubmit:y,onReset:S},D(h.default))}}),te={class:"text-h5 text-weight-bold"},oe={class:""},ae={class:""},ne={href:"http://photobooth-app.org/setup/admincenter/",target:"_blank",class:"text-weight-bold",style:{"text-decoration":"none"}},se=T({__name:"LoginPage",setup(i){const h=K(),d=M({username:"admin",password:null}),b=async()=>{try{await J(d),h.push("/admin")}catch(o){console.error(o)}};return(o,n)=>(U(),Y(Z,{id:"login-page",class:"flex flex-center"},{default:c(()=>[l(H,{class:"q-pa-md no-shadow login-card",bordered:""},{default:c(()=>[l(ee,{ref:"form",class:"q-gutter-md",onSubmit:b},{default:c(()=>[l(p,{class:"text-center"},{default:c(()=>[v("div",te,g(o.$t("Sign in")),1),v("div",oe,g(o.$t("Sign in below to access the admin dashboard.")),1)]),_:1}),l(p,null,{default:c(()=>[l(X,{modelValue:d.password,"onUpdate:modelValue":n[0]||(n[0]=s=>d.password=s),filled:"",type:"password",label:"Password"},null,8,["modelValue"])]),_:1}),l(p,null,{default:c(()=>[l(z,{rounded:"",color:"dark",label:"Sign in",class:"full-width",type:"submit"})]),_:1}),l(p,{class:"text-center"},{default:c(()=>[v("div",ae,[G(g(o.$t("Looking for the default password or issues signing in?"))+" ",1),v("a",ne,g(o.$t("Check the documentation.")),1)])]),_:1})]),_:1},512)]),_:1})]),_:1}))}}),fe=W(se,[["__file","LoginPage.vue"]]);export{fe as default};
