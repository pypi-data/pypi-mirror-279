import{_ as ne,a as ie,b as se,c as ue,d as de,e as re,f as me,g as pe,P as ce,h as ve}from"../../../js/ProjectNav-ZteX4Mvo.js";import{d as P,o as i,n as r,w as a,a as l,cu as W,cw as H,cx as ye,b$ as B,V as f,b as S,cv as K,g as $,i as V,ct as Q,K as z,l as T,f as p,t as b,O as R,c3 as M,c as y,cg as A,s as N,v as c,P as D,L as U,cy as F,cz as G,N as I,h as E,m as C,F as w,r as _,aW as ee,M as L,y as fe,A as ke,cA as be,cB as ge,b3 as J,Q as q,ak as le,cC as Z,aY as Ve,cf as we,aV as Se,cn as ae,z as Ce,q as _e,cq as he,cr as $e,bg as ze,D as Pe,e as x,c8 as X,k as xe}from"../../../js/index-lT0LPxUj.js";import{C as O}from"../../../js/Card-BRXgEJx0.js";import{b as j,_ as te,a as Y}from"../../../js/ValueSlider-iRYTroCs.js";import{_ as oe}from"../../../js/NodeAvatar-DTlOEnet.js";import{_ as Ue}from"../../../js/ModelDoc-1guyb5qd.js";import{_ as Te}from"../../../js/ConnectionAvatar-B74VkVt7.js";import{_ as je}from"../../../js/NodeMenu-Cz3qSbB5.js";import"../../../js/NodeMenu-DEwU1fiM.js";import"../../../js/ImportDialog-BqKQn0ih.js";import"../../../js/networkGraphStore-DCNH56J4.js";const Be=P({__name:"ActivityAnimationController",props:{graph:{}},setup(g){return(d,e)=>(i(),r(O,{class:"ma-1",color:"primary"},{default:a(()=>[l(Q,{class:"pa-0",variant:"accordion"},{default:a(()=>[l(W,{density:"compact"},{default:a(()=>[l(H,{class:"expansion-panel-title d-flex align-center pl-0 pr-2"},{default:a(()=>[l(ye,{onClick:e[9]||(e[9]=B(()=>{},["stop"])),mandatory:"",variant:"text"},{default:a(()=>[l(f,{onClick:e[0]||(e[0]=t=>d.graph.setFirstFrame()),icon:"mdi:mdi-skip-backward",title:"set first frame"}),l(f,{active:d.graph.state.frames.speed<-1,onClick:e[1]||(e[1]=t=>d.graph.decrementFrameSpeed()),icon:"",title:"speed down"},{default:a(()=>[l(S,{class:"mdi-rotate-180",icon:"mdi:mdi-fast-forward"})]),_:1},8,["active"]),l(f,{active:d.graph.state.frames.speed===-1,onClick:e[2]||(e[2]=t=>d.graph.playBackwardFrameAnimation()),icon:"",title:"play backward"},{default:a(()=>[l(S,{class:"mdi-rotate-180",icon:"mdi:mdi-play"})]),_:1},8,["active"]),l(f,{onClick:e[3]||(e[3]=t=>d.graph.stepBackwardFrame()),icon:"mdi:mdi-step-backward",title:"step backward"}),l(f,{active:d.graph.state.frames.speed===0,onClick:e[4]||(e[4]=t=>d.graph.pauseFrameAnimation()),icon:"mdi:mdi-pause",title:"pause"},null,8,["active"]),l(f,{onClick:e[5]||(e[5]=t=>d.graph.stepForwardFrame()),icon:"mdi:mdi-step-forward",title:"step forward"}),l(f,{active:d.graph.state.frames.speed===1,onClick:e[6]||(e[6]=t=>d.graph.playFrameAnimation()),icon:"mdi:mdi-play",title:"play forward"},null,8,["active"]),l(f,{active:d.graph.state.frames.speed>1,onClick:e[7]||(e[7]=t=>d.graph.incrementFrameSpeed()),icon:"mdi:mdi-fast-forward",title:"speed up"},null,8,["active"]),l(f,{onClick:e[8]||(e[8]=t=>d.graph.setLastFrame()),icon:"mdi:mdi-skip-forward",title:"set last frame"})]),_:1})]),_:1}),l(K,{class:"ma-1"},{default:a(()=>[l($,null,{default:a(()=>[l(V,null,{default:a(()=>[l(j,{disabled:d.graph.state.nSamples===0,max:d.graph.state.nSamples,min:0,readonly:d.graph.state.frames.speed!==0,unit:"ms",label:"Current time",modelValue:d.graph.frameIdx,"onUpdate:modelValue":e[10]||(e[10]=t=>d.graph.frameIdx=t)},null,8,["disabled","max","readonly","modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(j,{max:60,min:1,label:"Frame rate",unit:"fps",modelValue:d.graph.state.frames.rate,"onUpdate:modelValue":e[11]||(e[11]=t=>d.graph.state.frames.rate=t)},null,8,["modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(j,{max:20,min:1,label:"Grid divisions",modelValue:d.graph.state.grid.divisions,"onUpdate:modelValue":e[12]||(e[12]=t=>d.graph.state.grid.divisions=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ie={key:0},Re={style:{"font-size":"12px"}},Me={key:0},Ne={style:{"font-size":"12px"}},Ge={key:0},De=["src"],Ee=["src"],Ae=P({__name:"ActivityAnimationControllerLayer",props:{layer:{}},setup(g){const d=["BrBG","PRGn","PiYG","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral","Blues","Greens","Greys","Oranges","Purples","Reds","Turbo","Viridis","Inferno","Magma","Plasma","Cividis","Warm","Cool","CubehelixDefault","BuGn","BuPu","GnBu","OrRd","PuBuGn","PuBu","PuRd","RdPu","YlGnBu","YlGn","YlOrBr","YlOrRd","Rainbow","Sinebow"];return(e,t)=>(i(),r(W,{density:"compact",elevation:"1",tile:""},{default:a(()=>[l(H,null,{actions:a(()=>[l(S,{onClick:t[0]||(t[0]=B(()=>e.layer.state.visible=!e.layer.state.visible,["stop"])),icon:e.layer.state.visible?"mdi-eye":"mdi-eye-off"},null,8,["icon"])]),default:a(()=>[l(z,{class:"text-button"},{default:a(()=>[l(oe,{node:e.layer.activity.recorder},null,8,["node"]),l(T),p(" "+b(e.layer.activity.recorder.model.label)+" ",1),l(T)]),_:1})]),_:1}),l(K,{class:"px-1 py-0"},{default:a(()=>{var v;return[l(R,{flat:"",tile:""},{default:a(()=>[l(M,{items:e.layer.models,class:"my-2",density:"compact","hide-details":"",label:"Select geometry model","prepend-inner-icon":"mdi-shape","return-object":"",modelValue:e.layer.modelSelected,"onUpdate:modelValue":t[1]||(t[1]=u=>e.layer.modelSelected=u),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),e.layer.activity.recorder.model.isAnalogRecorder?(i(),r(R,{key:0,flat:"",rounded:"0"},{default:a(()=>[e.layer.state.records.length>0?(i(),y("span",Ie,[l(M,{items:e.layer.state.records,onChange:t[2]||(t[2]=()=>{e.layer.graph.update()}),attach:"",chips:"",class:"pa-1 pt-3",density:"compact","hide-details":"","item-value":"groupId",label:"Recorded events","persistent-hint":"","return-object":"",size:"small",modelValue:e.layer.state.record,"onUpdate:modelValue":t[3]||(t[3]=u=>e.layer.state.record=u)},{selection:a(({item:u})=>[l(A,{color:u.raw.color,class:"mx-2","disable-lookup":"",label:"",size:"small",variant:"outlined"},{default:a(()=>[p(b(u.raw.id),1)]),_:2},1032,["color"]),N("div",Re,[p(b(u.raw.label)+" ",1),u.raw.unit?(i(),y("span",Me," ("+b(u.raw.unit)+")",1)):c("",!0)])]),item:a(({item:u})=>[l(A,{color:u.raw.color,class:"mx-2",label:"",size:"small",variant:"outlined"},{default:a(()=>[p(b(u.raw.id),1)]),_:2},1032,["color"]),N("div",Ne,[p(b(u.raw.label)+" ",1),u.raw.unit?(i(),y("span",Ge," ("+b(u.raw.unit)+")",1)):c("",!0)])]),_:1},8,["items","modelValue"])])):c("",!0),e.layer.state.record?(i(),r(R,{key:1,flat:"",tile:""},{default:a(()=>[l(D,{class:"px-1 py-0"},{default:a(()=>[l(z,{"no-gutters":""},{default:a(()=>[l(U,{class:"py-0",cols:"2"},{default:a(()=>[l(F,{label:`min (${e.layer.state.record.unit})`,step:.1,"hide-details":"",style:{"font-size":"13px"},type:"number",modelValue:e.layer.state.record.colorMap.min,"onUpdate:modelValue":t[4]||(t[4]=u=>e.layer.state.record.colorMap.min=u)},null,8,["label","modelValue"])]),_:1}),l(T),l(U,{class:"py-0",cols:"6"},{default:a(()=>[l(M,{items:d,"hide-details":"",style:{"font-size":"13px"},modelValue:e.layer.state.record.colorMap.scale,"onUpdate:modelValue":t[5]||(t[5]=u=>e.layer.state.record.colorMap.scale=u)},{item:a(({item:u})=>[l(z,{style:{width:"200px"}},{default:a(()=>[l(U,{class:"py-0",cols:"4"},{default:a(()=>[N("img",{src:require(`@/assets/img/colorscales/${u}.png`),alt:"colorscale",height:"20",width:"100%"},null,8,De)]),_:2},1024),l(U,{class:"py-0",cols:"8"},{default:a(()=>[p(b(u),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]),_:1}),l(T),l(U,{class:"py-0",cols:"2"},{default:a(()=>[l(F,{label:`max (${e.layer.state.record.unit})`,step:.1,"hide-details":"",style:{"font-size":"13px"},type:"number",modelValue:e.layer.state.record.colorMap.max,"onUpdate:modelValue":t[6]||(t[6]=u=>e.layer.state.record.colorMap.max=u)},null,8,["label","modelValue"])]),_:1}),N("img",{src:require(`@/assets/img/colorscales/${e.layer.state.record.colorMap.scale}.png`),alt:"colorscale",height:"8",width:"100%"},null,8,Ee)]),_:1}),l(G,{color:"accent",density:"compact",label:"Reverse colormap",modelValue:e.layer.state.record.colorMap.reverse,"onUpdate:modelValue":t[7]||(t[7]=u=>e.layer.state.record.colorMap.reverse=u)},null,8,["modelValue"])]),_:1})]),_:1})):c("",!0)]),_:1})):c("",!0),l(R,{flat:"",rounded:"0"},{default:a(()=>[l(D,{class:"pa-0"},{default:a(()=>[l(j,{max:10,min:1,step:.1,value:e.layer.state.object.size,label:"Object size"},null,8,["value"]),l(j,{max:1,min:0,step:.01,value:e.layer.state.object.opacity,label:"Object opacity"},null,8,["value"])]),_:1})]),_:1}),e.layer.activity.recorder.model.isSpikeRecorder?(i(),r(R,{key:1,flat:"",title:"Trail"},{default:a(()=>[l($,null,{default:a(()=>[l(V,null,{default:a(()=>[l(j,{max:e.layer.graph.state.frames.sampleRate*50,min:0,step:e.layer.graph.state.frames.sampleRate,label:"Trail length",modelValue:e.layer.state.trail.length,"onUpdate:modelValue":t[8]||(t[8]=u=>e.layer.state.trail.length=u)},null,8,["max","step","modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(G,{"hide-details":"",label:"Trail fading",modelValue:e.layer.state.trail.fading,"onUpdate:modelValue":t[9]||(t[9]=u=>e.layer.state.trail.fading=u)},null,8,["modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(M,{items:["off","growing","shrinking"],class:"mt-2",density:"compact","hide-details":"",label:"Trail mode",modelValue:e.layer.state.trail.mode,"onUpdate:modelValue":t[10]||(t[10]=u=>e.layer.state.trail.mode=u),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):c("",!0),(v=e.layer.modelSelected)!=null&&v.value.includes("box")?(i(),r(R,{key:2,flat:"",subtitle:"Box style"},{default:a(()=>[l(D,{class:"py-0"},{default:a(()=>[l(G,{"hide-details":"",density:"compact",label:"Flatten height",modelValue:e.layer.state.object.flatHeight,"onUpdate:modelValue":t[11]||(t[11]=u=>e.layer.state.object.flatHeight=u)},null,8,["modelValue"]),l(G,{"hide-details":"",density:"compact",label:"Flying planes",modelValue:e.layer.state.object.flyingBoxes,"onUpdate:modelValue":t[12]||(t[12]=u=>e.layer.state.object.flyingBoxes=u)},null,8,["modelValue"])]),_:1})]),_:1})):c("",!0)]}),_:1})]),_:1}))}}),Fe=P({__name:"ModelParamEditor",props:{param:{}},setup(g){const d=g,e=I(()=>d.param),t=u=>{e.value.value=u,e.value.changes()},v=[{icon:"custom:dice-multiple-outline",onClick:()=>{e.value.state.random=!e.value.state.random,e.value.changes()},title:"Toggle view"},{icon:"mdi:mdi-reload",iconClass:"mdi-flip-h",onClick:()=>{e.value.reset(),e.value.changes()},title:"Set default value"},{icon:"mdi:mdi-eye-off-outline",iconClass:"",onClick:()=>{e.value.hide(),e.value.changes()},title:"Hide parameter"}];return(u,m)=>d.param?(i(),r(V,{key:0,class:"param pl-0 pr-1"},{append:a(()=>[l(E,null,{activator:a(({props:n})=>[l(f,C({color:"primary",class:"menu align-center justify-center my-auto",icon:"mdi:mdi-dots-vertical",size:"x-small"},n,{variant:"text"}),null,16)]),default:a(()=>[l($,{density:"compact"},{default:a(()=>[(i(),y(w,null,_(v,(n,o)=>l(V,{key:o,title:n.title,onClick:s=>n.onClick()},{prepend:a(()=>[l(S,{class:ee(n.iconClass),icon:n.icon},null,8,["class","icon"])]),_:2},1032,["title","onClick"])),64))]),_:1})]),_:1})]),default:a(()=>[l(z,{"no-gutters":""},{default:a(()=>[e.value.state.random?(i(),r(ne,{key:0,param:e.value},null,8,["param"])):e.value.options.component==="arrayInput"?(i(),r(ie,C({key:1,"model-value":e.value.value,"onUpdate:modelValue":t},e.value.options),null,16,["model-value"])):e.value.options.component==="rangeSlider"?(i(),r(te,C({key:2,"model-value":e.value.value,"onUpdate:modelValue":t},e.value.options),null,16,["model-value"])):e.value.options.component==="tickSlider"?(i(),r(Y,C({key:3,"model-value":e.value.value,"onUpdate:modelValue":t},e.value.options),null,16,["model-value"])):e.value.options.component==="valueSlider"?(i(),r(j,C({key:4,"model-value":e.value.value,"onUpdate:modelValue":t},e.value.options),null,16,["model-value"])):c("",!0)]),_:1})]),_:1})):c("",!0)}}),Oe={key:0},Le=P({__name:"CopyModelMenu",props:{model:{}},setup(g){const d=g,e=I(()=>d.model),t=L({content:void 0,dialog:!1,show:!1,spatialNode:!1}),v=[{icon:"mdi:mdi-reload",iconClass:"mdi-flip-h",id:"resetParams",onClick:()=>{e.value.resetParams()},append:!1,show:()=>!0,title:"Reset all parameters"},{icon:"mdi:mdi-information-outline",iconClass:"",id:"modelDoc",onClick:()=>{t.dialog=!0},show:()=>e.value.existingModelId!=="voltmeter",title:"Model documentation"},{icon:"mdi:mdi-trash-can-outline",iconClass:"",id:"copyModelDelete",onClick:()=>{ge({title:"Delete copied model?",text:"Are you sure to delete copied model?",buttons:[{title:"no",key:"no"},{title:"yes",key:"yes"}]}).then(u=>{u==="yes"&&e.value.remove()})},show:()=>!0,title:"Delete copied model"}];return(u,m)=>(i(),r(E,{"close-on-content-click":!1,activator:"parent",modelValue:t.show,"onUpdate:modelValue":m[0]||(m[0]=n=>t.show=n)},{default:a(()=>[l(R,{flat:"",style:{"min-width":"300px"}},{default:a(()=>[t.content==null?(i(),y("span",Oe,[l($,{density:"compact"},{default:a(()=>[(i(),y(w,null,_(v,(n,o)=>fe(l(V,{key:o,title:n.title,onClick:n.onClick},{append:a(()=>[n.append?(i(),r(S,{key:0,icon:"mdi:mdi-menu-right",size:"small"})):c("",!0)]),prepend:a(()=>[l(S,{class:ee(n.iconClass),icon:n.icon},null,8,["class","icon"])]),_:2},1032,["title","onClick"]),[[ke,n.show()]])),64))]),_:1})])):c("",!0),N("span",null,[l(be,{value:t.dialog,width:"80%"},{default:a(()=>[l(Ue,{id:e.value.existingModelId},null,8,["id"])]),_:1},8,["value"])])]),_:1})]),_:1},8,["modelValue"]))}}),qe={class:"d-print-none menu"},Ye=P({__name:"CopyModelEditor",props:{model:{}},setup(g){const d=g,e=I(()=>d.model),t=L({elementType:"",items:[],menu:!1,panelIdx:null}),v=[{title:"neuron",value:"neuron"},{title:"recorder",value:"recorder"},{title:"stimulator",value:"stimulator"}],u=(m,n)=>{["neuron","recorder","stimulator"].includes(m.value)?(t.elementType=m.value,t.items=e.value.network.project.modelDBStore.getModelsByElementType(m.value)):e.value.existingModelId=m.value,n&&n()};return J(()=>{t.items=e.value.models,t.elementType=e.value.elementType}),(m,n)=>e.value.show?(i(),r(O,{key:0,class:"ma-1"},{default:a(()=>[l(q,{class:"model-title"},{default:a(()=>[l(M,{"item-props":!0,items:t.items,label:t.elementType+" model",class:"model-select text-primary",density:"compact","hide-details":"","item-title":"label","item-value":"id",modelValue:e.value.existingModelId,"onUpdate:modelValue":n[6]||(n[6]=o=>e.value.existingModelId=o),variant:"outlined"},le({append:a(()=>[N("div",qe,[l(E,{"close-on-content-click":!1,modelValue:t.menu,"onUpdate:modelValue":n[4]||(n[4]=o=>t.menu=o)},{activator:a(({props:o})=>[l(f,C({color:"primary",icon:"mdi:mdi-order-bool-ascending-variant",size:"small"},o,{variant:"text"}),null,16)]),default:a(()=>[l(R,null,{default:a(()=>[l(D,null,{default:a(()=>[e.value.params?(i(!0),y(w,{key:0},_(Object.values(e.value.params),(o,s)=>(i(),r(G,{key:s,label:o.label,value:o.id,density:"compact","hide-details":"",modelValue:e.value.paramsVisible,"onUpdate:modelValue":n[0]||(n[0]=k=>e.value.paramsVisible=k)},{append:a(()=>[p(b(o.id)+": "+b(o.value)+" "+b(o.unit),1)]),_:2},1032,["label","value","modelValue"]))),128)):c("",!0)]),_:1}),l(Z,null,{default:a(()=>[l(f,{onClick:n[1]||(n[1]=B(()=>e.value.showAllParams(),["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" all ")]),_:1}),l(f,{onClick:n[2]||(n[2]=B(()=>e.value.hideAllParams(),["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" none ")]),_:1}),l(T),l(f,{onClick:n[3]||(n[3]=B(o=>t.menu=!1,["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(f,{color:"primary",icon:"",size:"small",variant:"text"},{default:a(()=>[l(S,{icon:"mdi:mdi-dots-vertical"}),l(Le,{model:e.value},null,8,["model"])]),_:1})])]),item:a(({props:o})=>[l(V,{onClick:s=>u(o),class:"model-item"},{append:a(()=>[t.elementType?(i(),r(f,{key:0,onClick:B(s=>u(o,()=>t.menu=!0),["stop"]),class:"icon",icon:"mdi:mdi-menu-right",size:"x-small",variant:"outlined"},null,8,["onClick"])):c("",!0)]),default:a(()=>[p(b(o.title)+" ",1)]),_:2},1032,["onClick"])]),_:2},[t.elementType?{name:"prepend-item",fn:a(()=>[l(V,{onClick:n[5]||(n[5]=()=>{t.elementType="",t.items=v})},{prepend:a(()=>[l(S,{icon:"mdi:mdi-menu-left"})]),default:a(()=>[p(" Other element types ")]),_:1})]),key:"0"}:void 0]),1032,["items","label","modelValue"])]),_:1}),l(D,null,{default:a(()=>[l(F,{class:"ma-1",density:"compact","hide-details":"",label:"New label",modelValue:e.value.newModelId,"onUpdate:modelValue":n[7]||(n[7]=o=>e.value.newModelId=o),variant:"outlined"},null,8,["modelValue"]),e.value.paramsVisible.length>0?(i(),r($,{key:0,class:"py-0"},{default:a(()=>[(i(!0),y(w,null,_(e.value.paramsVisible,(o,s)=>(i(),r(Fe,{key:s,param:e.value.params[o]},null,8,["param"]))),128))]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0)}}),We=P({__name:"NodeRecordSelect",props:{node:{}},setup(g){return(d,e)=>(i(),y("div",null,[l(M,{items:d.node.recordables,"onUpdate:modelValue":[e[1]||(e[1]=t=>d.node.changes()),e[2]||(e[2]=t=>d.node.records=t)],"base-color":"primary",chips:"",class:"pa-1",clearable:"","closable-chips":"",color:"primary",density:"compact","hide-details":"","item-title":"title","item-value":"groupId",label:"Record from",multiple:"","persistent-hint":"","return-object":"",modelValue:d.node.records,variant:"outlined"},{chip:a(({item:t})=>[l(se,{nodeRecord:t.raw,onClick:e[0]||(e[0]=B(()=>{},["prevent"]))},null,8,["nodeRecord"])]),_:1},8,["items","modelValue"])]))}}),He=P({__name:"SynapseParamEditor",props:{param:{}},setup(g){const d=g,e=I(()=>d.param),t=u=>{e.value.value=u,e.value.changes()},v=[{title:"Set default value",icon:"mdi:mdi-reload",onclick:()=>{e.value.reset(),e.value.changes()}},{title:"Hide parameter",icon:"mdi:mdi-eye-off-outline",onclick:()=>{e.value.hide(),e.value.changes()}}];return(u,m)=>d.param?(i(),r(V,{key:0,class:"param pl-0 pr-1"},{default:a(()=>[l(z,{"no-gutters":""},{default:a(()=>[e.value.options.component==="rangeSlider"?(i(),r(te,C({key:0,"model-value":e.value.value,"thumb-color":e.value.synapse.connection.sourceNode.view.color,"onUpdate:modelValue":t},e.value.options),null,16,["model-value","thumb-color"])):e.value.options.component==="tickSlider"?(i(),r(Y,C({key:1,"model-value":e.value.value,"thumb-color":e.value.synapse.connection.sourceNode.view.color,"onUpdate:modelValue":t},e.value.options),null,16,["model-value","thumb-color"])):e.value.options.component==="valueSlider"?(i(),r(j,C({key:2,"model-value":e.value.value,"thumb-color":e.value.synapse.connection.sourceNode.view.color,"onUpdate:modelValue":t},e.value.options),null,16,["model-value","thumb-color"])):c("",!0),l(E,{"close-on-content-click":!1},{activator:a(({props:n})=>[l(f,C({class:"d-print-none menu align-center justify-center my-auto",color:"primary",icon:"mdi:mdi-dots-vertical",size:"x-small"},n),null,16)]),default:a(()=>[l($,{density:"compact"},{default:a(()=>[(i(),y(w,null,_(v,(n,o)=>l(V,{key:o,icon:n.icon,onClick:n.onclick},{prepend:a(()=>[l(S,{icon:n.icon},null,8,["icon"])]),default:a(()=>[p(" "+b(n.title),1)]),_:2},1032,["icon","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1})):c("",!0)}}),Ke={class:"d-print-none menu align-center justify-center my-auto mx-1"},Qe=P({__name:"SynapseSpecEditor",props:{synapse:{}},setup(g){const d=g,e=I(()=>d.synapse),t=[{id:"paramsReset",icon:"mdi:mdi-restart",title:"Reset synapse params",onClick:()=>{e.value.reset()},show:()=>!0},{id:"weightInverse",icon:"mdi:mdi-contrast",title:"Inverse synaptic weight",onClick:()=>{e.value.inverseWeight()}}];return(v,u)=>(i(),y(w,null,[e.value.connection.view.connectRecorder()?c("",!0):(i(),r(z,{key:0,class:"syn-spec mx-1","no-gutters":""},{default:a(()=>[l(M,{disabled:e.value.models.length<2,items:e.value.models,class:"pa-1",density:"compact","hide-details":"","item-title":"label","item-value":"id",label:"Synapse model",modelValue:e.value.modelId,"onUpdate:modelValue":u[0]||(u[0]=m=>e.value.modelId=m),variant:"outlined"},null,8,["disabled","items","modelValue"]),N("div",Ke,[l(E,{"close-on-content-click":!1},{activator:a(({props:m})=>[l(f,C({color:"primary",icon:"mdi:mdi-order-bool-ascending-variant",size:"small"},m,{variant:"text"}),null,16)]),default:a(()=>[l(R,null,{default:a(()=>[l(D,null,{default:a(()=>[(i(!0),y(w,null,_(Object.values(e.value.modelParams),(m,n)=>(i(),r(G,{color:e.value.connection.sourceNode.view.color,key:n,label:m.label,value:m.id,density:"compact","hide-details":"",modelValue:e.value.paramsVisible,"onUpdate:modelValue":u[1]||(u[1]=o=>e.value.paramsVisible=o)},{append:a(()=>[p(b(m.id)+": "+b(m.value)+" "+b(m.unit),1)]),_:2},1032,["color","label","value","modelValue"]))),128))]),_:1})]),_:1})]),_:1}),l(E,null,{activator:a(({props:m})=>[l(f,C({color:"primary",icon:"mdi:mdi-dots-vertical",size:"small",variant:"text"},m),null,16)]),default:a(()=>[l($,{density:"compact"},{default:a(()=>[(i(),y(w,null,_(t,(m,n)=>l(V,{key:n,onClick:m.onClick},{prepend:a(()=>[l(S,{icon:m.icon},null,8,["icon"])]),default:a(()=>[p(" "+b(m.title),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})])]),_:1})),e.value.paramsVisible.length>0?(i(),r($,{key:1,density:"compact"},{default:a(()=>[(i(!0),y(w,null,_(e.value.filteredParams,(m,n)=>(i(),r(He,{key:n,param:m},null,8,["param"]))),128))]),_:1})):c("",!0)],64))}}),Je={class:"d-flex flex-column justify-center align-center text-grey"},Xe={key:0},Ze=P({__name:"ConnectionEditor",props:{connection:{}},setup(g){const d=g,e=I(()=>d.connection),t=I(()=>e.value.synapse),v=[{id:"connectionReset",icon:"mdi:mdi-restart",title:"Reset connection",onClick:()=>{e.value.reset(),t.value.reset(),t.value.hideAllParams()}},{id:"connectionReverse",icon:"mdi:mdi-rotate-3d-variant",title:"Reverse connection",onClick:()=>{e.value.reverse(),e.value.changes()}},{id:"weightInverse",icon:"mdi:mdi-contrast",title:"Inverse synaptic weight",onClick:()=>{t.value.inverseWeight()}},{id:"connectionDelete",icon:"mdi:mdi-trash-can-outline",title:"Delete connection",onClick:()=>{e.value.remove()},append:!0}];return(u,m)=>(i(),r(W,{style:Ve({opacity:e.value.view.opacity?1:.3}),onMouseenter:m[0]||(m[0]=n=>e.value.state.focus()),onMouseleave:m[1]||(m[1]=n=>e.value.connections.unfocusConnection()),elevation:"0",rounded:"0"},{default:a(()=>[l(H,{class:"expansion-panel-title"},{default:a(()=>[l(z,{"no-gutters":""},{default:a(()=>[l(Te,{connection:e.value},null,8,["connection"]),l(T),N("div",Je,[p(b(e.value.rule.value)+" ",1),e.value.view.connectOnlyNeurons()?(i(),y("div",Xe,b(e.value.synapse.modelId),1)):c("",!0)]),l(T),l(E,null,{activator:a(({props:n})=>[l(f,C({class:"menu",color:"primary",icon:"mdi:mdi-dots-vertical",size:"small",variant:"text"},n),null,16)]),default:a(()=>[l($,{density:"compact"},{default:a(()=>[(i(),y(w,null,_(v,(n,o)=>l(V,{icon:n.icon,key:o,onClick:n.onClick},{prepend:a(()=>[l(S,{icon:n.icon},null,8,["icon"])]),default:a(()=>[p(" "+b(n.title),1)]),_:2},1032,["icon","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),l(K,{class:"ma-1"},{default:a(()=>[l(ue,{connection:e.value},null,8,["connection"]),l(Qe,{synapse:t.value},null,8,["synapse"])]),_:1})]),_:1},8,["style"]))}}),el=N("span",{class:"my-1"},"Positions",-1),ll=P({__name:"NodePositionTitle",props:{nodeSpatial:{}},setup(g){return(d,e)=>d.nodeSpatial.positions?(i(),r(z,{key:0,class:"my-auto","no-gutters":""},{default:a(()=>[el,l(T),l(A,{title:d.nodeSpatial.positions.name+" positions",class:"mx-1",label:"",size:"x-small",variant:"outlined"},{default:a(()=>{var t;return[l(S,{icon:((t=d.nodeSpatial.positions)==null?void 0:t.name)==="grid"?"custom:dots-grid":"custom:dice-multiple-outline"},null,8,["icon"])]}),_:1},8,["title"]),d.nodeSpatial.positions.name==="free"?(i(),r(A,{key:0,class:"mx-1",label:"",size:"x-small",title:"dimensions",variant:"outlined"},{default:a(()=>[p(b(d.nodeSpatial.positions.numDimensions)+"D ",1)]),_:1})):c("",!0),d.nodeSpatial.positions.name==="grid"?(i(),r(A,{key:1,class:"mx-1",label:"",size:"x-small",title:"shape",variant:"outlined"},{default:a(()=>[p(b(d.nodeSpatial.positions.shape),1)]),_:1})):c("",!0),d.nodeSpatial.positions.name==="free"?(i(),r(A,{key:2,class:"mx-1",label:"",size:"x-small",title:"size",variant:"outlined"},{default:a(()=>[p(b(d.nodeSpatial.node.size),1)]),_:1})):c("",!0),d.nodeSpatial.positions.edgeWrap?(i(),r(A,{key:3,class:"mx-1",label:"",size:"x-small",title:"edge wrap",variant:"outlined"},{default:a(()=>[l(S,{icon:"mdi:mdi-format-text-wrapping-wrap",size:"small"})]),_:1})):c("",!0)]),_:1})):c("",!0)}}),al={key:0},tl={key:1},ol=P({__name:"NodePosition",props:{nodeSpatial:{}},setup(g){const d=g,e=I(()=>d.nodeSpatial),t=L({numDimensions:!1,positions:[{title:"Free positions",value:"free"},{title:"Grid positions",value:"grid"}],selectedPositions:"free",sizeOptions:{input:"valueSlider",label:"population size",max:1e3,rules:[["value > 0","The value must be strictly positive.","error"],["value < 1000","Large values generate many data points and can put quite a load on your browser.","warning"]],value:1}}),v=()=>{Se(()=>{e.value.init({positions:t.selectedPositions})})},u=()=>{e.value.changes()};return J(()=>{var m;t.selectedPositions=((m=e.value.positions)==null?void 0:m.name)||"free"}),(m,n)=>e.value.positions?(i(),r(Q,{key:0,variant:"accordion"},{default:a(()=>[l(W,{density:"compact",elevation:"0",tile:""},{default:a(()=>[l(H,{class:"expansion-panel-title"},{default:a(()=>[(i(),r(ll,{key:e.value.hash,nodeSpatial:e.value},null,8,["nodeSpatial"]))]),_:1}),l(K,null,{default:a(()=>[l(M,{items:t.positions,"onUpdate:modelValue":[n[0]||(n[0]=o=>v()),n[1]||(n[1]=o=>t.selectedPositions=o)],density:"compact","hide-details":"",modelValue:t.selectedPositions,variant:"outlined"},null,8,["items","modelValue"]),l(we,{inset:"",max:"3",min:"2","true-icon":"mdi:mdi-numeric-3","false-icon":"mdi:mdi-numeric-2","show-ticks":"always",step:"1","onUpdate:modelValue":[n[2]||(n[2]=o=>e.value.updatePositionParams({numDimensions:o?3:2})),n[3]||(n[3]=o=>t.numDimensions=o)],modelValue:t.numDimensions,label:"number of dimensions"},null,8,["modelValue"]),e.value.positions.name==="free"?(i(),y("span",al,[l(j,{"thumb-color":e.value.node.view.color,"onUpdate:modelValue":[n[4]||(n[4]=o=>e.value.changes()),n[5]||(n[5]=o=>e.value.node.size=o)],id:"n","input-label":"n",label:"population size",modelValue:e.value.node.size},null,8,["thumb-color","modelValue"])])):c("",!0),e.value.positions.name==="grid"?(i(),y("span",tl,[l(z,null,{default:a(()=>[l(U,{class:"ma-auto",cols:"3"},{default:a(()=>[p("shape")]),_:1}),l(T),(i(!0),y(w,null,_(e.value.positions.shape,(o,s)=>(i(),r(U,{key:s,cols:"3"},{default:a(()=>[l(F,{label:(e.value.positions.numDimensions===2?["rows","columns"]:["x","y","z"])[s],min:1,"model-value":o,"onUpdate:modelValue":k=>{if(e.value.positions){const h=e.value.positions.shape;h[s]=parseInt(k),e.value.updatePositionParams({shape:h})}},density:"compact","hide-details":"",type:"number",variant:"outlined"},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1}),l(z,null,{default:a(()=>[l(U,{class:"ma-auto",cols:"3"},{default:a(()=>[p("center")]),_:1}),l(T),(i(!0),y(w,null,_(e.value.positions.center,(o,s)=>(i(),r(U,{key:s,cols:"3"},{default:a(()=>[l(F,{label:["x","y","z"][s],"model-value":o,step:.1,"onUpdate:modelValue":k=>{if(e.value.positions){const h=e.value.positions.center;h[s]=parseFloat(k),e.value.updatePositionParams({center:h})}},density:"compact","hide-details":"",type:"number",variant:"outlined"},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1}),l(z,null,{default:a(()=>[l(U,{class:"ma-auto",cols:"3",title:""},{default:a(()=>[p("extent")]),_:1}),l(T),(i(!0),y(w,null,_(e.value.positions.extent,(o,s)=>(i(),r(U,{key:s,cols:"3"},{default:a(()=>[l(F,{label:["x","y","z"][s],min:0,"model-value":o,step:.1,"onUpdate:modelValue":k=>{if(e.value.positions){const h=e.value.positions.extent;h[s]=parseFloat(k),e.value.updatePositionParams({extent:h})}},density:"compact","hide-details":"",type:"number",variant:"outlined"},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})])):c("",!0),l(z,null,{default:a(()=>[l(U,{class:"py-0"},{default:a(()=>[l(G,{class:"ma-0",color:"accent",label:"Edge wrap",modelValue:e.value.positions.edgeWrap,"onUpdate:modelValue":n[6]||(n[6]=o=>e.value.positions.edgeWrap=o)},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{onClick:n[7]||(n[7]=o=>u()),size:"small",variant:"outlined"},{default:a(()=>[p(" Update positions ")]),_:1})]),_:1})]),_:1})]),_:1})):c("",!0)}}),nl={class:"d-print-none menu"},il=P({__name:"NodeEditor",props:{node:{}},setup(g){const d=g,e=I(()=>d.node),t=L({elementType:"",items:[],menu:!1,panelIdx:null}),v=[{title:"copied model",value:"copied"},{title:"neuron",value:"neuron"},{title:"recorder",value:"recorder"},{title:"stimulator",value:"stimulator"}],u=[{icon:"mdi:mdi-reload",iconClass:"mdi-flip-h",onClick:()=>{e.value.size=1},title:"Set default size"},{icon:"mdi:mdi-axis-arrow",iconClass:"",onClick:()=>{e.value.toggleSpatial()},title:"Toggle spatial mode"}],m=(n,o)=>{["neuron","recorder","stimulator","copied"].includes(n.value)?(t.elementType=n.value,n.value==="copied"?t.items=e.value.network.modelsCopied.filterByGeneralElementType("node"):t.items=e.value.network.project.modelDBStore.getModelsByElementType(n.value)):e.value.modelId=n.value,o&&o()};return J(()=>{t.items=e.value.models,t.elementType=e.value.elementType}),(n,o)=>e.value.show?(i(),r(O,{key:0,color:e.value.view.color,onMouseenter:o[12]||(o[12]=s=>e.value.view.focus()),onMouseleave:o[13]||(o[13]=s=>e.value.nodes.unfocusNode()),class:"ma-1"},{default:a(()=>[l(q,{class:"node-title mt-2 ml-10"},{default:a(()=>[l(M,{"item-props":!0,items:t.items,label:t.elementType+" model",class:"model-select text-primary",density:"compact","hide-details":"","item-title":"label","item-value":"id",modelValue:e.value.modelId,"onUpdate:modelValue":o[8]||(o[8]=s=>e.value.modelId=s),variant:"outlined"},le({append:a(()=>[N("div",nl,[l(E,{"close-on-content-click":!1,modelValue:t.menu,"onUpdate:modelValue":o[5]||(o[5]=s=>t.menu=s)},{activator:a(({props:s})=>[l(f,C({color:"primary",icon:"mdi:mdi-order-bool-ascending-variant",size:"small"},s,{variant:"text"}),null,16)]),default:a(()=>[l(R,null,{default:a(()=>[l(D,null,{default:a(()=>[l(G,{disabled:e.value.model.isRecorder,color:e.value.view.color,density:"compact","hide-details":"",label:"Population size",modelValue:e.value.view.state.showSize,"onUpdate:modelValue":o[0]||(o[0]=s=>e.value.view.state.showSize=s)},{append:a(()=>[p(" n: "+b(e.value.size),1)]),_:1},8,["disabled","color","modelValue"]),e.value.modelParams?(i(!0),y(w,{key:0},_(Object.values(e.value.modelParams),(s,k)=>(i(),r(G,{color:e.value.view.color,key:k,label:s.label,value:s.id,density:"compact","hide-details":"",modelValue:e.value.paramsVisible,"onUpdate:modelValue":o[1]||(o[1]=h=>e.value.paramsVisible=h)},{append:a(()=>[p(b(s.id)+": "+b(s.value)+" "+b(s.unit),1)]),_:2},1032,["color","label","value","modelValue"]))),128)):c("",!0)]),_:1}),l(Z,null,{default:a(()=>[l(f,{onClick:o[2]||(o[2]=B(()=>e.value.showAllParams(),["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" all ")]),_:1}),l(f,{onClick:o[3]||(o[3]=B(()=>e.value.hideAllParams(),["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" none ")]),_:1}),l(T),l(f,{onClick:o[4]||(o[4]=B(s=>t.menu=!1,["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(f,{color:"primary",icon:"",size:"small",variant:"text"},{default:a(()=>[l(S,{icon:"mdi:mdi-dots-vertical"}),l(je,{node:e.value},null,8,["node"])]),_:1})])]),item:a(({props:s})=>[l(V,{onClick:k=>m(s),class:"node-model-item"},{append:a(()=>[t.elementType?(i(),r(f,{key:0,onClick:B(k=>m(s,()=>t.menu=!0),["stop"]),class:"icon",icon:"mdi:mdi-menu-right",size:"x-small",variant:"outlined"},null,8,["onClick"])):c("",!0)]),default:a(()=>[p(b(s.title)+" ",1)]),_:2},1032,["onClick"])]),prepend:a(()=>[l(f,{class:"position-absolute",flat:"",icon:"",size:"large",style:{left:"8px",top:"8px"}},{default:a(()=>[l(oe,{node:e.value,onClick:o[6]||(o[6]=s=>e.value.select()),size:"48px"},null,8,["node"])]),_:1})]),_:2},[t.elementType?{name:"prepend-item",fn:a(()=>[l(V,{onClick:o[7]||(o[7]=()=>{t.elementType="",t.items=v})},{prepend:a(()=>[l(S,{icon:"mdi:mdi-menu-left"})]),default:a(()=>[p(" Other element types ")]),_:1})]),key:"0"}:void 0]),1032,["items","label","modelValue"])]),_:1}),l(D,{class:"pa-0"},{default:a(()=>[e.value.view.state.showSize?(i(),r($,{key:0,class:"py-0"},{default:a(()=>[l(V,{class:"param pl-0 pr-1"},{append:a(()=>[l(E,null,{activator:a(({props:s})=>[l(f,C({color:"primary",class:"d-print-none menu align-center justify-center my-auto",icon:"mdi:mdi-dots-vertical",size:"x-small",variant:"text"},s),null,16)]),default:a(()=>[l($,{density:"compact"},{default:a(()=>[(i(),y(w,null,_(u,(s,k)=>l(V,{key:k,title:s.title,onClick:h=>s.onClick()},{prepend:a(()=>[l(S,{class:ee(s.iconClass),icon:s.icon},null,8,["class","icon"])]),_:2},1032,["title","onClick"])),64))]),_:1})]),_:1})]),default:a(()=>[l(z,{"no-gutters":""},{default:a(()=>[e.value.spatial.hasPositions?(i(),r(ol,{key:0,nodeSpatial:e.value.spatial},null,8,["nodeSpatial"])):(i(),r(j,{key:1,"thumb-color":e.value.view.color,"onUpdate:modelValue":[o[9]||(o[9]=s=>e.value.changes()),o[10]||(o[10]=s=>e.value.size=s)],id:"n","input-label":"n",label:"population size",modelValue:e.value.size},null,8,["thumb-color","modelValue"]))]),_:1})]),_:1})]),_:1})):c("",!0),e.value.model.isMultimeter?(i(),r($,{key:1,class:"py-0"},{default:a(()=>[l(V,null,{default:a(()=>[l(We,{node:e.value},null,8,["node"])]),_:1})]),_:1})):c("",!0),e.value.paramsVisible.length>0?(i(),r($,{key:2,class:"py-0"},{default:a(()=>[(i(!0),y(w,null,_(e.value.paramsVisible,(s,k)=>(i(),r(de,{key:k,param:e.value.params[s]},null,8,["param"]))),128))]),_:1})):c("",!0)]),_:1}),e.value.connections.length>0?(i(),r(Z,{key:0,style:{"min-height":"40px"}},{default:a(()=>[l(z,null,{default:a(()=>[(i(),r(Q,{key:e.value.connections.length,modelValue:e.value.view.connectionPanelIdx,"onUpdate:modelValue":o[11]||(o[11]=s=>e.value.view.connectionPanelIdx=s),variant:"accordion"},{default:a(()=>[(i(!0),y(w,null,_(e.value.connections,(s,k)=>(i(),r(Ze,{connection:s,key:k},null,8,["connection"]))),128))]),_:1},8,["modelValue"]))]),_:1})]),_:1})):c("",!0)]),_:1},8,["color"])):c("",!0)}}),sl={class:"simulationKernelEditor"},ul=P({__name:"SimulationKernelEditor",props:{color:{default:"primary",type:String}},setup(g){const d=ae(),e=g,t=I(()=>d.state.project.simulation),v={autoRNGSeedSettings:{component:"checkbox",label:"randomize seed",rules:[n=>!n||"It always generates new script code. Uncheck if you want to modify the script."]},resolutionSettings:{id:"resolution",component:"tickSlider",label:"simulation resolution",tickLabels:[.01,.1,1,10],unit:"ms",rules:[n=>n>=.1||"Small values generate many data points and can put quite a load on your browser."]},rngSeedSettings:{id:"rng_seed",component:"valueSlider",label:"seed of the random number generator",max:1e3,min:1,rules:[n=>n>0||"The value must be strictly positive."],value:1},simulationTimeSettings:{id:"time",component:"valueSlider",label:"simulation time",max:2e3,min:0,unit:"ms",value:1e3,rules:[n=>n<2e3||"Large values generate many data points and can put quite a load on your browser."]},threadSettings:{component:"tickSlider",label:"local number of threads",tickLabels:[1,2,4,8]}},u=L({autoRNGSeed:!1});function m(){var n;(n=t.value.kernel.config)==null||n.update({autoRNGSeed:u.autoRNGSeed})}return J(()=>{var n;u.autoRNGSeed=(n=t.value.kernel.config)==null?void 0:n.localStorage.autoRNGSeed}),(n,o)=>(i(),y("div",sl,[l(_e,{color:"transparent",density:"compact"},{default:a(()=>[l(Ce,null,{default:a(()=>[p(" Simulation kernel editor")]),_:1})]),_:1}),l(O,{color:e.color,class:"ma-1"},{default:a(()=>[l(q,{class:"pa-0 text-center text-button"},{default:a(()=>[p(" Simulation kernel ")]),_:1}),l(D,null,{default:a(()=>[l(Y,C({"thumb-color":e.color,class:"mx-1 py-1"},v.threadSettings,{modelValue:t.value.kernel.localNumThreads,"onUpdate:modelValue":o[0]||(o[0]=s=>t.value.kernel.localNumThreads=s)}),null,16,["thumb-color","modelValue"]),l(Y,C({thumbColor:e.color,class:"mx-1 py-1"},v.resolutionSettings,{modelValue:t.value.kernel.resolution,"onUpdate:modelValue":o[1]||(o[1]=s=>t.value.kernel.resolution=s)}),null,16,["thumbColor","modelValue"]),l(j,C({"thumb-color":e.color,class:"mx-1 py-1"},v.rngSeedSettings,{modelValue:t.value.kernel.rngSeed,"onUpdate:modelValue":o[2]||(o[2]=s=>t.value.kernel.rngSeed=s)}),null,16,["thumb-color","modelValue"]),l(G,C({color:e.color,"onUpdate:modelValue":o[3]||(o[3]=s=>m()),class:"mx-1","hide-details":"auto"},v.autoRNGSeedSettings,{modelValue:u.autoRNGSeed,"onUpdate:modelValue":o[4]||(o[4]=s=>u.autoRNGSeed=s)}),null,16,["color","modelValue"])]),_:1})]),_:1},8,["color"]),l(O,{color:e.color,class:"ma-1"},{default:a(()=>[l(q,{class:"pa-0 text-center text-button"},{default:a(()=>[p(" Simulation ")]),_:1}),l(D,{class:"py-0"},{default:a(()=>[l(j,C({"thumb-color":e.color,class:"mx-1 py-2"},v.simulationTimeSettings,{modelValue:t.value.time,"onUpdate:modelValue":o[5]||(o[5]=s=>t.value.time=s)}),null,16,["thumb-color","modelValue"])]),_:1})]),_:1},8,["color"])]))}}),dl={key:0},rl={key:1},Sl=P({__name:"ProjectLayout",setup(g){const d=he(),e=$e(),t=ae(),v=I(()=>t.state.project),u=ze(""),m=()=>{v.value.network.modelsCopied.copy(u.value),v.value.network.changes()};return(n,o)=>{const s=Pe("router-view");return i(),y(w,null,[l(re,{modelDBStore:x(d),projectDBStore:x(e)},null,8,["modelDBStore","projectDBStore"]),l(me,{projectStore:x(t),color:"nest-project"},{tabs:a(()=>[l(X,{to:{name:"nestNetworkEditor",params:{projectId:x(t).state.projectId}},title:"Network Editor",size:"small",stacked:"",value:"edit"},{default:a(()=>[l(S,{icon:"network:network"}),p(" Editor ")]),_:1},8,["to"]),l(X,{to:{name:"nestActivityExplorer",params:{projectId:x(t).state.projectId}},title:"Activity Explorer",size:"small",stacked:"",value:"explore"},{default:a(()=>[l(S,{class:"mdi-flip-v",icon:"mdi:mdi-border-style"}),p(" Explorer ")]),_:1},8,["to"]),l(f,{disabled:!v.value.network.nodes.hasSomeSpatialNodes,height:"100%",rounded:"0",variant:"plain",width:"32",style:{"min-width":"32px"}},{default:a(()=>[l(S,{icon:"mdi:mdi-menu-down"}),l(E,{activator:"parent"},{default:a(()=>[l($,{density:"compact"},{default:a(()=>[l(V,{onClick:o[0]||(o[0]=()=>x(t).state.tab.activityView="abstract")},{prepend:a(()=>[l(S,{class:"mdi-flip-v",icon:"mdi:mdi-border-style"})]),default:a(()=>[p(" abstract ")]),_:1}),l(V,{onClick:o[1]||(o[1]=()=>x(t).state.tab.activityView="spatial"),"prepend-icon":"mdi:mdi-axis-arrow"},{default:a(()=>[p(" spatial ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled"]),l(xe,{vertical:""}),l(X,{to:{name:"nestLabBook",params:{projectId:x(t).state.projectId}},title:"Lab Book",size:"small",stacked:"",value:"lab"},{default:a(()=>[l(S,{icon:"mdi:mdi-book-open-outline"}),p(" Lab Book ")]),_:1},8,["to"])]),_:1},8,["projectStore"]),l(ce,{projectStore:x(t)},{activityController:a(()=>[x(t).state.tab.activityView==="abstract"?(i(),r(pe,{key:0,graph:v.value.activityGraph.activityChartGraph},null,8,["graph"])):x(t).state.tab.activityView==="spatial"?(i(),y(w,{key:1},[l(Be,{graph:v.value.activityGraph.activityAnimationGraph},null,8,["graph"]),l(Q,null,{default:a(()=>[(i(!0),y(w,null,_(v.value.activityGraph.activityAnimationGraph.layers,(k,h)=>(i(),r(Ae,{key:h,layer:k},null,8,["layer"]))),128))]),_:1})],64)):c("",!0)]),model:a(()=>[v.value.network.state.elementTypeIdx===5?(i(),y("span",dl,[l(M,{items:v.value.modelDBStore.state.models,class:"ma-1",density:"compact",flat:"","hide-details":"","item-title":"label","item-value":"id",label:"Existing model","prepend-icon":"mdi:mdi-plus",modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=k=>u.value=k),variant:"outlined"},{append:a(()=>[l(f,{disabled:u.value.length===0,onClick:o[2]||(o[2]=k=>m()),text:"copy",variant:"outlined"},null,8,["disabled"])]),_:1},8,["items","modelValue"])])):c("",!0),[0,5].includes(v.value.network.state.elementTypeIdx)?(i(),y("span",rl,[(i(!0),y(w,null,_(v.value.network.modelsCopied.all,(k,h)=>(i(),r(Ye,{key:h,model:k},null,8,["model"]))),128))])):c("",!0)]),nodes:a(()=>[(i(),y("div",{key:v.value.network.nodes.length},[(i(!0),y(w,null,_(v.value.network.nodes.all,(k,h)=>(i(),y("div",{key:h},[k.isNode?(i(),r(il,{key:0,node:k},null,8,["node"])):k.isGroup?(i(),r(ve,{key:1,nodeGroup:k},null,8,["nodeGroup"])):c("",!0)]))),128))]))]),simulationKernel:a(()=>[l(ul,{simulation:v.value.simulation},null,8,["simulation"])]),_:1},8,["projectStore"]),(i(),r(s,{key:x(t).state.projectId,name:"project"}))],64)}}});export{Sl as default};
