import{_ as M}from"./NodeMenu-DEwU1fiM.js";import{d as x,N as g,bg as G,b3 as N,dM as b,a$ as B,o as t,c as r,a as C,w as E,f as S,t as V,cg as W,s as e,n as H,v as a,F as $,r as z,aY as w}from"./index-lT0LPxUj.js";import{u as F}from"./networkGraphStore-DCNH56J4.js";const R={style:{width:"100%",height:"100%"}},Y={style:{width:"320px"}},A=e("rect",{height:"100%",id:"workspaceHandler",width:"100%"},null,-1),D={id:"networkWorkspace"},P=e("g",{class:"grid no-print"},null,-1),T={id:"network"},U=["id"],X={key:0,d:"M10,2L14,4L10,6",fill:"transparent",stroke:"currentcolor"},j={key:1,fill:"currentcolor",r:"2",stroke:"currentcolor",transform:"translate(12,4)"},q={key:2,d:"M10,2L14,4L10,6L10,2L14,4",fill:"currentcolor",stroke:"currentcolor"},I={key:3,fill:"transparent",r:"4",stroke:"currentcolor",transform:"translate(5,5)"},J=e("text",{dx:"8",dy:"5"},null,-1),K={class:"dragline"},O=e("g",{id:"nodeGroups"},null,-1),Q=e("g",{id:"connections"},null,-1),Z=e("g",{id:"nodes"},null,-1),ee=e("g",{id:"nodeAddPanel"},null,-1),ne=x({__name:"NetworkGraph",props:{network:{}},setup(v){const l=F(),y=v,L=g(()=>y.network),s=g(()=>l.state.graph),d=G(null);return N(()=>{l.mount(new b(d,L.value))}),B(()=>{l.unmount()}),(te,i)=>{var c,u,h,_,k,p,f,m;return t(),r("div",R,[C(W,{onClick:i[0]||(i[0]=o=>{var n;return(n=s.value)==null?void 0:n.updateHash()}),size:"small",variant:"text"},{default:E(()=>{var o;return[S(V((o=s.value)==null?void 0:o.hash),1)]}),_:1}),e("div",Y,[(c=s.value)!=null&&c.state.nodeMenu.node?(t(),H(M,{key:0,"model-value":(u=s.value)==null?void 0:u.state.nodeMenu.open,node:(h=s.value)==null?void 0:h.state.nodeMenu.node,offset:(_=s.value)==null?void 0:_.state.nodeMenu.offset},null,8,["model-value","node","offset"])):a("",!0)]),(t(),r("svg",{class:"networkGraph",height:"100%",ref_key:"networkGraphRef",ref:d,width:"100%"},[A,e("g",D,[P,e("g",T,[(t(),r("g",{key:(k=s.value)==null?void 0:k.network.connections.all.length,class:"synMarker"},[(t(!0),r($,null,z((p=s.value)==null?void 0:p.network.connections.all,(o,n)=>(t(),r("defs",{key:"defs"+n,style:w({color:"var(--node"+o.source.idx+"-color)"})},[(t(),r("marker",{key:o.hash,id:"syn-"+n,markerHeight:"8",markerWidth:"16",orient:"auto",refX:"14",refY:"4"},[o.view.markerEndLabel==="generic"?(t(),r("path",X)):a("",!0),o.view.markerEndLabel==="inh"?(t(),r("circle",j)):a("",!0),o.view.markerEndLabel==="exc"?(t(),r("path",q)):a("",!0),o.view.markerEndLabel==="assigned"?(t(),r("circle",I)):a("",!0),J],8,U))],4))),128))])),e("g",K,[e("path",{style:w({strokeWidth:(m=(f=s.value)==null?void 0:f.config)==null?void 0:m.localStorage.strokeWidth}),d:"M0,0L0,0",fill:"none"},null,4)]),O,Q,Z]),ee])],512))])}}});export{ne as _};
