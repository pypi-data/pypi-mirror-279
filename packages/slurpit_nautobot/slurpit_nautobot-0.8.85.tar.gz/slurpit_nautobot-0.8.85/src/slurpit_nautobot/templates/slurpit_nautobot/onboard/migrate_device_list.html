{% load buttons %}
{% load i18n %}
{% load helpers %}
{% load static %}

<div class=" show {% if request.GET.tab == 'new' or request.GET.tab is None %}active{% endif %}" id="new-device-list" role="tabpanel" aria-labelledby="new-device-list-tab">
   
    <form method="post" class="form form-horizontal">
         <!-- sync button -->
        {# Object table controls #}
        
      {% csrf_token %}
      {# "Select all" form #}
      {% if table.paginator.num_pages > 1 %}
        <div id="select-all-box" class="d-none card noprint">
          <div class="form col-md-12">
            <div class="card-body">
              <div class="float-end">
              </div>
              <div class="form-check">
                <input type="checkbox" id="select-all" name="_all" class="form-check-input" />
                <label for="select-all" class="form-check-label">
                  {% blocktrans trimmed with count=table.rows|length object_type_plural=table.data.verbose_name_plural %}
                    Select <strong>all {{ count }} {{ object_type_plural }}</strong> matching query
                  {% endblocktrans %}
                </label>
              </div>
            </div>
          </div>
        </div>
      {% endif %}

      <div class="form form-horizontal">
        {% csrf_token %}
        <input type="hidden" name="return_url" value="{% if return_url %}{{ return_url }}{% else %}{{ request.path }}{% if request.GET %}?{{ request.GET.urlencode }}{% endif %}{% endif %}" />

        {# Object table #}

            {% if prerequisite_model %}
              {% include 'inc/missing_prerequisites.html' %}
            {% endif %}

        <div class="card">
          <div class="card-body htmx-container table-responsive" id="object_list">
            <div class="col-md-12">
              <div class="pull-left noprint">
                <div class="dropdown mb-3">
                  <button type="button" class="btn  btn-warning dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="mdi mdi-refresh"></i>&nbsp;{% trans "Migrate" %} <span class="caret"></span>
                  </button>
                  {% block bulk_buttons %}
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                        <button type="submit" name="_rename" formaction="{% url 'plugins:slurpit_nautobot:onboard' %}?migrate=create&return_url={% url 'plugins:slurpit_nautobot:importeddevice_list' %}{% if request.GET %}?{{ request.GET.urlencode }}{% endif %}" class="btn">
                          <i class="mdi mdi-plus" aria-hidden="true"></i> {% trans "Re-Create device" %}
                        </button>
                    </li>
                    <li>
                        <button type="submit" name="_rename" formaction="{% url 'plugins:slurpit_nautobot:onboard' %}?migrate=update&return_url={% url 'plugins:slurpit_nautobot:importeddevice_list' %}{% if request.GET %}?{{ request.GET.urlencode }}{% endif %}" class="btn">
                          <i class="mdi mdi-pencil" aria-hidden="true"></i> {% trans "Update existing device" %}
                        </button>
                    </li>
                  </ul>
                  {% endblock %}
                </div>
                <span>In green is the incoming change from Slurp'it</span>
              </div>
              
            </div>
            {% block table %}
              {% include "slurpit_nautobot/table.html" %}
            {% endblock %}
          </div>
        </div>

        
      </div>
    </form>
  </div>