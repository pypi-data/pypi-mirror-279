import requests
from pyt2s.service import Service

class Oddcast(Service):

    __validNames__ = [ '4-3-1', '6-2-1', '5-4-1', '4-2-1', '5-3-1', '2-7-1', '1-7-1', '7-4-1', '5-2-1', '12-4-1', '8-4-1', '9-2-1', '10-2-1', '4-7-1', '4-4-1', '10-4-1', 
        '3-7-1', '13-4-1', '5-7-1', '6-7-1', '9-4-1', '11-2-1', '7-2-1', '6-3-1', '8-3-1', '7-7-1', '3-1-1', '1-1-1', '2-2-1', '7-3-1', '2-4-1', '3-3-1', '1-3-1', 
        '2-1-1', '2-3-1', '4-1-1', '11-4-1', '8-2-1', '1-2-1', '3-4-1', '8-7-1', '1-7-27', '2-7-27', '2-2-27', '1-4-27', '1-2-27', '1-4-22', '3-2-5', '2-2-5', 
        '1-2-5', '1-4-5', '3-3-10', '5-3-10', '4-3-10', '1-2-10', '2-2-10', '4-4-10', '4-7-10', '6-3-10', '7-3-10', '1-4-10', '3-7-10', '2-7-10', '1-7-10', '2-4-10', 
        '8-3-10', '1-7-18', '1-4-18', '1-7-19', '2-7-19', '1-2-19', '1-4-19', '2-2-19', '2-4-11', '2-7-11', '1-7-11', '2-2-11', '1-2-11', '4-4-11', '1-4-11', '1-2-31', 
        '2-7-32', '1-7-32', '2-2-23', '1-4-23', '1-2-23', '1-7-23', '2-1-4', '2-7-4', '1-7-4', '2-2-4', '4-2-4', '3-2-4', '1-1-4', '4-3-4', '3-3-4', '3-4-4', '5-4-4', 
        '4-4-4', '5-2-4', '1-3-4', '1-4-4', '4-7-4', '2-4-4', '2-3-4', '3-7-4', '6-2-4', '3-1-4', '1-2-15', '3-4-3', '2-7-3', '1-7-3', '3-2-3', '1-1-3', '1-3-3', 
        '2-1-3', '2-2-3', '1-4-3', '2-3-3', '2-4-3', '1-2-8', '1-4-8', '1-7-8', '2-7-8', '3-2-8', '2-7-24', '1-4-24', '1-7-24', '1-4-29', '1-7-29', '2-7-28', '1-4-28', 
        '1-7-28', '2-7-7', '1-7-7', '1-3-7', '10-2-7', '9-2-7', '5-2-7', '6-2-7', '8-2-7', '1-2-7', '1-4-7', '7-2-7', '2-3-7', '2-2-7', '2-4-7', '3-2-7', '6-3-12', 
        '5-3-12', '1-7-12', '2-7-12', '1-4-12', '3-3-12', '7-3-12', '4-3-12', '2-3-12', '8-3-12', '7-3-13', '4-3-13', '8-3-13', '10-3-13', '5-3-13', '2-3-13', 
        '1-4-13', '6-3-13', '1-3-13', '9-3-13', '1-7-20', '2-2-20', '2-7-20', '2-4-20', '1-2-20', '1-4-14', '1-7-14', '2-2-14', '2-7-14', '1-2-14', '2-7-6', '3-4-6', 
        '3-7-6', '4-7-6', '1-7-6', '1-3-6', '2-3-6', '2-4-6', '1-2-30', '1-4-30', '2-2-21', '2-4-21', '1-2-21', '1-7-37', '3-4-37', '1-2-2', '6-2-2', '2-2-2', '9-2-2', 
        '4-3-2', '5-3-2', '1-4-2', '3-4-2', '7-2-2', '8-2-2', '10-2-2', '4-2-2', '3-2-2', '2-1-2', '5-2-2', '2-3-2', '3-3-2', '5-4-2', '4-4-2', '1-1-2', '1-3-2', 
        '1-4-9', '1-2-9', '1-7-9', '2-7-9', '3-4-9', '2-2-9', '1-4-26', '1-3-26', '2-3-26', '1-4-16', '2-7-16', '1-2-16', '3-2-16', '1-7-16', '2-2-16', '1-7-40' ]
    
    __url1__ = 'https://cache-a.oddcast.com/tts/genB.php'

    def requestTTS(self, text: str, voice = '3-3-1'):
        super().requestTTS(text, voice)
        voiceParts = voice.split('-')
        voiceId, engineId, languageId = voiceParts
        params = {
            'EID': int(engineId),
            'LID': int(languageId),
            'VID': int(voiceId),
            'TXT': text,
            'EXT': 'mp3',
            'FNAME': '',
            'ACC': 15679,
            'SceneID': 2703396,
            'HTTP_ERR': '',
            'cache_flag': 3
        }
        res = requests.get(self.__url1__, params=params)
        return res.content
