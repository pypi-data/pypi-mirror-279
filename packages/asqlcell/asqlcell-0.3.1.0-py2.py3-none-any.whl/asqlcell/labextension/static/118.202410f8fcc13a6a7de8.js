(self.webpackChunkasqlcell=self.webpackChunkasqlcell||[]).push([[118],{5040:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AreaChart=void 0;const l=a(8952),r=n(a(6271)),i=a(8743);t.AreaChart=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,{fw:600},"X-Axis"),r.default.createElement(i.FieldSwitch,{major:"x",minor:"y",sort:!0}),r.default.createElement(l.Text,{fw:600},"Y-Axis"),r.default.createElement(i.FieldSwitch,{major:"y",minor:"x",sort:!0}),r.default.createElement(i.AggregationSwitch,{major:"x",minor:"y"}),r.default.createElement(l.Text,{fw:600},"Color"),r.default.createElement(i.FieldSwitch,{major:"color",clearable:!0}))},7456:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BarChart=void 0;const l=a(8952),r=n(a(6271)),i=a(8743);t.BarChart=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,{fw:600},"X-Axis"),r.default.createElement(i.FieldSwitch,{major:"y",minor:"x",sort:!0}),r.default.createElement(l.Text,{fw:600},"Y-Axis"),r.default.createElement(i.FieldSwitch,{major:"x",minor:"y",sort:!0}),r.default.createElement(i.AggregationSwitch,{major:"x",minor:"y"}),r.default.createElement(l.Text,{fw:600},"Color"),r.default.createElement(i.FieldSwitch,{major:"color",clearable:!0}))},5286:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnChart=void 0;const l=a(8952),r=n(a(6271)),i=a(8743);t.ColumnChart=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,{fw:600},"X-Axis"),r.default.createElement(i.FieldSwitch,{major:"x",minor:"y",sort:!0}),r.default.createElement(l.Text,{fw:600},"Y-Axis"),r.default.createElement(i.FieldSwitch,{major:"y",minor:"x",sort:!0}),r.default.createElement(i.AggregationSwitch,{major:"y",minor:"x"}),r.default.createElement(l.Text,{fw:600},"Color"),r.default.createElement(i.FieldSwitch,{major:"color",clearable:!0}))},2644:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ComboChart=void 0;const l=a(8952),r=n(a(6271)),i=a(8743);t.ComboChart=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,{fw:600},"X-Axis"),r.default.createElement(i.FieldSwitch,{major:"x",sort:!0}),r.default.createElement(l.Text,{fw:600},"Column"),r.default.createElement(i.FieldSwitch,{major:"y"}),r.default.createElement(i.AggregationSwitch,{major:"y"}),r.default.createElement(l.Text,{fw:600},"Line"),r.default.createElement(i.FieldSwitch,{major:"y2"}),r.default.createElement(i.AggregationSwitch,{major:"y2"}))},2718:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FunnelChart=void 0;const l=a(8952),r=n(a(6271)),i=a(8743);t.FunnelChart=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,{fw:600},"X-Axis"),r.default.createElement(i.FieldSwitch,{major:"x",minor:"y"}),r.default.createElement(l.Text,{fw:600},"Y-Axis"),r.default.createElement(i.FieldSwitch,{major:"y",minor:"x"}))},6334:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HistChart=void 0;const l=n(a(6271)),r=a(9581),i=a(8952);t.HistChart=({item:e,headerContent:t})=>{var a,n;const o=null!==(a=t.bins)&&void 0!==a?a:[],u=e=>{let t="";return t=0===e?"0":(e=>!(.1<=Math.abs(e)&&Math.abs(e)<=1e4))(e)?(e=>e.toExponential(2))(e):e.toFixed(2),t},c={table:null!==(n=o.map(((e,t)=>({a:`[${u(e.bin_start)}, ${u(e.bin_end)}]`,b:e.count,index:t}))))&&void 0!==n?n:[]};return l.default.createElement(i.Stack,null,o.length>0?l.default.createElement(l.default.Fragment,null,l.default.createElement(r.VegaLite,{data:c,actions:!1,renderer:"svg",spec:{background:"transparent",data:{name:"table"},width:60,height:40,config:{view:{stroke:null}},layer:[{params:[{name:"hover",select:{type:"point",on:"mouseover",clear:"mouseout"}}],mark:{type:"bar",color:"#eee",tooltip:!0},transform:[{calculate:"datum.a + ': ' +datum.b",as:"tooltip"}],encoding:{x:{field:"index",type:"nominal",axis:{labels:!1,title:null}},tooltip:{field:"tooltip",type:"nominal"},opacity:{condition:{test:{param:"hover",empty:!1},value:.5},value:0},detail:[{field:"count"}]}},{mark:"bar",transform:[{calculate:"datum.b===0 ? 0 : datum.b === 1? 0.5: log(datum.b)/log(2)",as:"log_x"}],encoding:{x:{field:"index",type:"nominal",axis:{labels:!1,title:null,ticks:!1}},y:{field:"log_x",type:"quantitative",axis:{labels:!1,domain:!1,grid:!1,ticks:!1,title:null}}}}]}}),l.default.createElement(i.Group,{sx:{width:"max-content"}},l.default.createElement(i.Text,{size:"xs",c:"#696969",sx:{marginTop:"-20px"}},(e=>{var t,a,n,l;const r=null!==(a=null===(t=o[0])||void 0===t?void 0:t.bin_start)&&void 0!==a?a:0,i=null!==(l=null===(n=o[9])||void 0===n?void 0:n.bin_end)&&void 0!==l?l:1;return`[${u(r)}, ${u(i)}]`})()))):l.default.createElement(l.default.Fragment,null))}},5370:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),l(a(5040),t),l(a(7456),t),l(a(5286),t),l(a(2644),t),l(a(2718),t),l(a(6334),t),l(a(4757),t),l(a(2591),t),l(a(4873),t),l(a(2089),t)},4757:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LineChart=void 0;const l=a(8952),r=n(a(6271)),i=a(8743);t.LineChart=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,{fw:600},"X-Axis"),r.default.createElement(i.FieldSwitch,{major:"x",minor:"y",sort:!0}),r.default.createElement(l.Text,{fw:600},"Y-Axis"),r.default.createElement(i.FieldSwitch,{major:"y",minor:"x",sort:!0}),r.default.createElement(i.AggregationSwitch,{major:"y",minor:"x"}),r.default.createElement(l.Text,{fw:600},"Color"),r.default.createElement(i.FieldSwitch,{major:"color",clearable:!0}))},2591:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PieChart=void 0;const l=a(8952),r=n(a(6271)),i=a(8743);t.PieChart=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,{fw:600},"Size"),r.default.createElement(i.FieldSwitch,{major:"y",minor:"x",sort:!0}),r.default.createElement(i.AggregationSwitch,{major:"y",minor:"x"}),r.default.createElement(l.Text,{fw:600},"Color"),r.default.createElement(i.FieldSwitch,{major:"x",minor:"y",sort:!0}))},4873:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScatterChart=void 0;const l=a(8952),r=n(a(6271)),i=a(8743);t.ScatterChart=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,{fw:600},"X-Axis"),r.default.createElement(i.FieldSwitch,{major:"x"}),r.default.createElement(l.Text,{fw:600},"Y-Axis"),r.default.createElement(i.FieldSwitch,{major:"y"}),r.default.createElement(l.Text,{fw:600},"Color"),r.default.createElement(i.FieldSwitch,{major:"color",clearable:!0}),r.default.createElement(l.Text,{fw:600},"Size"),r.default.createElement(i.FieldSwitch,{major:"size",clearable:!0}))},2089:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SunburstChart=void 0;const l=a(8952),r=n(a(6271)),i=a(8743);t.SunburstChart=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,{fw:600},"Category"),r.default.createElement(i.FieldSwitch,{major:"x"}),r.default.createElement(l.Text,{fw:600},"Sub category"),r.default.createElement(i.FieldSwitch,{major:"x2"}),r.default.createElement(l.Text,{fw:600},"Value"),r.default.createElement(i.FieldSwitch,{major:"y",minor:"x"}))},5593:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chart=void 0;const i=a(8952),o=r(a(6271)),u=a(694),c=a(556),s=a(8027),d=a(7295),f=a(2752);t.Chart=()=>{const[e,t]=o.useState(!1),{ref:a,width:n}=s.useElementSize(),[l,r]=o.useState(0),[m,p]=d.useModelState("cache");return o.useEffect((()=>{var e;const a=JSON.parse(m),n=null!==(e=null==a?void 0:a.openedConfig)&&void 0!==e&&e;t(n)}),[m]),o.useEffect((()=>{n>0&&r(n)}),[n]),o.default.createElement(i.Group,{noWrap:!0,align:"flex-start",style:{position:"relative"}},o.default.createElement(i.Group,{noWrap:!0,ml:`-${l+16}px`,style:{transition:"all 0.3s ease-in-out",transform:e?`translate(${l+16}px)`:""}},o.default.createElement(i.Box,{ref:a},o.default.createElement(u.ChartConfig,null)),o.default.createElement(i.Divider,{orientation:"vertical"}),o.default.createElement(c.ChartPreview,null)),o.default.createElement(i.ActionIcon,{variant:"transparent",style:{position:"absolute",top:0,transition:"all 0.3s ease-in-out",transform:e?`translate(${l+16}px)`:"rotate(180deg)"},onClick:()=>{const t=JSON.parse(m);t.openedConfig=!e,p(JSON.stringify(t))}},o.default.createElement(f.IconArrowLeft,null)))}},5690:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigCommand=void 0;const l=a(8952),r=a(2752),i=n(a(6271)),o=a(7295);t.ConfigCommand=()=>{const[e]=o.useModelState("preview_vega"),[,t]=o.useModelState("persist_vega");return i.default.createElement(l.Group,null,i.default.createElement(l.Button,{compact:!0,onClick:()=>t((new Date).toString()),disabled:"{}"===e,leftIcon:i.default.createElement(r.IconPin,{stroke:1.5,size:14})},"Pin"))}},694:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChartConfig=void 0;const l=a(8952),r=a(2752),i=n(a(6271)),o=a(5690),u=a(9162),c=a(8743),s=a(6399);t.ChartConfig=()=>i.default.createElement(l.Tabs,{defaultValue:"config"},i.default.createElement(l.Tabs.List,null,i.default.createElement(l.Tabs.Tab,{value:"config",icon:i.default.createElement(r.IconSettings,{stroke:1.5,size:16})},"Config"),i.default.createElement(l.Tabs.Tab,{value:"display",icon:i.default.createElement(r.IconPresentation,{stroke:1.5,size:16})},"Display")),i.default.createElement(l.Tabs.Panel,{value:"config",pt:"xs"},i.default.createElement(l.ScrollArea,{h:600,sx:{padding:5}},i.default.createElement(l.Stack,{justify:"flex-start"},i.default.createElement(s.ChartPicker,null),i.default.createElement(c.ChartProperties,null),i.default.createElement(l.Space,{h:"xl"}),i.default.createElement(o.ConfigCommand,null)))),i.default.createElement(l.Tabs.Panel,{value:"display",pt:"xs"},i.default.createElement(l.ScrollArea,{h:500,sx:{padding:5}},i.default.createElement(l.Stack,{justify:"flex-start"},i.default.createElement(u.DisplaySize,null)))))},7373:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AggregationType=t.SortIcons=t.SortType=t.DataTypeIcons=t.DataType=t.ChartTypeComponents=t.ChartType=t.ConfigItemWidth=t.LabelWidth=t.MenuWidth=t.MenuHeight=t.ViewHeight=void 0;const l=a(2752),r=n(a(6271)),i=a(5370),o=a(5370),u=a(5370),c=a(5370),s=a(5370),d=a(5370),f=a(5370),m=a(5370),p=a(5370);var h,g,b,v;t.ViewHeight=264,t.MenuHeight=311,t.MenuWidth=285,t.LabelWidth=128,t.ConfigItemWidth=240,function(e){e.Bar="bar",e.Column="column",e.Line="line",e.Area="area",e.Scatter="scatter",e.Pie="pie",e.Combo="combo",e.Funnel="funnel",e.Sunburst="sunburst"}(h=t.ChartType||(t.ChartType={})),t.ChartTypeComponents={[h.Bar]:r.default.createElement(o.BarChart,null),[h.Column]:r.default.createElement(u.ColumnChart,null),[h.Line]:r.default.createElement(d.LineChart,null),[h.Area]:r.default.createElement(i.AreaChart,null),[h.Scatter]:r.default.createElement(m.ScatterChart,null),[h.Pie]:r.default.createElement(f.PieChart,null),[h.Combo]:r.default.createElement(c.ComboChart,null),[h.Funnel]:r.default.createElement(s.FunnelChart,null),[h.Sunburst]:r.default.createElement(p.SunburstChart,null)},function(e){e.Int="int",e.Float="float",e.String="string",e.Bool="bool",e.Datetime="datetime"}(g=t.DataType||(t.DataType={})),t.DataTypeIcons={[g.Int]:r.default.createElement(l.Icon123,{stroke:1.5,size:18}),[g.Float]:r.default.createElement(l.Icon123,{stroke:1.5,size:18}),[g.String]:r.default.createElement(l.IconAbc,{stroke:1.5,size:18}),[g.Bool]:r.default.createElement(l.IconAbc,{stroke:1.5,size:18}),[g.Datetime]:r.default.createElement(l.IconCalendar,{stroke:1.5,size:18})},function(e){e.Ascending="ascending",e.Descending="descending",e.None="none"}(b=t.SortType||(t.SortType={})),t.SortIcons={[b.Ascending]:r.default.createElement(l.IconSortAscending,{stroke:1.5,size:18}),[b.Descending]:r.default.createElement(l.IconSortDescending,{stroke:1.5,size:18}),[b.None]:r.default.createElement(l.IconArrowsSort,{stroke:1.5,size:18})},(v=t.AggregationType||(t.AggregationType={})).Sum="sum",v.Average="average",v.Max="max",v.Min="min",v.Count="count",v.Median="median"},9162:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DisplaySize=void 0;const l=a(8952),r=a(2752),i=n(a(6271)),o=a(7295),u=a(304);t.DisplaySize=()=>{const[e,t]=o.useModelState("chart_config"),a=JSON.parse(e),n=a.width,c=a.height,s=a.label,d=a.legend;return i.default.createElement(l.Stack,null,i.default.createElement(l.NumberInput,{defaultValue:0,label:"Width",max:1e4,min:0,icon:i.default.createElement(r.IconArrowAutofitWidth,{stroke:1.5,size:14}),step:100,sx:{width:240},value:n,onChange:e=>{const n=Object.assign(Object.assign({},a),{width:e});t(JSON.stringify(n))}}),i.default.createElement(l.NumberInput,{defaultValue:0,label:"Height",max:1e4,min:0,icon:i.default.createElement(r.IconArrowAutofitHeight,{stroke:1.5,size:14}),step:100,sx:{width:240},value:c,onChange:e=>{const n=Object.assign(Object.assign({},a),{height:e});t(JSON.stringify(n))}}),i.default.createElement(l.Group,{noWrap:!0,position:"apart"},i.default.createElement(l.Text,null,"Show label"),i.default.createElement(l.Switch,{value:"visible",size:"xs",checked:s,onChange:e=>{const n=Object.assign(Object.assign({},a),{label:e.currentTarget.checked});t(JSON.stringify(n))}})),i.default.createElement(l.Group,{noWrap:!0,position:"apart"},i.default.createElement(l.Text,null,"Show legend"),i.default.createElement(l.Switch,{value:"visible",size:"xs",checked:d.visible,onChange:e=>{const n=Object.assign(Object.assign({},a),{legend:Object.assign(Object.assign({},a.legend),{visible:e.currentTarget.checked})});t(JSON.stringify(n))}})),i.default.createElement(u.ThemeSelect,null))}},5102:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),l(a(1904),t),l(a(694),t),l(a(5593),t),l(a(7373),t),l(a(5370),t)},501:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},i=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.IconItem=void 0;const o=a(8952),u=r(a(6271));t.IconItem=u.forwardRef(((e,t)=>{var{icon:a,value:n,label:l}=e,r=i(e,["icon","value","label"]);return u.default.createElement(o.Group,Object.assign({noWrap:!0,ref:t},r),a,u.default.createElement(o.Text,{size:"sm"},l))}))},556:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChartPreview=void 0;const l=a(8952),r=n(a(6271)),i=a(9581),o=a(7295);t.ChartPreview=()=>{const[e]=o.useModelState("preview_vega"),t=JSON.parse(e);return"$schema"in t?r.default.createElement(l.ScrollArea,{style:{width:"100%"}},r.default.createElement(i.VegaLite,{renderer:"svg",actions:{export:!0,source:!1,compiled:!1,editor:!1},spec:t})):r.default.createElement(r.default.Fragment,null)}},8743:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChartProperties=t.VerticalAxis=t.HorizontalAxis=t.AggregationSwitch=t.FieldSwitch=t.SortToggle=void 0;const l=a(8952),r=n(a(6271)),i=a(7295),o=a(7373),u=a(501);t.SortToggle=({major:e,minor:t,extra:a})=>{const[n,u]=i.useModelState("chart_config"),c=JSON.parse(n),s=c[e].sort?c[e].sort:o.SortType.None;return r.default.createElement(l.Tooltip,{label:s.charAt(0).toUpperCase()+s.slice(1)},r.default.createElement(l.ActionIcon,{onClick:()=>{const n=[o.SortType.Ascending,o.SortType.Descending,o.SortType.None],l=(n.indexOf(s)+1)%n.length;let r=Object.assign(Object.assign({},c),{[e]:Object.assign(Object.assign({},c[e]),{sort:n[l]===o.SortType.None?null:n[l]})});t&&(r=Object.assign(Object.assign({},r),{[t]:Object.assign(Object.assign({},c[t]),{sort:null})})),a&&(r=Object.assign(Object.assign({},r),{[a]:Object.assign(Object.assign({},c[a]),{sort:null})})),u(JSON.stringify(r))}},o.SortIcons[s]))},t.FieldSwitch=({major:e,minor:a,extra:n,sort:c,clearable:s})=>{var d;const[f,m]=i.useModelState("chart_config"),[p]=i.useModelState("title_hist"),h=[...JSON.parse(p)].map((e=>({value:e.columnName,label:e.columnName,icon:o.DataTypeIcons[e.dtype]}))),g=JSON.parse(f),b=g[e].field,v=null===(d=h.find((e=>e.value===b)))||void 0===d?void 0:d.icon;return r.default.createElement(l.Group,{noWrap:!0,spacing:"xs"},r.default.createElement(l.Select,{searchable:!0,clearable:s,data:h,icon:v,value:b,itemComponent:u.IconItem,onChange:t=>{const a=Object.assign(Object.assign({},g),{[e]:Object.assign(Object.assign({},g[e]),{field:t})});m(JSON.stringify(a))},sx:{width:o.ConfigItemWidth}}),c?r.default.createElement(t.SortToggle,{major:e,minor:a,extra:n,sort:c}):void 0)},t.AggregationSwitch=({major:e})=>{const[t,a]=i.useModelState("chart_config"),n=JSON.parse(t),u=n[e].aggregation,c=Object.values(o.AggregationType).map((e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1)})));return r.default.createElement(l.Group,{noWrap:!0,sx:{width:o.ConfigItemWidth}},r.default.createElement(l.Text,null,"Aggregation"),r.default.createElement(l.Select,{searchable:!0,data:c,value:u,onChange:t=>{const l=Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},n[e]),{aggregation:t})});a(JSON.stringify(l))}}))},t.HorizontalAxis=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,null,"X-Axis"),r.default.createElement(t.FieldSwitch,{major:"x",minor:"y",sort:!0})),t.VerticalAxis=()=>r.default.createElement(l.Stack,null,r.default.createElement(l.Text,null,"Y-Axis"),r.default.createElement(t.FieldSwitch,{major:"y",minor:"x",sort:!0}),r.default.createElement(t.AggregationSwitch,{major:"y",minor:"x",sort:!0})),t.ChartProperties=()=>{const[e]=i.useModelState("chart_config"),t=Object.keys(o.ChartType).find((t=>o.ChartType[t]===JSON.parse(e).type)),a=o.ChartType[t],n=o.ChartTypeComponents[a];return r.default.createElement(l.Stack,null,n)}},1904:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickViewChart=void 0;const l=n(a(6271)),r=a(9581),i=a(7295);t.QuickViewChart=()=>{const[e]=i.useModelState("quickview_vega"),t=JSON.parse(e);return"$schema"in t?l.default.createElement(r.VegaLite,{renderer:"svg",actions:{export:!0,source:!1,compiled:!1,editor:!1},spec:t}):l.default.createElement(l.default.Fragment,null)}},304:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeSelect=void 0;const l=a(8952),r=n(a(6271)),i=a(7295);t.ThemeSelect=()=>{const[e,t]=i.useModelState("chart_config"),a=JSON.parse(e),n=a.theme;return r.default.createElement(l.Select,{label:"Theme",data:[{value:"accent",label:"Accent"},{value:"category10",label:"Category 10"},{value:"category20",label:"Category 20"},{value:"dark2",label:"Dark"},{value:"paired",label:"Paired"},{value:"tableau10",label:"Tableau 10"},{value:"tableau20",label:"Tableau 20"},{value:"blues",label:"Blues"},{value:"greens",label:"Greens"},{value:"browns",label:"Browns"}],value:n,onChange:e=>{const n=Object.assign(Object.assign({},a),{theme:e});t(JSON.stringify(n))}})}},6399:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ChartPicker=void 0;const i=a(8952),o=a(2752),u=r(a(6271)),c=a(7295),s=a(7373),d=a(501),f=[{icon:u.default.createElement(o.IconChartBar,{stroke:1.5,size:18}),value:s.ChartType.Column,label:"Column"},{icon:u.default.createElement(o.IconChartBar,{stroke:1.5,size:18,style:{transform:"rotate(90deg)"}}),value:s.ChartType.Bar,label:"Bar"},{icon:u.default.createElement(o.IconChartLine,{stroke:1.5,size:18}),value:s.ChartType.Line,label:"Line"},{icon:u.default.createElement(o.IconChartAreaLine,{stroke:1.5,size:18}),value:s.ChartType.Area,label:"Area"},{icon:u.default.createElement(o.IconChartDots,{stroke:1.5,size:18}),value:s.ChartType.Scatter,label:"Scatter"},{icon:u.default.createElement(o.IconChartPie,{stroke:1.5,size:18}),value:s.ChartType.Pie,label:"Pie"},{icon:u.default.createElement(o.IconChartAreaLine,{stroke:1.5,size:18}),value:s.ChartType.Combo,label:"Combo"},{icon:u.default.createElement(o.IconFilter,{stroke:1.5,size:18}),value:s.ChartType.Funnel,label:"Funnel"},{icon:u.default.createElement(o.IconSun,{stroke:1.5,size:18}),value:s.ChartType.Sunburst,label:"Sunburst"}];t.ChartPicker=()=>{var e;const[t,a]=c.useModelState("chart_config"),[n,l]=u.useState(!1),r=Object.keys(s.ChartType).find((e=>s.ChartType[e]===JSON.parse(t).type)),m=s.ChartType[r],p=null===(e=f.find((e=>e.value===m)))||void 0===e?void 0:e.icon;return u.default.createElement(i.Stack,null,u.default.createElement(i.Text,{fw:600},"Chart type"),u.default.createElement(i.Group,{noWrap:!0,spacing:"xs"},u.default.createElement(i.Select,{searchable:!0,itemComponent:d.IconItem,data:f,icon:p,value:m,onChange:e=>{const n=Object.assign(Object.assign({},JSON.parse(t)),{type:e});a(JSON.stringify(n))},sx:{width:240}}),[s.ChartType.Column,s.ChartType.Bar,s.ChartType.Area].includes(m)?u.default.createElement(i.Menu,{width:160,opened:n,onChange:l,position:"right",shadow:"md",withArrow:!0},u.default.createElement(i.Menu.Target,null,u.default.createElement(i.ActionIcon,{mt:"xl",variant:"transparent",onClick:()=>l(!0)},u.default.createElement(o.IconSettings,{size:16}))),u.default.createElement(i.Menu.Dropdown,null,u.default.createElement(i.Menu.Label,null,"Style"),u.default.createElement(i.Menu.Item,{onClick:()=>{const e=Object.assign(Object.assign({},JSON.parse(t)),{subtype:[]});a(JSON.stringify(e))},icon:u.default.createElement(o.IconStack,{size:12})},"Stack"),[s.ChartType.Area,s.ChartType.Area].includes(m)?void 0:u.default.createElement(i.Menu.Item,{onClick:()=>{const e=Object.assign(Object.assign({},JSON.parse(t)),{subtype:["clustered"]});a(JSON.stringify(e))},icon:u.default.createElement(o.IconChartBar,{size:12})},"Clustered"),u.default.createElement(i.Menu.Item,{onClick:()=>{const e=Object.assign(Object.assign({},JSON.parse(t)),{subtype:["100"]});a(JSON.stringify(e))},icon:u.default.createElement(o.IconPercentage,{size:12})},"100% Stack"))):void 0))}},1873:(e,t)=>{"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.Order=void 0,(a=t.Order||(t.Order={}))[a.Increasing=1]="Increasing",a[a.Descending=-1]="Descending",a[a.None=0]="None"},7295:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useModel=t.useModelEvent=t.useModelState=t.WidgetModelContext=void 0;const n=a(6271);function l(e,t,a){const l=r(),i=void 0===a?[l]:[...a,l];n.useEffect((()=>{const a=e=>l&&t(l,e);return null==l||l.on(e,a),()=>{null==l||l.unbind(e,a)}}),i)}function r(){return n.useContext(t.WidgetModelContext)}t.WidgetModelContext=n.createContext(void 0),t.useModelState=function(e){const t=r(),[a,i]=n.useState(null==t?void 0:t.get(e));return l(`change:${e}`,(t=>{i(t.get(e))}),[e]),[a,function(a,n){null==t||t.set(e,a,n),null==t||t.save_changes()}]},t.useModelEvent=l,t.useModel=r},9118:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SqlCellView=t.SqlCellModel=void 0;const o=r(a(2565)),u=a(2565),c=i(a(6271)),s=i(a(4456));a(7204);const d=a(1873),f=a(8657),m=i(a(553));class p extends o.DOMWidgetModel{constructor(){super(...arguments),this.defaults=()=>Object.assign(Object.assign({},super.defaults()),{_model_name:p.model_name,_model_module:p.model_module,_model_module_version:p.model_module_version,_view_name:p.view_name,_view_module:p.view_module,_view_module_version:p.view_module_version,exec_time:0,row_range:[0,10],column_sort:["",d.Order.None],data_grid:"",column_color:"",quickview_vega:"{}",quickview_var:["",""],quickview_data:"",title_hist:"",cache:"{}",chart_config:"{}",preview_vega:"{}",persist_vega:""})}initialize(e,t){super.initialize(e,t),this.set("json_dump",(new Date).toISOString()),this.save_changes()}}t.SqlCellModel=p,p.serializers=Object.assign({},o.DOMWidgetModel.serializers),p.model_name="SqlCellModel",p.model_module=f.MODULE_NAME,p.model_module_version=f.MODULE_VERSION,p.view_name="SqlCellView",p.view_module=f.MODULE_NAME,p.view_module_version=f.MODULE_VERSION;class h extends u.DOMWidgetView{constructor(){super(...arguments),this.render=()=>{this.el.classList.add("custom-widget");const e=c.default.createElement(m.default,{model:this.model});s.default.render(e,this.el)}}}t.SqlCellView=h},1422:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),l(a(4744),t)},4744:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TablePagination=void 0;const i=r(a(6271)),o=a(8952),u=a(2752),c=a(7295);t.TablePagination=()=>{const e=c.useModel(),[t]=c.useModelState("data_grid"),a=t.split("\n")[1]||0,[n,l]=i.useState((null==e?void 0:e.get("row_range")[1])-(null==e?void 0:e.get("row_range")[0])),[r,s]=i.useState(Math.floor((null==e?void 0:e.get("row_range")[0])/n)+1),[d,f]=i.useState(1),[m,p]=i.useState(!1),[h,g]=c.useModelState("cache");return i.default.createElement(o.Group,{align:"center"},i.default.createElement(o.Tooltip,{label:"Conditional Formatting",withArrow:!0},i.default.createElement(o.ActionIcon,{variant:"transparent",onClick:()=>{const e=JSON.parse(h);g(JSON.stringify(Object.assign(Object.assign({},e),{activatedFormatting:!e.activatedFormatting})))}},i.default.createElement(u.IconFilters,{size:16}))),i.default.createElement(o.Group,{sx:{gap:0}},i.default.createElement(o.Select,{sx:{width:"40px",height:"22px",".mantine-Select-item":{padding:"0px"},".mantine-Select-rightSection":{width:"20px"},".mantine-Select-input":{paddingLeft:"1px",paddingRight:"0px",height:"22px",minHeight:"22px",color:"#8d8d8d"}},placeholder:n,data:["10","30","50","100"],onChange:t=>{const a=t;s(1),l(a),null==e||e.trigger("setRange",[0*a,1*a])}}),i.default.createElement(o.Text,{color:"#8d8d8d"},"/page")),t?i.default.createElement(o.Pagination,{size:"xs",page:r,total:Math.ceil(a/n),onChange:t=>{s(t),null==e||e.trigger("setRange",[(t-1)*n,t*n])},styles:e=>({item:{color:e.colors.gray[4],backgroundColor:e.colors.gray[0],"&[data-active]":{color:e.colors.dark[2],backgroundColor:e.colors.gray[4]}}})}):i.default.createElement(i.default.Fragment,null),i.default.createElement(o.Group,{sx:{gap:0}},i.default.createElement(o.Text,{color:"#8d8d8d"},"goto"),i.default.createElement(o.NumberInput,{defaultValue:18,size:"xs",hideControls:!0,error:m,value:r,onBlur:()=>{d>0&&d<=Math.ceil(a/n)?(s(d),p(!1),null==e||e.trigger("setRange",[(d-1)*n,d*n])):p(!0)},onKeyDown:t=>{["Escape","Enter"].indexOf(t.key)>-1&&(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),d>0&&d<=Math.ceil(a/n)?(s(d),p(!1),null==e||e.trigger("setRange",[(d-1)*n,d*n])):p(!0))},onChange:e=>{f(e),e>0&&e<=Math.ceil(a/n)?p(!1):p(!0)},sx:{width:"40px",".mantine-NumberInput-input":{paddingLeft:"5px",paddingRight:"0px",height:"22px",minHeight:"22px"}}})))}},2253:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OrderIcons=void 0;const l=n(a(6271)),r=a(9583),i=a(1873);t.OrderIcons={[i.Order.Increasing]:l.default.createElement(r.FaSortUp,{color:"gray",size:10}),[i.Order.Descending]:l.default.createElement(r.FaSortDown,{color:"gray",size:10}),[i.Order.None]:l.default.createElement(r.FaSort,{color:"lightgray",size:10})}},6547:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TableElement=t.NumericElement=t.TextElement=t.InitialTextElement=void 0;const i=a(8952),o=a(8027),u=a(2752),c=r(a(6271)),s=a(7295);t.InitialTextElement=({item:e})=>c.default.createElement(i.Text,{fz:"xs",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e),t.TextElement=c.memo(t.InitialTextElement),t.NumericElement=({item:e,color:t,activated:a})=>{const n=c.useRef(),{ref:l,entry:r}=o.useIntersection({root:n.current,threshold:1});return c.default.createElement(i.Box,{ref:l,w:"80%",bg:a&&(null==r?void 0:r.isIntersecting)?`rgb(${t}, ${t}, ${t})`:"transparent"},c.default.createElement(i.Text,{sx:{overflow:"hidden"},fz:"xs"},e))};const d=({item:e,hovered:t,close:a})=>c.default.createElement(i.Stack,{spacing:0,align:"center"},c.default.createElement(i.Group,{position:"right",w:"100%"},c.default.createElement(i.CopyButton,{value:e.toString()},(({copied:e,copy:a})=>c.default.createElement(i.UnstyledButton,{onClick:a,style:{display:t?"block":"none"}},e?c.default.createElement(i.Tooltip,{label:"Copied",position:"bottom"},c.default.createElement(u.IconCheck,{color:"blue",size:20,stroke:1.5})):c.default.createElement(u.IconCopy,{color:"teal",size:20,stroke:1.5}))))),c.default.createElement(i.Textarea,{autosize:!0,minRows:5,maxRows:15,readOnly:!0,value:e,w:"100%",mb:"xl",sx:{".mantine-Textarea-input":{paddingTop:0,paddingBottom:0}}}),c.default.createElement(i.Button,{w:"50%",onClick:a},"Close")),f=({hovered:e,item:t})=>{const[a,{open:n,close:l}]=o.useDisclosure(!1);return c.default.createElement(i.Box,{w:12,h:12,style:{justifyContent:"center"}},c.default.createElement(i.Modal,{opened:a,onClose:l,title:"Detail",centered:!0},c.default.createElement(d,{hovered:e,item:t,close:l})),c.default.createElement(i.Menu,{offset:-1,zIndex:1,styles:{item:{height:"1rem",fontSize:"10px",padding:"0.2rem"},dropdown:{padding:0}}},c.default.createElement(i.Menu.Target,null,c.default.createElement(i.ActionIcon,{size:"xs",style:{display:e?"flex":"none"}},c.default.createElement(u.IconDots,{size:12,stroke:1.5}))),c.default.createElement(i.Menu.Dropdown,null,c.default.createElement(i.Menu.Item,{icon:c.default.createElement(u.IconArrowsMaximize,{size:12,stroke:1.5}),onClick:n},"Detail"),c.default.createElement(i.Menu.Item,{icon:c.default.createElement(u.IconCopy,{size:12,stroke:1.5}),onClick:()=>{navigator.clipboard.writeText(t.toString())}},"Copy"))))};t.TableElement=({item:e,index:a,tdIndex:n})=>{var l;const[r]=s.useModelState("column_color"),u=null===(l=JSON.parse(r))||void 0===l?void 0:l.data,[d]=s.useModelState("cache"),m=c.useMemo((()=>JSON.parse(d).activatedFormatting),[d]),{hovered:p,ref:h}=o.useHover(),g="string"==typeof e&&e.length>0||"number"==typeof e?c.default.createElement(f,{hovered:p,item:e}):c.default.createElement(c.default.Fragment,null);return c.default.createElement(i.Group,{ref:h,spacing:0,noWrap:!0,position:"apart",w:"100%",align:"start"},(()=>{switch(typeof e){case"string":return c.default.createElement(t.TextElement,{item:e});case"number":case"bigint":return c.default.createElement(t.NumericElement,{item:e,color:(null==u?void 0:u.at(a))?null==u?void 0:u.at(a).at(n):255,activated:m});case"boolean":return c.default.createElement(i.Text,{sx:{overflow:"hidden"},fz:"xs"},e?"True":"False");default:return c.default.createElement(c.default.Fragment,null)}})(),g)}},4678:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.DataframeHeader=void 0;const i=a(8952),o=a(2752),u=r(a(6271)),c=a(5102),s=a(1873),d=a(7295),f=a(2253),m=a(8027),p=a(471),h=a(5370),g="#909296",b=({headerContent:e,item:t,dataLength:a})=>{const[n,l]=u.useState(void 0);return u.default.createElement(i.Stack,{spacing:0},e.bins.map(((e,r)=>u.default.createElement(i.Group,{key:r,noWrap:!0,position:"apart",onMouseEnter:()=>{l(t)},onMouseLeave:()=>l(void 0),sx:{gap:0,width:"10rem",marginBottom:"-2px"}},e.count>0?u.default.createElement(u.default.Fragment,null,u.default.createElement(i.Box,{sx:{maxWidth:"6rem"}},u.default.createElement(i.Text,{weight:600,fs:"italic",c:"#696969",truncate:!0,fz:"xs"},e.bin)),u.default.createElement(i.Text,{c:"blue",fz:"xs"},n?e.count:(e.count/a*100).toFixed(2)+"%")):u.default.createElement(u.default.Fragment,null)))))},v=({headerContent:e,item:t})=>{const[,a]=d.useModelState("quickview_var");return u.default.createElement(i.Group,{noWrap:!0,position:"center"},u.default.createElement(h.HistChart,{item:t,headerContent:e}),u.default.createElement(i.Popover,{onOpen:()=>{a([t,(new Date).toISOString()])}},u.default.createElement(i.Popover.Target,null,u.default.createElement(i.ActionIcon,{variant:"transparent",sx:{alignItems:"flex-end"}},u.default.createElement(o.IconChartLine,{size:12}))),u.default.createElement(i.Popover.Dropdown,{sx:{position:"fixed",top:"calc(50vh - 75px) !important",left:"calc(50vw - 240px) !important"}},u.default.createElement(c.QuickViewChart,null))))},E=({headerContent:e,item:t,dataLength:a,shownHeaderInfo:n})=>{const l=e.dtype.includes("int")||e.dtype.includes("float");return u.default.createElement(i.Group,{noWrap:!0,position:"center",spacing:0},u.default.createElement(i.Collapse,{in:null!=n&&n},l?u.default.createElement(v,{headerContent:e,item:t,dataLength:a}):u.default.createElement(b,{headerContent:e,item:t,dataLength:a})))},_=({headerContent:e,item:t,index:a})=>{var n,l,r,o;const[c,p]=d.useModelState("column_sort"),[h]=d.useModelState("cache"),[b,v]=u.useState("100%"),[E,{close:_,open:y}]=m.useDisclosure(!1),x=m.useClipboard({timeout:1e3});return u.useEffect((()=>{var e,a;const n=JSON.parse(h),l=null!==(a=null===(e=null==n?void 0:n.HeaderWidth)||void 0===e?void 0:e[t])&&void 0!==a?a:"100%";v(l)}),[h,t]),u.default.createElement(i.Group,{w:b,noWrap:!0,position:"center",id:`header_${a}`,spacing:0},u.default.createElement(i.Popover,{opened:E,offset:0,styles:{dropdown:{padding:"0.2rem",fontSize:12,fontWeight:500}}},u.default.createElement(i.Popover.Target,null,u.default.createElement(i.Button,{w:"calc(100% - 5.5rem)",variant:"subtle",p:0,onMouseEnter:y,onMouseLeave:_,onClick:()=>{x.copy(t)},sx:{":hover":{backgroundColor:"transparent"}}},u.default.createElement(i.Text,{truncate:!0,fw:700},t))),u.default.createElement(i.Popover.Dropdown,null,u.default.createElement(i.Text,{truncate:!0,fw:700},t),x.copied?u.default.createElement(i.Text,{c:"green"},"Copied"):u.default.createElement(i.Text,null,"Click to copy"))),u.default.createElement(i.Tooltip,{label:"Click to sort",sx:{backgroundColor:"white",color:"#323232",fontWeight:500,fontSize:12}},u.default.createElement(i.Button,{color:"dark",sx:{height:"27px",width:"6rem","&.mantine-UnstyledButton-root":{color:"#373A40",":hover":{backgroundColor:"transparent"},":disabled":{color:g,backgroundColor:"transparent"}}},variant:"subtle",onClick:()=>{if((null==c?void 0:c[0])===t)switch(c[1]){case s.Order.Increasing:p([t,s.Order.Descending]);break;case s.Order.Descending:p([t,s.Order.None]);break;default:p([t,s.Order.Increasing])}else p([t,s.Order.Increasing])}},u.default.createElement(u.default.Fragment,null,e&&e.filter((e=>e.columnName===t)).length>0?u.default.createElement(i.Text,{size:"xs",fs:"italic",sx:{color:g}},null!==(r=null===(l=null===(n=e.filter((e=>e.columnName===t)))||void 0===n?void 0:n[0])||void 0===l?void 0:l.dtype)&&void 0!==r?r:""):u.default.createElement(u.default.Fragment,null),(null==c?void 0:c[0])===t?f.OrderIcons[null!==(o=c[1])&&void 0!==o?o:s.Order.None]:f.OrderIcons[s.Order.None]))))};t.DataframeHeader=({headerContent:e,header:t,dataLength:a})=>{const[n,l]=u.useState({iniMouse:0,iniSize:0}),[r,o]=d.useModelState("cache"),[c,s]=u.useState(!1),f=i.createStyles((e=>({div:{cursor:"col-resize",height:"100%",position:"absolute",right:"-4px",top:0,width:"4px",zIndex:1,"&:hover":{backgroundColor:"#ebebeb"}}}))),{classes:m}=f();return u.useEffect((()=>{var e;const t=JSON.parse(r),a=null!==(e=null==t?void 0:t.shownHeaderInfo)&&void 0!==e&&e;s(a)}),[r]),u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,u.default.createElement(i.ActionIcon,{onClick:()=>{const e=JSON.parse(r);e.shownHeaderInfo=!c,o(JSON.stringify(e))}},c?u.default.createElement(p.CgArrowsMergeAltV,null):u.default.createElement(p.CgArrowAlignV,null))),t?t.map(((t,s)=>{const d=e.find((e=>e.columnName===t));return u.default.createElement("th",{key:s,style:{padding:0,verticalAlign:"baseline",position:"relative"}},u.default.createElement(i.Box,{sx:{display:"flex",justifyContent:"center",minWidth:"7rem"}},u.default.createElement(i.Stack,{sx:{gap:0}},u.default.createElement(_,{headerContent:e,item:t,index:s}),u.default.createElement(E,{shownHeaderInfo:c,headerContent:d,item:t,dataLength:a}))),u.default.createElement("div",{className:m.div,draggable:!0,onDragStart:e=>((e,t)=>{var a,r;let i=e.clientX,o=null!==(r=null===(a=document.getElementById(`header_${t}`))||void 0===a?void 0:a.offsetWidth)&&void 0!==r?r:n.iniSize;l({iniMouse:i,iniSize:o})})(e,s),onDrag:e=>((e,t)=>{if(e.clientX){let a=n.iniMouse,l=n.iniSize+(e.clientX-a);l>160&&(document.getElementById(`header_${t}`).style.width=`${l}px`)}})(e,s),onDragEnd:()=>{var e,a,n;const l=JSON.parse(r);l.headerWidth=Object.assign(Object.assign({},l.headerWidth),{[t]:null!==(n=null===(a=null===(e=document.getElementById(`header_${s}`))||void 0===e?void 0:e.style)||void 0===a?void 0:a.width)&&void 0!==n?n:"100%"}),o(JSON.stringify(l))}}))})):u.default.createElement(u.default.Fragment,null)))}},2279:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),l(a(4678),t),l(a(8896),t)},8896:function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataTable=void 0;const l=a(2565),r=a(8952),i=n(a(6271)),o=a(7295),u=a(6547),c=a(4678),s=a(1422);t.DataTable=()=>{const[e]=o.useModelState("data_grid"),[t]=o.useModelState("title_hist"),[a]=o.useModelState("exec_time"),n=JSON.parse(e.split("\n")[0]),d=e.split("\n")[1]||0,f=n.columns,m=t?JSON.parse(t):[{columnName:"",dtype:"",bins:[{bin_start:0,bin_end:0,count:0}]}],p=[...Array(n.index.length).keys()].map((e=>{var t,a,o;return i.default.createElement("tr",{key:l.uuid()},i.default.createElement("td",{key:e},i.default.createElement(r.Text,null,null!==(a=null===(t=null==n?void 0:n.index)||void 0===t?void 0:t.at(e))&&void 0!==a?a:"")),(null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.at(e))?n.data.at(e).map(((t,a)=>i.default.createElement("td",{key:a,style:{fontSize:"8px"}},t?i.default.createElement(u.TableElement,{item:t,index:e,tdIndex:a}):i.default.createElement(i.default.Fragment,null)))):i.default.createElement(i.default.Fragment,null))}));return i.default.createElement(r.Stack,{spacing:10},i.default.createElement(r.ScrollArea,{scrollbarSize:8},i.default.createElement(r.Table,{withBorder:!0,withColumnBorders:!0,striped:!0,sx:{width:"100%","& thead":{height:"fit-content"},"& td":{maxWidth:"200px"},"& tbody tr td":{padding:"0px 3px"},"& thead tr th:first-of-type":{padding:0,width:"fit-content"},"&  td:first-of-type":{backgroundColor:"#ebebeb"},"&  tr:first-of-type":{backgroundColor:"#ebebeb"},"&  tr:nth-of-type(even)":{backgroundColor:"#f2f2f2"}}},i.default.createElement(c.DataframeHeader,{headerContent:m,header:f,dataLength:d}),i.default.createElement("tbody",null,p))),i.default.createElement(r.Group,{noWrap:!0,position:"apart",sx:{width:"100%"}},i.default.createElement(r.Group,null,i.default.createElement(r.Text,{color:"#8d8d8d"},d," rows"),a>0?i.default.createElement(r.Text,{color:"#8d8d8d"},a.toFixed(4)," s"):i.default.createElement(i.default.Fragment,null)),i.default.createElement(s.TablePagination,null)))}},8657:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0;const n=a(4147);t.MODULE_VERSION=n.version,t.MODULE_NAME=n.name},553:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=a(8952),o=a(2752),u=r(a(6271)),c=a(5102),s=a(7295),d=a(2279);var f;t.default=(f=()=>{var e;const t=s.useModel(),[a,n]=u.useState(null==t?void 0:t.get("data_grid")),[l,r]=s.useModelState("cache"),f=JSON.parse(""===l?"{ }":l),[m,p]=u.useState(null!==(e=f.tabValue)&&void 0!==e?e:"table");return null==t||t.on("change:data_grid",(()=>{n(null==t?void 0:t.get("data_grid"))})),null==t||t.on("setRange",(e=>{null==t||t.set("row_range",e,""),null==t||t.save_changes()})),a?u.default.createElement(i.Tabs,{defaultValue:"table",value:m,sx:{width:"100%"},onTabChange:e=>{f.tabValue=e,r(JSON.stringify(f)),p(e)}},u.default.createElement(i.Tabs.List,null,u.default.createElement(i.Tabs.Tab,{value:"table",icon:u.default.createElement(o.IconTable,{size:"0.8rem"})},"Table"),u.default.createElement(i.Tabs.Tab,{value:"chart",icon:u.default.createElement(o.IconChartBar,{size:"0.8rem"})},"Chart")),u.default.createElement(i.Tabs.Panel,{value:"table"},u.default.createElement(d.DataTable,null)),u.default.createElement(i.Tabs.Panel,{value:"chart"},u.default.createElement(c.Chart,null))):u.default.createElement(i.Box,{sx:{height:"60px"}})},e=>u.default.createElement(s.WidgetModelContext.Provider,{value:e.model},u.default.createElement(f,Object.assign({},e))))},3889:(e,t,a)=>{(t=a(3645)(!1)).push([e.id,".custom-widget {\n  padding: 0px 2px;\n}\n",""]),e.exports=t},7204:(e,t,a)=>{var n=a(3379),l=a(3889);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.id,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"asqlcell","version":"0.1.0","description":"Analytical sql cell for Jupyter","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/datarho/asqlcell","bugs":{"url":"https://github.com/datarho/asqlcell/issues"},"license":"BSD-3-Clause","author":{"name":"qizh","email":"qizh@datarho.tech"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/datarho/asqlcell"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf asqlcell/labextension","clean:nbextension":"rimraf asqlcell/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@emotion/react":"^11.10.5","@emotion/serialize":"^1.1.1","@emotion/utils":"^1.2.0","@jupyter-widgets/base":"^1.1.10 || ^2.0.0 || ^3.0.0 || ^4.0.0","@mantine/core":"^5.10.0","@mantine/hooks":"^5.10.0","@tabler/icons-react":"^2.14.0","react":"^18.2.0","react-dom":"^18.2.0","react-icons":"^4.7.1","react-vega":"^7.6.0","vega":"^5.27.0","vega-embed":"^6.24.0","vega-lite":"^5.16.3"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@babel/preset-react":"^7.14.5","@babel/preset-typescript":"^7.14.5","@jupyterlab/builder":"^3.0.0","@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/react":"^17.0.2","@types/react-dom":"^17.0.2","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","babel-loader":"^8.2.2","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-plugin-react":"^7.31.11","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","jest-canvas-mock":"^2.4.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.61.0","webpack-cli":"^4.0.0","react-vega":"^7.6.0"},"babel":{"presets":["@babel/preset-env","@babel/preset-react","@babel/preset-typescript"]},"jupyterlab":{"extension":"lib/plugin","outputDir":"asqlcell/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);