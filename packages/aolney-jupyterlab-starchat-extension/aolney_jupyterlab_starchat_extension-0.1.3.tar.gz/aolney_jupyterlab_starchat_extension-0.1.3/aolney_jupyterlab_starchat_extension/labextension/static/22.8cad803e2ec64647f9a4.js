"use strict";(self.webpackChunk_aolney_jupyterlab_starchat_extension=self.webpackChunk_aolney_jupyterlab_starchat_extension||[]).push([[22],{22:(e,t,n)=>{n.r(t),n.d(t,{appendToHistory:()=>p,createWidget:()=>_,default:()=>f,enableUserInput:()=>b,sendUserInput:()=>v});var s=n(605),a=n(381),o=n(256);function r(e,t){return{schema:"scle060623",user_message:e,bot_response:t}}let i,c,l;function d(e){if(i){let t=window.location.href;c&&(t=c),window.fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,json:btoa(e)})}).then((e=>{e.ok||console.log(e.statusText)}))}}var g=n(650);const u=n.n(g)()(),m=document.createElement("div");m.className="container-div-starchat",m.innerHTML='<section class="msger">\n  <main id = "history_div" class="msger-chat">\n    <div class="msg left-msg">\n      <div class="msg-bubble">\n        <div class="msg-info">\n          <div class="msg-info-name">StarChat</div>\n        </div>\n\n        <div class="msg-text">\n          Welcome! Go ahead and send me a message. ðŸ˜„\n        </div>\n      </div>\n    </div>\n  </main>\n\n  <div class="msger-inputarea">\n    <textarea id = "user_input_starchat" rows="4" class="msger-input" placeholder="Enter your message..."></textarea>\n    <button id = "send_button_starchat" type="submit" class="msger-send-btn" onclick="sendUserInput_StarChat()">Send</button>\n  </div>\n</section>';const h={UserMessage:["You","right"],BotMessage:["StarChat","left"],ErrorMessage:["ERROR","left"]};function p(e,t){let[n,s]=h[t],a='<div class="msg #SIDE-msg">\n            <div class="msg-bubble">\n            <div class="msg-info">\n                <div class="msg-info-name">#NAME</div>\n            </div>\n            <div class="msg-text">#TEXT</div>\n            </div>\n        </div>'.replace("#NAME",n).replace("#SIDE",s).replace("#TEXT",e),o=document.getElementsByClassName("msger-chat")[0];o.insertAdjacentHTML("beforeend",a),o.scrollTop=o.scrollTop+500}function b(e){e.disabled=!1,e.className="msger-send-btn",e.innerText="Send"}function v(){var e,t;let n=null!==(t=null===(e=document.getElementById("user_input_starchat"))||void 0===e?void 0:e.value)&&void 0!==t?t:"";p(n,"UserMessage");let s=document.getElementById("send_button_starchat");var a;s.disabled=!0,s.className="msger-wait-btn",s.innerText="Wait",(a=n,l||"saturn.olney.ai"!=window.location.hostname?l||(l="UNDEFINED"):l="https://starchat.olney.ai/api/getBotResponse",window.fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_message:a})}).then((e=>{if(e.ok)return e.json();throw new Error("Failed to use StarChat service. Specific error is "+e.status)})).catch((e=>console.log("Error in call to StarChat service. Specific error is "+e)))).then((e=>{let t=e.bot_response;d(r(n,t)),p(u.render(t.replace("<|end|>","")),"BotMessage"),b(s)})).catch((e=>{d(r(n,"SERVER_ERROR: "+e)),p("An error occurred when contacting StarChat. See your browser console for more information.","ErrorMessage"),console.log(e),b(s)}))}function _(){const e=new o.Widget;e.addClass("starchat");const t=new a.MainAreaWidget({content:e});return t.id="jupyterlab_starchat_extension",t.title.label="StarChat Coding Assistant",t.title.closable=!0,e.node.appendChild(m),t}(window||n.g).sendUserInput_StarChat=v;const f={id:"@aolney/jupyterlab-starchat-extension:plugin",description:"A JupyterLab extension providing an interface to StarChat.",autoStart:!0,requires:[a.ICommandPalette,s.INotebookTracker],activate:(e,t)=>{console.log("JupyterLab extension @aolney/jupyterlab-starchat-extension is activated!");let n=_(),s="jupyterlab_starchat_extension:open";e.commands.addCommand(s,{label:"StarChat",execute:()=>{n.isAttached||e.shell.add(n,"main"),e.shell.activateById(n.id)}}),t.addItem({command:s,category:"Coding Assistants"});const a=new URLSearchParams(window.location.search);let o=a.get("id");o&&(function(e){c=e}(o),console.log("jupyterlab_starchat_extension: using id="+o+" for logging"));let r=a.get("log");r&&(i=r,console.log("jupyterlab_starchat_extension: using log="+r+" for logging"));let d=a.get("endpoint");d&&(l=d,console.log("jupyterlab_starchat_extension: using endpoint="+d+" for StarChat service"))}}}}]);