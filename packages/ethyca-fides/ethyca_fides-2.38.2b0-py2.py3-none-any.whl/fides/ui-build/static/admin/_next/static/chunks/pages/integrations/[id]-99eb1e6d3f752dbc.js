(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1500],{28171:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(90849),i=n(90089),o=n(28841),a=n(98784),s=n(27378),c=n(79894),l=n.n(c),u=n(24246),d=function(e){var t=e.breadcrumbs;return(0,u.jsx)(o.aGc,{separator:"->",fontSize:"2xl",fontWeight:"semibold","data-testid":"breadcrumbs",children:t.map((function(e,n){var r=n+1===t.length,i=!!e.link||!!e.onClick;return(0,u.jsx)(o.gN6,{color:r||e.isOpaque?"black":"gray.500",children:i?(0,u.jsx)(o.Atw,{as:l(),href:e.link,isCurrentPage:r,children:e.title}):(0,u.jsx)(o.Atw,{_hover:{textDecoration:"none",cursor:"default"},isCurrentPage:r,children:e.title})},e.title)}))})},f=["breadcrumbs","isSticky","children"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){var t=e.breadcrumbs,n=e.isSticky,r=void 0===n||n,c=e.children,l=(0,i.Z)(e,f);return(0,u.jsxs)(o.xuv,g(g(g({bgColor:"white",paddingY:5},r?{position:"sticky",top:0,left:0,zIndex:10}:{}),l),{},{children:[(0,a.isArray)(t)&&(0,u.jsx)(o.xuv,{marginBottom:c?4:0,children:(0,u.jsx)(d,{breadcrumbs:t})}),(0,s.isValidElement)(t)&&t,c]}))}},53333:function(e,t,n){"use strict";n.d(t,{I_:function(){return u},QZ:function(){return d},wH:function(){return p}});var r=n(90849),i=n(31099),o=n(73679),a=n(28841),s=n(24246);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=5,d=function(e){var t=e.items,n=e.selected,r=e.onChange,i=t.every((function(e){return n.includes(e.id)}))&&!!t.length,a=t.some((function(e){return n.includes(e.id)}))&&!!t.length;return{allSelected:i,someSelected:a,handleToggleAll:function(){r(i?[]:t.map((function(e){return e.id})))},handleToggleSelection:function(e){n.includes(e)?r(n.filter((function(t){return t!==e}))):r([].concat((0,o.Z)(n),[e]))}}},f=function(e){var t=e.title,n=e.children;return(0,s.jsx)(a.xuv,{p:4,display:"flex",alignItems:"flex-start",gap:"4px",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.06), 0px 1px 3px 0px rgba(0, 0, 0, 0.1)",fontSize:"sm","data-testid":"picker-card-".concat(t),children:n})},p=function(e){var t=e.title,n=e.items,r=e.selected,i=e.indeterminate,o=e.onChange,c=e.toggle,l=e.onViewMore,f=e.numSelected,p=e.variant,g=void 0===p?"default":p,x=l?n.slice(0,u):n,m=d({items:n,selected:r,onChange:o}),j=m.allSelected,h=m.someSelected,b=m.handleToggleAll,v=m.handleToggleSelection;return(0,s.jsxs)(a.gCW,{alignItems:"flex-start",spacing:3,width:"100%",height:"100%",children:[(0,s.jsxs)(a.kCb,{justifyContent:"space-between",width:"100%",children:[(0,s.jsx)(a.XZJ,{fontSize:"md",textTransform:"emphasize"===g?"capitalize":void 0,fontWeight:"emphasize"===g?"semibold":"auto",isChecked:j,size:"md",mr:"2",onChange:b,colorScheme:"complimentary","data-testid":"select-all",isIndeterminate:!j&&h,children:t}),null!==c&&void 0!==c?c:null]}),f>0?(0,s.jsxs)(a.Cts,{colorScheme:"purple",variant:"solid",width:"fit-content","data-testid":"num-selected-badge",children:[f," selected"]}):null,(0,s.jsx)(a.gCW,{paddingLeft:"6",fontSize:"sm",alignItems:"start",spacing:"2",children:(0,s.jsx)(a.cOn,{colorScheme:"complimentary",children:x.map((function(e){return(0,s.jsx)(a.kCb,{alignItems:"center",gap:"8px",children:(0,s.jsx)(a.XZJ,{isChecked:r.includes(e.id),isIndeterminate:i.includes(e.id),size:"md",fontWeight:"emphasize"===g?"500":"auto",onChange:function(){return v(e.id)},"data-testid":"".concat(e.name,"-checkbox"),children:e.name},e.id)},e.id)}))})}),l?(0,s.jsx)(a.zxk,{size:"xs",variant:"ghost",onClick:l,"data-testid":"view-more-btn",children:"View more"}):null]})};t.ZP=function(e){var t=(0,i.Z)({},e);return(0,s.jsx)(f,{title:t.title,children:(0,s.jsx)(p,l(l({},t),{},{variant:"emphasize"}))})}},24e3:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var r=n(28841),i=n(86677),o=n(44204),a=n(51471),s=n(60709),c=n(28171),l=n(31669),u=n(90655),d=n(25649),f=n(90849),p=n(92222),g=n(59003),x=n(27378),m=n(24246),j=(0,r.IUT)({displayName:"MonitorIcon",viewBox:"0 0 12 12",path:(0,m.jsx)("path",{d:"M1.33333 2.21875C1.15 2.21875 1 2.37344 1 2.5625V5.65625H3.66667C3.84167 5.65625 4.00417 5.75078 4.09583 5.90762L4.62708 6.8207L5.88542 4.22324C5.96667 4.05566 6.13125 3.94609 6.3125 3.93965C6.49375 3.9332 6.66667 4.02773 6.76042 4.18887L7.61458 5.65625H8.83333C9.11042 5.65625 9.33333 5.88613 9.33333 6.17188C9.33333 6.45762 9.11042 6.6875 8.83333 6.6875H7.33333C7.15833 6.6875 6.99583 6.59297 6.90417 6.43613L6.37292 5.52305L5.11458 8.12051C5.03333 8.28809 4.86875 8.39766 4.6875 8.4041C4.50625 8.41055 4.33333 8.31602 4.23958 8.15488L3.38542 6.6875H1V9.4375C1 9.62656 1.15 9.78125 1.33333 9.78125H10.6667C10.85 9.78125 11 9.62656 11 9.4375V2.5625C11 2.37344 10.85 2.21875 10.6667 2.21875H1.33333ZM0 2.5625C0 1.8041 0.597917 1.1875 1.33333 1.1875H10.6667C11.4021 1.1875 12 1.8041 12 2.5625V9.4375C12 10.1959 11.4021 10.8125 10.6667 10.8125H1.33333C0.597917 10.8125 0 10.1959 0 9.4375V2.5625Z",fill:"currentColor"})}),h=n(55162),b=n(37522),v=n(30646),y=n(55732),O=n(97865),C=n(34707),P=n.n(C),w=n(78624),k=function(e){var t=e.defaultSuccessMsg,n=e.defaultErrorMsg,i=(0,r.pmc)();return{toastResult:function(e){if((0,w.D4)(e)){var r=(0,w.e$)(e.error,n);i({status:"error",description:r})}else i({status:"success",description:t})}}},S=n(53333),_=n(33167);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z={items:[],total:0,page:1,size:50,pages:0},E=function(e){var t,n=e.monitor,i=e.onClose,o=k({defaultSuccessMsg:"Monitor updated successfully",defaultErrorMsg:"A problem occurred while updating this monitor"}).toastResult,a=(0,h.oi)(),s=a.PAGE_SIZES,c=a.pageSize,l=a.setPageSize,u=a.onPreviousPageClick,d=a.isPreviousPageDisabled,f=a.onNextPageClick,p=a.isNextPageDisabled,g=a.startRange,j=a.endRange,v=a.pageIndex,C=a.setTotalPages,w=(0,b.IN)({page:v,size:c,monitor_config_id:n.key}),z=w.data,E=w.isLoading,R=w.isFetching,A=null!==z&&void 0!==z?z:Z,N=A.items,q=A.total,I=A.pages;(0,x.useEffect)((function(){C(I)}),[I,C]);var M=(0,b.Fy)(),L=(0,O.Z)(M,1)[0],T=(0,x.useState)(null!==(t=n.databases)&&void 0!==t?t:[]),V=T[0],W=T[1],H=function(){var e=(0,y.Z)(P().mark((function e(){var t,r;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=D(D({},n),{},{databases:V}),e.next=3,L(t);case 3:r=e.sent,o(r),(0,_.isErrorResult)(r)||i();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return E?(0,m.jsx)(r.kCb,{align:"center",justify:"center",children:(0,m.jsx)(r.$jN,{})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.kCb,{p:4,children:(0,m.jsx)(S.wH,{title:"Select all projects",items:N.map((function(e){return{id:e,name:e}})),selected:V,onChange:W,numSelected:V.length,indeterminate:[]})}),(0,m.jsx)(h.s8,{totalRows:q,pageSizes:s,setPageSize:l,onPreviousPageClick:u,isPreviousPageDisabled:d||R,onNextPageClick:f,isNextPageDisabled:p||R,startRange:g,endRange:j}),(0,m.jsxs)(r.hE2,{size:"sm",w:"full",justifyContent:"space-between",mt:4,children:[(0,m.jsx)(r.zxk,{onClick:i,variant:"outline",children:"Cancel"}),(0,m.jsx)(r.zxk,{onClick:H,variant:"primary","data-testid":"save-btn",children:"Save"})]})]})},R=n(49262),A=n(34090),N=n(14633),q=n(43139),I=n(45886);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t,n=e.monitor,o=e.onClose,a=e.onAdvance,s=!!n,c=(0,i.useRouter)().query,l=Array.isArray(c.id)?c.id[0]:c.id,u=N.Ry().shape({name:N.Z_().required().label("Name"),execution_start_date:N.hT().required().label("Execution start date"),execution_frequency:N.Z_().required().label("Execution frequency")}),d=(0,b.Fy)(),f=(0,O.Z)(d,2),p=f[0],g=f[1].isLoading,x=k({defaultSuccessMsg:"Monitor ".concat(s?"updated":"created"," successfully"),defaultErrorMsg:"A problem occurred while ".concat(s?"updating":"creating"," this monitor")}).toastResult,j=function(){var e=(0,y.Z)(P().mark((function e(t){var r,i,o;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date(t.execution_start_date),i=s?L(L({},n),{},{name:t.name,execution_start_date:t.execution_start_date,execution_frequency:t.execution_frequency}):{name:t.name,connection_config_key:l,execution_frequency:t.execution_frequency,execution_start_date:r.toISOString(),classify_params:{num_samples:25,num_threads:1}},e.next=4,p(i);case 4:o=e.sent,x(o),(0,w.D4)(o)||a(o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={name:null!==(t=null===n||void 0===n?void 0:n.name)&&void 0!==t?t:"",execution_start_date:(0,R.Z)(Date.now(),"yyyy-MM-dd'T'hh:mm"),execution_frequency:null===n||void 0===n?void 0:n.execution_frequency};return(0,m.jsx)(A.J9,{initialValues:h,enableReinitialize:!0,onSubmit:j,validationSchema:u,children:function(e){var t=e.values,i=e.dirty,s=e.isValid,c=e.resetForm;return(0,m.jsx)(A.l0,{children:(0,m.jsxs)(r.gCW,{alignItems:"start",spacing:6,mt:4,children:[(0,m.jsx)(q.j0,{name:"name",id:"name",label:"Name",isRequired:!0,variant:"stacked"}),(0,m.jsx)(q.YL,{name:"execution_start_date",label:"Automatic execution start time",id:"execution_start_date",isRequired:!0}),(0,m.jsx)(q.AP,{name:"execution_frequency",id:"execution_frequency",isRequired:!0,options:(0,w.MM)(I.hV),label:"Automatic execution frequency",variant:"stacked"}),(0,m.jsxs)(r.hE2,{size:"sm",w:"full",justifyContent:"space-between",children:[(0,m.jsx)(r.zxk,{variant:"outline",onClick:function(){c(),o()},children:"Cancel"}),(0,m.jsx)(r.zxk,{onClick:function(){return function(e,t){t?j(e):a(n)}(t,i)},variant:"primary",isDisabled:!s,isLoading:g,"data-testid":"next-btn",children:"Next"})]})]})})}})},V=function(e){var t=e.isOpen,n=e.onClose,i=e.formStep,o=e.onAdvance,a=e.monitor;return(0,m.jsxs)(v.Z,{title:null!==a&&void 0!==a&&a.name?"Configure ".concat(a.name):"Configure discovery monitor",isOpen:t,onClose:n,children:[0===i&&(0,m.jsx)(T,{monitor:a,onClose:n,onAdvance:o}),1===i&&(a?(0,m.jsx)(E,{monitor:a,onClose:n}):(0,m.jsx)(r.$jN,{}))]})},W=function(e){var t=e.onEditClick;return(0,m.jsx)(r.xuv,{children:(0,m.jsx)(r.hU,{onClick:t,icon:(0,m.jsx)(r.dY8,{}),variant:"outline",size:"xs","data-testid":"edit-monitor-btn","aria-label":"Edit monitor"})})};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y={items:[],total:0,page:1,size:50,pages:0},G=(0,p.Cl)(),$=function(e){var t=e.onAddClick;return(0,m.jsx)(r.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",children:(0,m.jsxs)(r.gCW,{children:[(0,m.jsx)(r.xvT,{fontSize:"md",fontWeight:"600",children:"No monitors"}),(0,m.jsx)(r.xvT,{fontSize:"sm",children:'You have not configured any data discovery monitors. Click "Add monitor" to configure data discovery now.'}),(0,m.jsx)(r.zxk,{onClick:t,colorScheme:"primary",children:"Add monitor"})]})})},X=function(e){var t=e.integration,n=(0,h.oi)(),i=n.PAGE_SIZES,o=n.pageSize,a=n.setPageSize,s=n.onPreviousPageClick,c=n.isPreviousPageDisabled,l=n.onNextPageClick,u=n.isNextPageDisabled,d=n.startRange,f=n.endRange,v=n.pageIndex,y=n.setTotalPages,O=(0,b.Fu)({page:v,size:o,connection_config_key:t.key}),C=O.isLoading,P=O.isFetching,w=O.data,k=(0,r.qY0)(),S=(0,x.useState)(void 0),_=S[0],z=S[1],D=(0,x.useState)(0),Z=D[0],E=D[1],R=function(e){z(e),k.onOpen()},A=null!==w&&void 0!==w?w:Y,N=(0,x.useMemo)((function(){return A}),[A]),q=N.items,I=N.total,M=N.pages;(0,x.useEffect)((function(){y(M)}),[M,y]);var L=(0,x.useMemo)((function(){return[G.accessor((function(e){return e.name}),{id:"name",cell:function(e){return(0,m.jsx)(h.G3,{value:e.getValue()})},header:function(e){return(0,m.jsx)(h.Rr,F({value:"Name"},e))}}),G.accessor((function(e){return e.databases}),{id:"projects",cell:function(e){return 0===e.getValue().length?(0,m.jsx)(h.G3,{value:"All projects"}):(0,m.jsx)(h.WP,F(F({suffix:"Projects",value:e.getValue()},e),{},{isDisplayAll:!0}))},header:function(e){return(0,m.jsx)(h.Rr,F({value:"Location"},e))}}),G.display({id:"action",cell:function(e){return(0,m.jsx)(W,{onEditClick:function(){return R(e.row.original)}})},header:"Actions",meta:{disableRowClick:!0},maxSize:50})]}),[]),T=(0,g.b7)({getCoreRowModel:(0,p.sC)(),getGroupedRowModel:(0,p.qe)(),getExpandedRowModel:(0,p.rV)(),getRowId:function(e){return e.name},manualPagination:!0,data:q,columns:L});return C?(0,m.jsx)(r.$jN,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.xvT,{maxW:"720px",mb:6,fontSize:"sm",children:"Data discovery monitors observe configured systems for data model changes to proactively discover and classify data risks. You can create multiple monitors to observe part or all of a project, dataset, table or API for changes and assign these to different data stewards."}),(0,m.jsxs)(h.Q$,{children:[(0,m.jsx)(r.LZC,{}),(0,m.jsx)(r.zxk,{onClick:k.onOpen,size:"xs",variant:"outline",rightIcon:(0,m.jsx)(j,{}),"data-testid":"add-monitor-btn",children:"Add monitor"}),(0,m.jsx)(V,{isOpen:k.isOpen,onClose:function(){z(void 0),E(0),k.onClose()},formStep:Z,onAdvance:function(e){z(e),E(1)},monitor:_})]}),(0,m.jsx)(h.ZK,{tableInstance:T,onRowClick:R,emptyTableNotice:(0,m.jsx)($,{onAddClick:k.onOpen})}),(0,m.jsx)(h.s8,{totalRows:I,pageSizes:i,setPageSize:a,onPreviousPageClick:s,isPreviousPageDisabled:c||P,onNextPageClick:l,isNextPageDisabled:u||P,startRange:d,endRange:f})]})},J=n(32976),B=function(e){var t=e.isOpen,n=e.onClose,r=e.connection;return(0,m.jsx)(v.Z,{title:"Manage integration secret",isOpen:t,onClose:n,children:(0,m.jsx)(J.Z,{connection:r,onCancel:n})})},K=n(62025),Q=n(83115),U=function(){var e,t,n=(0,i.useRouter)().query,f=Array.isArray(n.id)?n.id[0]:n.id,p=(0,l.jA)(null!==f&&void 0!==f?f:""),g=p.data,x=p.isLoading,j=(0,u.Z)(g),h=j.testConnection,b=j.isLoading,v=j.testData,y=(0,r.qY0)(),O=y.onOpen,C=y.isOpen,P=y.onClose,w=[{label:"Connection",content:(0,m.jsxs)(r.xuv,{maxW:"720px",children:[(0,m.jsxs)(r.kCb,{borderRadius:"md",outline:"1px solid",outlineColor:"gray.100",align:"center",p:3,children:[(0,m.jsx)(r.kCb,{flexDirection:"column",children:(0,m.jsx)(K.Z,{testData:v})}),(0,m.jsx)(r.LZC,{}),(0,m.jsxs)(r.hE2,{size:"sm",variant:"outline",children:[(0,m.jsx)(r.zxk,{onClick:h,isLoading:b,"data-testid":"test-connection-btn",children:"Test connection"}),(0,m.jsx)(r.zxk,{onClick:O,"data-testid":"manage-btn",children:"Manage"})]})]}),(0,m.jsx)(B,{isOpen:C,onClose:P,connection:g}),(0,m.jsx)(d.Z,{}),(0,m.jsx)(d.u,{})]})},{label:"Data discovery",content:(0,m.jsx)(X,{integration:g})}];return(0,m.jsx)(a.Z,{title:"Integrations",children:(0,m.jsxs)(c.Z,{breadcrumbs:[{title:"Integrations",link:s.KH},{title:null!==(e=null!==(t=null===g||void 0===g?void 0:g.name)&&void 0!==t?t:null===g||void 0===g?void 0:g.key)&&void 0!==e?e:""}],children:[(0,m.jsx)(Q.Z,{integration:g}),x?(0,m.jsx)(r.$jN,{}):(0,m.jsx)(o.Z,{data:w,isLazy:!0})]})})}},50697:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integrations/[id]",function(){return n(24e3)}])}},function(e){e.O(0,[8033,2160,2142,9262,338,3139,5162,973,9774,2888,179],(function(){return t=50697,e(e.s=t);var t}));var t=e.O();_N_E=t}]);