(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5979],{6719:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(27378),i=r(25773),o=r(36924),s=r(38097),a=r(50189),c=r(70409),u=r(53782),l=r(53991),d=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=String(e).toLowerCase(),i=String(r.getOptionValue(t)).toLowerCase(),o=String(r.getOptionLabel(t)).toLowerCase();return i===n||o===n},p={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,r,n){return!(!e||t.some((function(t){return f(e,t,n)}))||r.some((function(t){return f(e,t,n)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};r(31542),r(92486);var v=(0,n.forwardRef)((function(e,t){var r=function(e){var t=e.allowCreateWhileLoading,r=void 0!==t&&t,i=e.createOptionPosition,s=void 0===i?"last":i,f=e.formatCreateLabel,v=void 0===f?p.formatCreateLabel:f,h=e.isValidNewOption,m=void 0===h?p.isValidNewOption:h,g=e.getNewOptionData,j=void 0===g?p.getNewOptionData:g,b=e.onCreateOption,y=e.options,x=void 0===y?[]:y,O=e.onChange,w=(0,u.Z)(e,d),_=w.getOptionValue,k=void 0===_?o.g:_,C=w.getOptionLabel,P=void 0===C?o.b:C,S=w.inputValue,D=w.isLoading,Z=w.isMulti,E=w.value,z=w.name,q=(0,n.useMemo)((function(){return m(S,(0,l.I)(E),x,{getOptionValue:k,getOptionLabel:P})?j(S,v(S)):void 0}),[v,j,P,k,S,m,x,E]),A=(0,n.useMemo)((function(){return!r&&D||!q?x:"first"===s?[q].concat((0,c.Z)(x)):[].concat((0,c.Z)(x),[q])}),[r,s,D,q,x]),L=(0,n.useCallback)((function(e,t){if("select-option"!==t.action)return O(e,t);var r=Array.isArray(e)?e:[e];if(r[r.length-1]!==q)O(e,t);else if(b)b(S);else{var n=j(S,S),i={action:"create-option",name:z,option:n};O((0,l.D)(Z,[].concat((0,c.Z)((0,l.I)(E)),[n]),n),i)}}),[j,S,Z,z,q,b,O,E]);return(0,a.Z)((0,a.Z)({},w),{},{options:A,onChange:L})}((0,s.u)(e));return n.createElement(o.S,(0,i.Z)({ref:t},r))})),h=r(32916);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}var g=(0,n.forwardRef)((function(e,t){var r=(0,h.Z)(e);return n.createElement(v,m({ref:t},r))}))},51471:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(90849),i=r(28841),o=r(88038),s=r.n(o),a=r(86677),c=(r(27378),r(90768)),u=r(51365),l=r(60709),d=r(24246),f=function(){var e=(0,a.useRouter)();return(0,d.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,d.jsxs)(i.xuv,{children:[(0,d.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,d.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,d.jsx)(i.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(l.fz)},children:"Configure"})]}),(0,d.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){var t=e.children,r=e.title,n=e.padded,o=void 0===n||n,l=e.mainProps,p=(0,c.hz)(),h=(0,a.useRouter)(),m="/privacy-requests"===h.pathname||"/datastore-connection"===h.pathname,g=!(p.flags.privacyRequestsConfiguration&&m),j=(0,u.JE)(void 0,{skip:g}).data,b=(0,u.PW)(void 0,{skip:g}).data,y=p.flags.privacyRequestsConfiguration&&(!j||!b)&&m;return(0,d.jsxs)(i.kCb,{"data-testid":r,direction:"column",h:"100vh",children:[(0,d.jsxs)(s(),{children:[(0,d.jsxs)("title",{children:["Fides Admin UI - ",r]}),(0,d.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsxs)(i.kCb,v(v({as:"main",direction:"column",py:o?6:0,px:o?10:0,h:o?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},l),{},{children:[y?(0,d.jsx)(f,{}):null,t]}))]})}},9408:function(e,t,r){"use strict";r.d(t,{HK:function(){return o},VY:function(){return n.V},O3:function(){return a}});var n=r(36653),i=r(78624),o=function(){var e=(0,n.V)().errorAlert;return{handleError:function(t){var r="An unexpected error occurred. Please try again.";(0,i.Ot)(t)?r=t.data.detail:(0,i.tB)(t)&&(r=t.data.detail[0].msg),e(r)}}},s=r(27378),a=function(e){var t=(0,s.useRef)(void 0);return(0,s.useEffect)((function(){var r=function(r){var n;null!==(n=t.current)&&void 0!==n&&n.contains(r.target)||e()};return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}}),[t,e]),{ref:t}}},36653:function(e,t,r){"use strict";r.d(t,{V:function(){return c}});var n=r(90849),i=r(28841),o=r(24246);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(){var e=(0,i.pmc)();return{errorAlert:function(t,r,n){var s=a(a({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,o.jsxs)(i.bZj,{alignItems:"normal",status:"error",children:[(0,o.jsx)(i.zMQ,{}),(0,o.jsxs)(i.xuv,{children:[r&&(0,o.jsx)(i.CdC,{children:r}),(0,o.jsx)(i.XaZ,{children:t})]}),(0,o.jsx)(i.PZ7,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,s):e(s)},successAlert:function(t,r,n){var s=a(a({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,o.jsxs)(i.bZj,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,o.jsx)(i.zMQ,{}),(0,o.jsxs)(i.xuv,{children:[r&&(0,o.jsx)(i.CdC,{children:r}),(0,o.jsx)(i.XaZ,{children:t})]}),(0,o.jsx)(i.PZ7,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,s):e(s)}}}},56069:function(e,t,r){"use strict";r.d(t,{R:function(){return p}});var n=r(90849),i=r(90089),o=r(28841),s=r(79894),a=r.n(s),c=r(24246),u=["backPath"],l=["onClick"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=e.onClick,r=(0,i.Z)(e,l);return(0,c.jsxs)(o.kCb,f(f({alignItems:"center",mt:-4,mb:3,onClick:t,cursor:"pointer"},r),{},{children:[(0,c.jsx)(o.hU,{"aria-label":"Back",icon:(0,c.jsx)(o.Rpv,{}),mr:2,size:"xs",variant:"outline"}),(0,c.jsx)(o.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})]}))};t.Z=function(e){var t=e.backPath,r=(0,i.Z)(e,u);return(0,c.jsxs)(o.kCb,f(f({alignItems:"center",mb:6},r),{},{children:[(0,c.jsx)(a(),{href:t,passHref:!0,children:(0,c.jsx)(o.hU,{"aria-label":"Back",icon:(0,c.jsx)(o.Rpv,{}),mr:2,size:"xs",variant:"outline"})}),(0,c.jsx)(a(),{href:t,passHref:!0,children:(0,c.jsx)(o.xvT,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},24330:function(e,t,r){"use strict";r.d(t,{DE:function(){return o},MP:function(){return n},qX:function(){return i}});var n=new Map([["Approved","approved"],["Canceled","canceled"],["Completed","complete"],["Denied","denied"],["Error","error"],["In Progress","in_processing"],["New","pending"],["Paused","paused"],["Unverified","identity_unverified"],["Requires input","requires_input"]]),i={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},o={local:"local",s3:"s3"}},70810:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(55732),i=r(97865),o=r(34707),s=r.n(o),a=r(28841),c=r(27378),u=r(78624),l=r(9408),d=r(51471),f=r(56069),p=r(60709),v=r(24330),h=r(51365),m=r(34090),g=r(43139),j=r(24246),b=function(e){var t,r,o,d,f,p=e.storageDetails,b=(0,c.useState)(""),y=b[0],x=b[1],O=(0,h.gC)(),w=(0,i.Z)(O,1)[0],_=(0,h.cf)(),k=(0,i.Z)(_,1)[0],C=(0,l.HK)().handleError,P=(0,l.VY)().successAlert,S={type:v.DE.s3,auth_method:null!==(t=null===p||void 0===p||null===(r=p.details)||void 0===r?void 0:r.auth_method)&&void 0!==t?t:"",bucket:null!==(o=null===p||void 0===p||null===(d=p.details)||void 0===d?void 0:d.bucket)&&void 0!==o?o:"",format:null!==(f=null===p||void 0===p?void 0:p.format)&&void 0!==f?f:""},D=function(){var e=(0,n.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({type:v.DE.s3,details:{auth_method:t.auth_method,bucket:t.bucket},format:t.format});case 2:r=e.sent,(0,u.D4)(r)?C(r.error):(x(t.auth_method),P("S3 storage credentials successfully updated."));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,n.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({details:{aws_access_key_id:t.aws_access_key_id,aws_secret_access_key:t.aws_secret_access_key},type:v.DE.s3});case 2:r=e.sent,(0,u.D4)(r)?C(r.error):P("S3 storage secrets successfully updated.");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(a.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"S3 storage configuration"}),(0,j.jsx)(a.Kqy,{children:(0,j.jsx)(m.J9,{initialValues:S,onSubmit:D,enableReinitialize:!0,children:function(e){var t=e.isSubmitting,r=e.handleReset;return(0,j.jsxs)(m.l0,{children:[(0,j.jsxs)(a.Kqy,{mt:5,spacing:5,children:[(0,j.jsx)(g.AP,{name:"format",label:"Format",options:[{label:"json",value:"json"},{label:"csv",value:"csv"}],"data-testid":"format",isRequired:!0}),(0,j.jsx)(g.AP,{name:"auth_method",label:"Auth method",options:[{label:"secret_keys",value:"secret_keys"},{label:"automatic",value:"automatic"}],"data-testid":"auth_method",isRequired:!0}),(0,j.jsx)(g.j0,{"data-testid":"bucket",name:"bucket",label:"Bucket",isRequired:!0})]}),(0,j.jsx)(a.zxk,{onClick:function(){return r()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,j.jsx)(a.zxk,{mt:5,isDisabled:t,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})}})}),"secret_keys"===y?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(a.izJ,{mt:5}),(0,j.jsx)(a.X6q,{fontSize:"md",fontWeight:"semibold",mt:5,children:"Storage destination"}),(0,j.jsx)(a.Kqy,{children:(0,j.jsx)(m.J9,{initialValues:{aws_access_key_id:"",aws_secret_access_key:""},onSubmit:Z,children:function(e){var t=e.isSubmitting,r=e.handleReset;return(0,j.jsxs)(m.l0,{children:[(0,j.jsxs)(a.Kqy,{mt:5,spacing:5,children:[(0,j.jsx)(g.j0,{name:"aws_access_key_id",label:"AWS access key ID"}),(0,j.jsx)(g.j0,{name:"aws_secret_access_key",label:"AWS secret access key",type:"password"})]}),(0,j.jsxs)(a.xuv,{mt:10,children:[(0,j.jsx)(a.zxk,{onClick:function(){return r()},mt:5,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,j.jsx)(a.zxk,{mt:5,isDisabled:t,type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",children:"Save"})]})]})}})})]}):null]})},y=function(){var e=(0,l.VY)().successAlert,t=(0,l.HK)().handleError,r=(0,c.useState)(""),o=r[0],m=r[1],g=(0,h.PW)().data,y=(0,h.Au)({type:o}).data,x=(0,h.gC)(),O=(0,i.Z)(x,2),w=O[0],_=O[1].isLoading,k=(0,h.L)(),C=(0,i.Z)(k,1)[0];(0,c.useEffect)((function(){g&&m(g.type)}),[g]);var P=function(){var r=(0,n.Z)(s().mark((function r(n){var i,o;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n!==v.DE.local){r.next=5;break}return r.next=3,w({type:n,details:{},format:"json"});case 3:i=r.sent,(0,u.D4)(i)?t(i.error):e("Configured storage details successfully.");case 5:return r.next=7,C({storage:{active_default_storage_type:n}});case 7:o=r.sent,(0,u.D4)(o)?t(o.error):m(n);case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return(0,j.jsxs)(d.Z,{title:"Configure Privacy Requests - Storage",children:[(0,j.jsx)(f.Z,{backPath:p.fz}),(0,j.jsx)(a.X6q,{mb:5,fontSize:"2xl",fontWeight:"semibold",children:"Configure storage"}),(0,j.jsxs)(a.xuv,{display:"flex",flexDirection:"column",width:"50%",children:[(0,j.jsx)(a.xuv,{mb:5,children:"Fides requires a storage destination to store and share the results of privacy requests. For a production setup, it is highly recommended to have S3 as a storage destination. Ensure you have completed the setup for the storage destination and have the details handy prior to the following steps."}),(0,j.jsxs)(a.xuv,{children:["To configure a Storage destination, first choose a method to store your results. Fides currently supports"," ",(0,j.jsx)(a.xvT,{as:"span",color:"complimentary.500",children:"Local"})," ","and"," ",(0,j.jsx)(a.xvT,{as:"span",color:"complimentary.500",children:"S3"})," ","storage methods."]}),(0,j.jsx)(a.X6q,{fontSize:"md",fontWeight:"semibold",mt:10,children:"Choose storage type to configure"}),(0,j.jsx)(a.FXm,{isDisabled:_,onChange:P,value:o,"data-testid":"privacy-requests-storage-selection",colorScheme:"secondary",p:3,children:(0,j.jsxs)(a.Kqy,{direction:"row",children:[(0,j.jsx)(a.Y8K,{value:"local","data-testid":"option-local",mr:5,children:"Local"},"local"),(0,j.jsx)(a.Y8K,{value:"s3","data-testid":"option-s3",children:"S3"},"s3")]})}),"s3"===o&&y?(0,j.jsx)(b,{storageDetails:y}):null]})]})},x=function(){return(0,j.jsx)(y,{})}},23663:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests/configure/storage",function(){return r(70810)}])},76649:function(e,t,r){"use strict";r.d(t,{Ln:function(){return n},uX:function(){return s}});const n=(e,t)=>o(e,t),i=Symbol("SOME"),o=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return i in e?e.some((e=>o(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>o(e,t))))));if("object"!=typeof t||null===t)return!1;const r=t;return Object.entries(e).every((([e,t])=>o(t,r[e])))},s=e=>t=>n(e,t);class a{static narrow(e){return new a((t=>n(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,r=e instanceof a?e.NF:e instanceof Function?e:t=>n(e,t);return new a((e=>t(e)&&r(e)))}}new a((e=>!0))}},function(e){e.O(0,[338,3139,9774,2888,179],(function(){return t=23663,e(e.s=t);var t}));var t=e.O();_N_E=t}]);