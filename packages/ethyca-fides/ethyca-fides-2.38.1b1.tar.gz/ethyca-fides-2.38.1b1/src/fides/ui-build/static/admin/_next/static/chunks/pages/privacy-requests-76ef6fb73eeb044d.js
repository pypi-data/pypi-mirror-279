(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2369],{10685:function(e,t,n){"use strict";var r=n(28841),i=n(24246);t.Z=function(e){var t=e.title,n=e.text;return(0,i.jsxs)(r.Ugi,{backgroundColor:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",py:4,px:6,"data-testid":"empty-state",children:[(0,i.jsx)(r.iid,{alignSelf:"start",color:"blue.400",mt:.5}),(0,i.jsxs)(r.kCb,{direction:"column",gap:2,children:[(0,i.jsx)(r.X6q,{fontSize:"md",children:t}),(0,i.jsx)(r.xvT,{fontSize:"sm",color:"gray.600",lineHeight:"5",children:n})]})]})}},99967:function(e,t,n){"use strict";var r=n(28841),i=n(24246);t.Z=function(e){var t=e.page,n=e.size,s=e.total,o=e.handleNextPage,a=e.handlePreviousPage,u=(t-1)*n+1,l=Math.min(s,t*n);return(0,i.jsxs)(r.kCb,{justifyContent:"space-between",mt:6,children:[(0,i.jsx)(r.xvT,{fontSize:"xs",color:"gray.600",children:s>0?(0,i.jsxs)(i.Fragment,{children:["Showing ",Number.isNaN(u)?0:u," to"," ",Number.isNaN(l)?0:l," of"," ",Number.isNaN(s)?0:s," results"]}):"0 results"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(r.zxk,{disabled:t<=1,onClick:a,mr:2,size:"sm",children:"Previous"}),(0,i.jsx)(r.zxk,{disabled:t*n>=s,onClick:o,size:"sm",children:"Next"})]})]})}},63238:function(e,t,n){"use strict";n.d(t,{Tg:function(){return o}});var r=n(6848),i=n(67788),s=n(24246),o=function(e){return(0,r.C)(i.uu).filter((function(t){return e.includes(t)})).length>0};t.ZP=function(e){var t=e.scopes,n=e.children;return o(t)?(0,s.jsx)(s.Fragment,{children:n}):null}},77778:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(97865),i=n(73679),s=n(28841),o=n(27378),a=n(24246),u=function(e){var t=e.defaultValues,n=e.items,u=e.onSelection,l=(0,o.useState)(n),c=l[0],d=l[1];return(0,a.jsxs)(s.qyq,{lineHeight:"1rem",p:"0",children:[(0,a.jsxs)(s.kCb,{borderBottom:"1px",borderColor:"gray.200",cursor:"auto",p:"8px",children:[(0,a.jsx)(s.zxk,{onClick:function(){d(n),u(new Map)},size:"xs",variant:"outline",children:"Clear"}),(0,a.jsx)(s.LZC,{}),(0,a.jsx)(s.zxk,{backgroundColor:"primary.800",color:"white",onClick:function(){u(c)},size:"xs",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Done"})]}),(0,a.jsx)(s.xuv,{maxH:"360px",overflow:"auto",children:(0,a.jsx)(s.cOn,{colorScheme:"purple",defaultValue:t,onChange:function(e){var t=new Map(c);t.forEach((function(e,n){t.set(n,!1)})),e.forEach((function(e){t.set(e,!0)})),d(t)},children:(0,i.Z)(n).sort().map((function(e){var t=(0,r.Z)(e,1)[0];return(0,a.jsx)(s.sNh,{paddingTop:"10px",paddingRight:"8.5px",paddingBottom:"10px",paddingLeft:"8.5px",_focus:{bg:"gray.100"},children:(0,a.jsx)(s.XZJ,{"aria-label":t,isChecked:n.get(t),spacing:".5rem",value:t,width:"100%",children:(0,a.jsx)(s.xvT,{fontSize:"0.75rem",children:t})})},t)}))})})]})},l=function(e){var t=e.closeOnSelect,n=void 0!==t&&t,l=e.list,c=e.onChange,d=e.selectedList,f=e.label,h=e.tooltipDisabled,p=void 0!==h&&h,v=e.tooltipPlacement,x=void 0===v?"auto":v,m=e.width,y=new Map(l),b=(0,o.useState)(!1),j=b[0],g=b[1],_=function(){g(!1)},C=function(){return p?f:d.size>0?(0,i.Z)(d.keys()).sort().join(", "):f};return(0,a.jsx)(s.xuv,{children:(0,a.jsxs)(s.v2r,{closeOnSelect:n,isLazy:!0,onClose:_,onOpen:function(){g(!0)},strategy:"fixed",children:[(0,a.jsx)(s.ua7,{fontSize:".75rem",hasArrow:!0,"aria-label":"",label:C(),lineHeight:"1.25rem",isDisabled:p||!(d.size>0),placement:x,children:(0,a.jsxs)(s.j2t,{"aria-label":C(),as:s.zxk,fontWeight:"normal",rightIcon:(0,a.jsx)(s.mCO,{}),size:"sm",variant:"outline",_active:{bg:"none"},_hover:{bg:"none"},children:[!p&&(0,a.jsx)(s.xvT,{display:"inline-block",isTruncated:!0,width:m,children:C()}),p&&(0,a.jsxs)(s.Ugi,{children:[(0,a.jsx)(s.xvT,{children:C()}),d.size>0&&(0,a.jsx)(s.xvT,{color:"complimentary.500",children:d.size})]})]})}),j?(0,a.jsx)(u,{defaultValues:(0,i.Z)(d.keys()),items:y,onSelection:function(e){var t=new Map((0,i.Z)(e).filter((function(e){return!0===(0,r.Z)(e,2)[1]})));c((0,i.Z)(t.keys())),_()}}):null]})})}},24753:function(e,t,n){"use strict";n.d(t,{MA:function(){return c},Vo:function(){return f},t5:function(){return d}});var r=n(90849),i=n(28841),s=n(24246);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=e.children;return(0,s.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",t]})},l=function(e){var t=e.children;return(0,s.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",t]})},c={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,s.jsx)(u,{children:e});return a(a({},c),{description:t})},f=function(e){var t=(0,s.jsx)(l,{children:e});return a(a({},c),{description:t,status:"error"})}},24330:function(e,t,n){"use strict";n.d(t,{DE:function(){return s},MP:function(){return r},qX:function(){return i}});var r=new Map([["Approved","approved"],["Canceled","canceled"],["Completed","complete"],["Denied","denied"],["Error","error"],["In Progress","in_processing"],["New","pending"],["Paused","paused"],["Unverified","identity_unverified"],["Requires input","requires_input"]]),i={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},s={local:"local",s3:"s3"}},19153:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return he}});var r=n(51471),i=n(28841),s=n(65218),o=n.n(s),a=n(27378),u=n(90768),l=n(63238),c=n(90849),d=n(90089),f=n(55732),h=n(97865),p=n(34707),v=n.n(p),x=n(78624),m=n(10685),y=n(24753),b=n(51365),j=n(34090),g=n(14633),_=n(43139);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e,t){return null===t||void 0===t?void 0:t.find((function(t){return t.policy_key===e}))},S=n(45886),k=n(24246);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q={is_verified:!1,policy_key:"",identity:{}},T=function(e){var t=e.identityInputs;return t?(0,k.jsxs)(k.Fragment,{children:[t.email?(0,k.jsx)(_.j0,{name:"identity.email",label:"User email address",isRequired:t.email===S.R9.email.REQUIRED,variant:"stacked"}):null,t.phone?(0,k.jsx)(_.j0,{name:"identity.phone_number",label:"User phone number",isRequired:t.phone===S.R9.phone.REQUIRED,variant:"stacked"}):null]}):null},Z=function(e){var t=e.customFieldInputs;if(!t)return null;var n=Object.entries(t);return(0,k.jsx)(k.Fragment,{children:n.map((function(e){var t=(0,h.Z)(e,2),n=t[0],r=t[1];return r.hidden?null:(0,k.jsx)(_.j0,{name:"custom_privacy_request_fields.".concat(n,".value"),label:r.label,isRequired:r.required,variant:"stacked"},n)}))})},D=function(e){var t=e.onSubmit,n=e.onCancel,r=(0,b.xv)().data;return(0,k.jsx)(j.J9,{initialValues:q,onSubmit:t,validationSchema:function(){return(0,g.Vo)((function(e){return function(e){var t,n;if(!e)return g.Ry().shape({policy_key:g.Z_().required().label("Request type")});var r=e.custom_privacy_request_fields?Object.entries(e.custom_privacy_request_fields).map((function(e){var t=(0,h.Z)(e,2),n=t[0],r=t[1];return(0,c.Z)({},n,g.Ry().shape({value:r.required&&!r.hidden?g.Z_().required().label(r.label):g.Z_().nullable()}))})).reduce((function(e,t){return O(O({},e),t)}),{}):{};return g.Ry().shape({policy_key:g.Z_().required().label("Request type"),identity:g.Ry().shape({email:"required"===(null===(t=e.identity_inputs)||void 0===t?void 0:t.email)?g.Z_().email().required().label("Email address"):g.Z_().nullable(),phone_number:"required"===(null===(n=e.identity_inputs)||void 0===n?void 0:n.phone)?g.Z_().matches(/^\+?[1-9]\d{1,14}$/,"Phone number must be formatted correctly (e.g. 15555555555)").required().label("Phone number"):g.Z_().matches(/^\+?[1-9]\d{1,14}$/,"Phone number must be formatted correctly (e.g. 15555555555)").nullable()}),custom_privacy_request_fields:g.Ry().shape(r)})}(w(e.policy_key,null===r||void 0===r?void 0:r.actions))}))},children:function(e){var t,s=e.values,o=e.dirty,a=e.isValid,u=e.isSubmitting,l=e.setFieldValue,d=w(s.policy_key,null===r||void 0===r?void 0:r.actions);return(0,k.jsx)(j.l0,{children:(0,k.jsxs)(i.Kqy,{spacing:6,mb:2,children:[(0,k.jsx)(_.AP,{name:"policy_key",label:"Request type",options:null!==(t=null===r||void 0===r?void 0:r.actions.map((function(e){return{label:e.title,value:e.policy_key}})))&&void 0!==t?t:[],onChange:function(e){return function(e){var t=w(e.value,null===r||void 0===r?void 0:r.actions);if(null!==t&&void 0!==t&&t.custom_privacy_request_fields){var n=Object.entries(t.custom_privacy_request_fields).map((function(e){var t=(0,h.Z)(e,2),n=t[0],r=t[1];return(0,c.Z)({},n,{label:r.label,value:r.default_value})})).reduce((function(e,t){return E(E({},e),t)}),{});l("custom_privacy_request_fields",n)}else l("custom_privacy_request_fields",void 0)}(e)},variant:"stacked",isRequired:!0}),(0,k.jsx)(T,{identityInputs:null===d||void 0===d?void 0:d.identity_inputs}),(0,k.jsx)(Z,{customFieldInputs:null===d||void 0===d?void 0:d.custom_privacy_request_fields}),(0,k.jsx)(_.Xl,{name:"is_verified",label:"I confirm that I have verified this user information"}),(0,k.jsxs)(i.hE2,{alignSelf:"end",spacing:0,children:[(0,k.jsx)(i.zxk,{variant:"outline",size:"sm",onClick:n,mr:4,children:"Cancel"}),(0,k.jsx)(i.zxk,{type:"submit",colorScheme:"primary",size:"sm",isDisabled:!s.is_verified||!o||!a,isLoading:u,"data-testid":"submit-btn",children:"Submit"})]})]})})}})},I=n(33167),R=["is_verified"];function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(e){var t=e.isOpen,n=e.onClose,r=(0,b.M6)(),s=(0,h.Z)(r,1)[0],o=(0,i.pmc)(),a=function(){var e=(0,f.Z)(v().mark((function e(t){var r,i,a,u;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_verified,r=(0,d.Z)(t,R),i=r.custom_privacy_request_fields?Object.entries(r.custom_privacy_request_fields).map((function(e){var t=(0,h.Z)(e,2),n=t[0],r=t[1];return r.value?(0,c.Z)({},n,r):{}})).reduce((function(e,t){return A(A({},e),t)}),{}):void 0,a=A(A({},r),{},{custom_privacy_request_fields:i}),e.next=5,s([a]);case 5:u=e.sent,(0,I.isErrorResult)(u)?o((0,y.Vo)((0,x.e$)(u.error,"An error occurred while creating this privacy request. Please try again"))):o((0,y.t5)("Privacy request created")),n();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,k.jsxs)(i.u_l,{isOpen:t,onClose:n,size:"2xl",isCentered:!0,children:[(0,k.jsx)(i.ZAr,{}),(0,k.jsxs)(i.hzk,{"data-testid":"submit-request-modal",children:[(0,k.jsx)(i.xBx,{children:"Submit privacy request"}),(0,k.jsx)(i.fef,{children:(0,k.jsxs)(i.Kqy,{spacing:4,children:[(0,k.jsx)(m.Z,{title:"Warning: You are bypassing identity verification",text:"You are bypassing Fides' built-in identity verification step. Please ensure that you are only entering information on behalf of a verified and approved user's privacy request."}),(0,k.jsx)(D,{onSubmit:a,onCancel:function(){return n()}})]})})]})]})},M=function(){var e=(0,i.qY0)(),t=e.onOpen,n=e.isOpen,r=e.onClose;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(L,{isOpen:n,onClose:r}),(0,k.jsx)(i.zxk,{colorScheme:"primary",size:"sm",onClick:t,"data-testid":"submit-request-btn",children:"Submit request"})]})},F=n(9408),N=n(73679),B=n(77778),U=n(95946),V=n(60245),X=n(45802),H=n(24330);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K,J=function(e){var t=e.revealPII,n=e.setRevealPII,r=function(e){var t=(0,V.v9)(b.dp),n=(0,V.v9)(X.rK),r=(0,V.I0)(),s=(0,i.pmc)(),o=(0,a.useCallback)((function(e){var t=[];e.forEach((function(e){H.MP.forEach((function(n,r){r===e&&t.push(n)}))})),r((0,b.CI)(t))}),[r]),u=function(){var e=(0,f.Z)(v().mark((function e(){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.py)(Y(Y({},t),{},{token:n}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r=e.t0 instanceof Error?e.t0.message:"Unknown error occurred";case 8:r&&s({description:"".concat(r),duration:5e3,status:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),l=function(e){var t=new Map;return H.MP.forEach((function(n,r){var i=!1;e.includes(n)&&(i=!0),t.set(r,i)})),t},c=(0,a.useMemo)((function(){return l(t.status||[])}),[t.status]),d=new Map((0,N.Z)(c).filter((function(e){return!0===(0,h.Z)(e,2)[1]})));return Y(Y({handleSearchChange:function(e){return r((0,b.Nl)(e.target.value))},handleStatusChange:o,handleFromChange:function(e){return r((0,b.su)(null===e||void 0===e?void 0:e.target.value))},handleToChange:function(e){return r((0,b.Ue)(null===e||void 0===e?void 0:e.target.value))},handleClearAllFilters:function(){e(!1),r((0,b.Mk)())},handleDownloadClick:u,loadStatusList:l},t),{},{selectedStatusList:d,statusList:c})}(n),s=r.handleSearchChange,o=r.handleStatusChange,u=r.handleFromChange,l=r.handleToChange,c=r.handleClearAllFilters,d=r.handleDownloadClick,p=r.id,x=r.from,m=r.selectedStatusList,y=r.statusList,j=r.to;return(0,k.jsxs)(i.Kqy,{direction:"row",mb:6,flexWrap:"wrap",gap:2,children:[(0,k.jsx)(B.Z,{label:"Select Status",list:y,selectedList:m,width:"144px",onChange:o,tooltipPlacement:"top"}),(0,k.jsxs)(i.BZy,{size:"sm",flex:1,marginStart:"0px !important",children:[(0,k.jsx)(i.Z8_,{pointerEvents:"none",children:(0,k.jsx)(i.PTu,{color:"gray.300",w:"17px",h:"17px"})}),(0,k.jsx)(i.IIB,{autoComplete:"off",autoFocus:!0,type:"search",minWidth:200,placeholder:"Search Request ID",spellCheck:!1,size:"sm",borderRadius:"md",value:p,name:"search",onChange:s})]}),(0,k.jsxs)(i.BZy,{size:"sm",flex:1,marginStart:"0px !important",children:[(0,k.jsx)(i.UiE,{borderRadius:"md",children:"From"}),(0,k.jsx)(i.IIB,{type:"date",name:"From",value:x,max:j||void 0,onChange:u,borderRadius:"md"})]}),(0,k.jsxs)(i.BZy,{size:"sm",flex:1,marginStart:"0px !important",children:[(0,k.jsx)(i.UiE,{borderRadius:"md",children:"To"}),(0,k.jsx)(i.IIB,{type:"date",borderRadius:"md",name:"To",value:j,min:x||void 0,onChange:l})]}),(0,k.jsxs)(i.kCb,{flexShrink:0,alignItems:"center",children:[(0,k.jsx)(i.xvT,{fontSize:"xs",mr:2,size:"sm",children:"Reveal PII"}),(0,k.jsx)(U.Z,{revealPII:t,onChange:n})]}),(0,k.jsx)(i.zxk,{variant:"ghost",flexShrink:0,rightIcon:(0,k.jsx)(i.$Io,{}),size:"sm",onClick:d,children:"Download"}),(0,k.jsx)(i.zxk,{variant:"ghost",flexShrink:0,rightIcon:(0,k.jsx)(i.LGN,{width:"17px"}),size:"sm",onClick:c,children:"Clear all filters"})]})},G=n(6848),Q=n(99967),$=n(86677),ee=n(64860),te=n(13807),ne=n(19099),re=n(1540),ie=n(1326),se=n(40377),oe=n(20970),ae=n(30199),ue=function(e){var t=e.isChecked,n=e.onCheckChange,r=e.request,s=e.revealPII,o=function(e){var t=(0,i.pmc)(),n=(0,a.useRef)(null),r=(0,a.useState)(!1),s=r[0],o=r[1],u=(0,a.useState)(!1),l=u[0],c=u[1],d=(0,a.useState)(!1),f=d[0],h=d[1],p=(0,i.VPI)(e.id).onCopy,v=(0,$.useRouter)();return{hovered:s,focused:l,menuOpen:f,resetSharedModalStates:function(){c(!1),o(!1),h(!1)},handleMenuClose:function(){return h(!1)},handleMenuOpen:function(){return h(!0)},handleMouseEnter:function(){return o(!0)},handleMouseLeave:function(){return o(!1)},handleFocus:function(){return c(!0)},handleBlur:function(){return c(!1)},handleIdCopy:function(){p(),t({title:"Request ID copied",duration:5e3,render:function(){return(0,k.jsx)(i.bZj,{bg:"gray.600",borderRadius:"6px",display:"flex",children:(0,k.jsx)(i.CdC,{color:"white",children:"Request ID copied"})})},containerStyle:{minWidth:"0px"}})},hoverButtonRef:n,shiftFocusToHoverMenu:function(){n.current&&n.current.focus()},handleViewDetails:function(){var t="/privacy-requests/".concat(e.id);v.push(t)}}}(r),u=o.hovered,l=o.handleMenuOpen,c=o.handleMenuClose,d=o.handleMouseEnter,f=o.handleMouseLeave,h=o.handleIdCopy,p=o.menuOpen,v=o.hoverButtonRef,x=o.shiftFocusToHoverMenu,m=o.handleFocus,y=o.handleBlur,b=o.resetSharedModalStates,j=o.focused,g=o.handleViewDetails,_=u||p||j;return(0,k.jsxs)(i.Tr,{_hover:{bg:"gray.50"},bg:_?"gray.50":"white",onMouseEnter:d,onMouseLeave:f,height:"36px","data-testid":"privacy-request-row-".concat(r.status),children:[(0,k.jsx)(i.Td,{px:2,children:(0,k.jsx)(i.XZJ,{"aria-label":"Select request",isChecked:!!t,isDisabled:"error"!==r.status,onChange:function(e){return n(r.id,e.target.checked)}})}),(0,k.jsx)(i.Td,{pl:0,py:1,children:(0,k.jsx)(ne.Z,{status:r.status})}),(0,k.jsx)(i.Td,{py:1,children:(0,k.jsx)(ee.Z,{daysLeft:r.days_left,includeText:!1,status:r.status})}),(0,k.jsx)(i.Td,{py:1,children:(0,k.jsx)(re.Z,{rules:r.policy.rules})}),(0,k.jsx)(i.Td,{py:1,children:(0,k.jsx)(i.xvT,{fontSize:"xs",children:(0,k.jsx)(te.Z,{data:r.identity&&(r.identity.email.value||r.identity.phone_number.value)||"",revealPII:s})})}),(0,k.jsx)(i.Td,{py:1,children:(0,k.jsx)(i.xvT,{fontSize:"xs",children:(0,ie.p6)(r.created_at)})}),(0,k.jsx)(i.Td,{py:1,children:(0,k.jsx)(i.xvT,{fontSize:"xs",children:(0,k.jsx)(te.Z,{data:r.reviewer?r.reviewer.username:"",revealPII:s})})}),(0,k.jsx)(i.Td,{py:1,children:(0,k.jsx)(i.xvT,{isTruncated:!0,fontSize:"xs",maxWidth:"87px",children:r.id})}),(0,k.jsxs)(i.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:[(0,k.jsx)(i.zxk,{size:"xs",variant:"ghost",mr:2.5,onFocus:x,tabIndex:_?-1:0,"data-testid":"privacy-request-more-btn",children:(0,k.jsx)(i.nXP,{color:"gray.700",w:18,h:18})}),(0,k.jsxs)(i.hE2,{isAttached:!0,variant:"outline",position:"absolute",right:2.5,top:"50%",transform:"translate(1px, -50%)",opacity:_?1:0,pointerEvents:_?"auto":"none",onFocus:m,onBlur:y,shadow:"base",borderRadius:"md",backgroundColor:"white",children:["error"===r.status&&(0,k.jsx)(ae.Z,{buttonProps:{mr:"-px",size:"xs"},handleBlur:y,subjectRequest:r}),"pending"===r.status&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(se.Z,{subjectRequest:r,onClose:b,ref:v,children:"Approve"}),(0,k.jsx)(oe.Z,{subjectRequest:r,onClose:b,children:"Deny"})]}),(0,k.jsxs)(i.v2r,{onOpen:l,onClose:c,children:[(0,k.jsx)(i.j2t,{as:i.zxk,size:"xs",bg:"white",ref:"pending"!==r.status?v:null,children:(0,k.jsx)(i.nXP,{color:"gray.700",w:18,h:18})}),(0,k.jsx)(i.h_i,{children:(0,k.jsxs)(i.qyq,{shadow:"xl","data-testid":"privacy-request-more-menu",children:[(0,k.jsx)(i.sNh,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:h,children:(0,k.jsx)(i.xvT,{fontSize:"sm",children:"Copy Request ID"})}),(0,k.jsx)(i.sNh,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:g,children:(0,k.jsx)(i.xvT,{fontSize:"sm",children:"View Details"})})]})})]})]})]})]},r.id)};!function(e){e.ASC="asc",e.DESC="desc",e.UNSELECTED="unselected"}(K||(K={}));var le=function(e){var t=e.sortField,n=e.isLoading,r=function(e){var t=e.sortField,n=e.isLoading,r=(0,V.v9)(b.dp),i=(0,V.I0)(),s=(0,a.useState)(K.UNSELECTED),o=s[0],u=s[1],l=(0,a.useState)(!1),c=l[0],d=l[1];return(0,a.useEffect)((function(){n||d(!1)}),[n]),(0,a.useEffect)((function(){void 0===r.sort_direction&&u(K.UNSELECTED)}),[r]),{handleButtonClick:(0,a.useCallback)((function(){switch(d(!0),i((0,b.PU)(t)),o){case K.UNSELECTED:i((0,b.iX)(K.ASC)),u(K.ASC);break;case K.ASC:i((0,b.iX)(K.DESC)),u(K.DESC);break;case K.DESC:i((0,b.p2)()),u(K.UNSELECTED)}}),[o,u,i,t]),buttonState:o,wasButtonJustClicked:c}}({sortField:t,isLoading:n}),s=r.buttonState,o=r.handleButtonClick,u=r.wasButtonJustClicked,l=null;switch(s){case K.ASC:l=(0,k.jsx)(i.HKD,{up:!0});break;case K.DESC:l=(0,k.jsx)(i.HKD,{up:!1});break;case K.UNSELECTED:default:l=(0,k.jsx)(i.HKD,{})}return(0,k.jsx)(i.kCb,{paddingLeft:"3px",children:(0,k.jsx)(i.hU,{variant:"ghost","aria-label":"Sort requests",icon:l,isLoading:n&&u,onClick:o})})},ce=function(e){var t=e.revealPII,n=(0,G.T)(),r=(0,G.C)(b.dp),s=(0,G.C)(b.fe),o=s.checkAll,u=s.errorRequests,l=(0,b.QA)(r),c=l.data,d=l.isFetching,f=c||{items:[],total:0},h=f.items,p=f.total,v=(0,a.useCallback)((function(){return h.filter((function(e){return"error"===e.status})).map((function(e){return e.id}))}),[h]),x=function(e,t){var r;r=t?[].concat((0,N.Z)(u),[e]):u.filter((function(t){return t!==e})),n((0,b.uT)({checkAll:t&&o,errorRequests:r}))};return(0,a.useEffect)((function(){var e;d&&null!==(e=r.status)&&void 0!==e&&e.includes("error")&&n((0,b.uT)({checkAll:!1,errorRequests:[]}))}),[n,r.status,d]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.iA_,{size:"sm","data-testid":"privacy-request-table",children:[(0,k.jsx)(i.hrZ,{children:(0,k.jsxs)(i.Tr,{children:[(0,k.jsx)(i.Th,{px:2,children:(0,k.jsx)(i.XZJ,{"aria-label":"Select all",isChecked:o,isDisabled:!h.some((function(e){return"error"===e.status})),onChange:function(){var e=!o;n((0,b.uT)({checkAll:e,errorRequests:e?v():[]}))}})}),(0,k.jsx)(i.Th,{pl:0,children:"Status"}),(0,k.jsx)(i.Th,{children:(0,k.jsxs)(i.kCb,{alignItems:"center",children:["Days Left"," ",(0,k.jsx)(le,{sortField:"due_date",isLoading:d})]})}),(0,k.jsx)(i.Th,{children:"Request Type"}),(0,k.jsx)(i.Th,{children:"Subject Identity"}),(0,k.jsx)(i.Th,{children:"Time Received"}),(0,k.jsx)(i.Th,{children:"Reviewed By"}),(0,k.jsx)(i.Th,{children:"Request ID"}),(0,k.jsx)(i.Th,{})]})}),(0,k.jsx)(i.p3B,{children:h.map((function(e){return(0,k.jsx)(ue,{isChecked:u.includes(e.id),onCheckChange:x,request:e,revealPII:t},e.id)}))})]}),(0,k.jsx)(Q.Z,{page:r.page,size:r.size,total:p,handleNextPage:function(){n((0,b.YA)(r.page+1))},handlePreviousPage:function(){n((0,b.YA)(r.page-1))}})]})},de=o()((function(){return n.e(8678).then(n.bind(n,58678))}),{loading:function(){return(0,k.jsx)("div",{children:"Loading..."})},loadableGenerated:{webpack:function(){return[58678]}}}),fe=function(){var e=function(){var e=(0,F.VY)().errorAlert,t=(0,a.useState)(!1),n=t[0],r=t[1],s=(0,a.useState)({count:0,total:0}),o=s[0],u=s[1],l=(0,a.useState)(!0),c=l[0],d=l[1],f=(0,b.tE)().data,h=(0,b.QA)({status:["error"]},{pollingInterval:15e3,skip:c}).data;return(0,a.useEffect)((function(){d(!(f&&f.notify_after_failures>0))}),[f]),(0,a.useEffect)((function(){var e=(null===h||void 0===h?void 0:h.total)||0;e>=((null===f||void 0===f?void 0:f.notify_after_failures)||0)&&e>o.total?(u({count:e-o.total,total:e}),r(!0)):r(!1)}),[null===h||void 0===h?void 0:h.total,null===f||void 0===f?void 0:f.notify_after_failures,o.total]),{processing:function(){n&&e((0,k.jsxs)(i.xuv,{children:["DSR automation has failed for"," ",(0,k.jsx)(i.xvT,{as:"span",fontWeight:"semibold",children:o.count})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null,id:"dsrErrorAlert"})}}}(),t=e.processing,n=(0,a.useState)(!1),r=n[0],s=n[1],o=(0,u.hz)().plus;return(0,a.useEffect)((function(){t()}),[t]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.kCb,{"data-testid":"privacy-requests",gap:4,children:[(0,k.jsx)(i.X6q,{mb:8,fontSize:"2xl",fontWeight:"semibold",children:"Privacy Requests"}),(0,k.jsx)(i.LZC,{}),o?(0,k.jsx)(l.ZP,{scopes:[S.Sh.PRIVACY_REQUEST_CREATE],children:(0,k.jsx)(M,{})}):null,(0,k.jsx)(de,{})]}),(0,k.jsx)(J,{revealPII:r,setRevealPII:s}),(0,k.jsx)(ce,{revealPII:r})]})},he=function(){return(0,k.jsx)(r.Z,{title:"Privacy Requests",children:(0,k.jsx)(fe,{})})}},33167:function(e,t,n){"use strict";n.d(t,{isAPIError:function(){return r.Bw},isErrorResult:function(){return r.D4}});var r=n(60041)},60296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=s.default,i=(null==t?void 0:t.suspense)?{}:{loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};e instanceof Promise?i.loader=function(){return e}:"function"===typeof e?i.loader=e:"object"===typeof e&&(i=r({},i,e));if((i=r({},i,t)).suspense)throw new Error("Invalid suspense option usage in next/dynamic. Read more: https://nextjs.org/docs/messages/invalid-dynamic-suspense");i.suspense&&(delete i.ssr,delete i.loading);i.loadableGenerated&&delete(i=r({},i,i.loadableGenerated)).loadableGenerated;if("boolean"===typeof i.ssr&&!i.suspense){if(!i.ssr)return delete i.ssr,o(n,i);delete i.ssr}return n(i)},t.noSSR=o;var r=n(76516).Z,i=n(42619).Z,s=(i(n(27378)),i(n(81740)));function o(e,t){return delete t.webpack,delete t.modules,e(t)}("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},59749:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableContext=void 0;var r=(0,n(42619).Z)(n(27378)).default.createContext(null);t.LoadableContext=r},81740:function(e,t,n){"use strict";var r=n(65855),i=n(46684);function s(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw s}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(76516).Z,u=(0,n(42619).Z)(n(27378)),l=n(59749),c=n(70644).useSyncExternalStore,d=[],f=[],h=!1;function p(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e})).catch((function(e){throw n.loading=!1,n.error=e,e})),n}var v=function(){function e(t,n){r(this,e),this._loadFn=t,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return i(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,n=this._opts;t.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(t){e._update({}),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=a({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function x(e){return function(e,t){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},t);n.suspense&&(n.lazy=u.default.lazy(n.loader));var r=null;function i(){if(!r){var t=new v(e,n);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!h){var o=n.webpack?n.webpack():n.modules;o&&f.push((function(e){var t,n=s(o);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(-1!==e.indexOf(r))return i()}}catch(a){n.e(a)}finally{n.f()}}))}function d(){i();var e=u.default.useContext(l.LoadableContext);e&&Array.isArray(n.modules)&&n.modules.forEach((function(t){e(t)}))}var p=n.suspense?function(e,t){return d(),u.default.createElement(n.lazy,a({},e,{ref:t}))}:function(e,t){d();var i=c(r.subscribe,r.getCurrentValue,r.getCurrentValue);return u.default.useImperativeHandle(t,(function(){return{retry:r.retry}}),[]),u.default.useMemo((function(){return i.loading||i.error?u.default.createElement(n.loading,{isLoading:i.loading,pastDelay:i.pastDelay,timedOut:i.timedOut,error:i.error,retry:r.retry}):i.loaded?u.default.createElement((t=i.loaded)&&t.__esModule?t.default:t,e):null;var t}),[e,i])};return p.preload=function(){return i()},p.displayName="LoadableComponent",u.default.forwardRef(p)}(p,e)}function m(e,t){for(var n=[];e.length;){var r=e.pop();n.push(r(t))}return Promise.all(n).then((function(){if(e.length)return m(e,t)}))}x.preloadAll=function(){return new Promise((function(e,t){m(d).then(e,t)}))},x.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var n=function(){return h=!0,t()};m(f,e).then(n,n)}))},window.__NEXT_PRELOADREADY=x.preloadReady;var y=x;t.default=y},1565:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests",function(){return n(19153)}])},65218:function(e,t,n){e.exports=n(60296)}},function(e){e.O(0,[2160,338,3139,2153,9774,2888,179],(function(){return t=1565,e(e.s=t);var t}));var t=e.O();_N_E=t}]);