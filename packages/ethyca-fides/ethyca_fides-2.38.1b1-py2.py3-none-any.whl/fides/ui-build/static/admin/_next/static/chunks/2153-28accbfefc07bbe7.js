"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2153],{64860:function(e,r,n){var t=n(28841),i=(n(27378),n(74011)),o=n(24246);r.Z=function(e){var r=e.daysLeft,n=e.includeText,s=e.status;if(!r||s===i.q.COMPLETE||s===i.q.CANCELED||s===i.q.DENIED||s===i.q.IDENTITY_UNVERIFIED)return null;var c="";switch(!0){case r>=10:c="green.500";break;case r<10&&r>4:c="orange.500";break;case r<5:c="red.400"}var a=n?"".concat(r," days left"):r;return(0,o.jsx)(t.Vp9,{backgroundColor:c,color:"white",fontWeight:"medium",fontSize:"sm",children:a})}},51471:function(e,r,n){n.d(r,{Z:function(){return v}});var t=n(90849),i=n(28841),o=n(88038),s=n.n(o),c=n(86677),a=(n(27378),n(90768)),u=n(51365),l=n(60709),d=n(24246),f=function(){var e=(0,c.useRouter)();return(0,d.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,d.jsxs)(i.xuv,{children:[(0,d.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,d.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,d.jsx)(i.zxk,{size:"sm",variant:"outline",onClick:function(){e.push(l.fz)},children:"Configure"})]}),(0,d.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})};function p(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function b(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?p(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var v=function(e){var r=e.children,n=e.title,t=e.padded,o=void 0===t||t,l=e.mainProps,p=(0,a.hz)(),v=(0,c.useRouter)(),h="/privacy-requests"===v.pathname||"/datastore-connection"===v.pathname,g=!(p.flags.privacyRequestsConfiguration&&h),j=(0,u.JE)(void 0,{skip:g}).data,y=(0,u.PW)(void 0,{skip:g}).data,x=p.flags.privacyRequestsConfiguration&&(!j||!y)&&h;return(0,d.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,d.jsxs)(s(),{children:[(0,d.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,d.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,d.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,d.jsxs)(i.kCb,b(b({as:"main",direction:"column",py:o?6:0,px:o?10:0,h:o?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto"},l),{},{children:[x?(0,d.jsx)(f,{}):null,r]}))]})}},13807:function(e,r,n){var t=n(24246);r.Z=function(e){var r=e.data,n=e.revealPII?r:String(r).replace(/./g,"*");return(0,t.jsx)(t.Fragment,{children:n})}},95946:function(e,r,n){var t=n(28841),i=(n(27378),n(24246));r.Z=function(e){var r=e.revealPII,n=e.onChange;return(0,i.jsx)(t.rsf,{"data-testid":"pii-toggle",colorScheme:"secondary",isChecked:r,onChange:function(e){return n(e.target.checked)}})}},19099:function(e,r,n){var t=n(28841),i=n(24246),o={approved:{bg:"yellow.500",label:"Approved"},complete:{bg:"green.500",label:"Completed"},awaiting_email_send:{bg:"gray.400",label:"Awaiting Email Send"},denied:{bg:"red.500",label:"Denied"},canceled:{bg:"red.600",label:"Canceled"},error:{bg:"red.800",label:"Error"},in_processing:{bg:"orange.500",label:"In Progress"},paused:{bg:"gray.400",label:"Paused"},pending:{bg:"blue.400",label:"New"},identity_unverified:{bg:"red.400",label:"Unverified"},requires_input:{bg:"yellow.400",label:"Requires Input"}};r.Z=function(e){var r=e.status;return(0,i.jsx)(t.Cts,{color:"white",bg:o[r].bg,width:"100%",minWidth:"120px",lineHeight:"18px",textAlign:"center","data-testid":"request-status-badge",children:o[r].label})}},1540:function(e,r,n){n.d(r,{E:function(){return c}});var t=n(28841),i=n(9481),o=(n(27378),n(1326)),s=n(24246),c=function(e){return Array.from(new Set(e.filter((function(e){return Object.values(i.U).includes(e.action_type)})).map((function(e){return e.action_type}))))};r.Z=function(e){var r=e.rules,n=c(r).map((function(e){return(0,o.kC)(e)})).map((function(e){return(0,s.jsx)(t.Vp9,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:e},e)}));return(0,s.jsx)(t.xuv,{children:n})}},9408:function(e,r,n){n.d(r,{HK:function(){return o},VY:function(){return t.V},O3:function(){return c}});var t=n(36653),i=n(78624),o=function(){var e=(0,t.V)().errorAlert;return{handleError:function(r){var n="An unexpected error occurred. Please try again.";(0,i.Ot)(r)?n=r.data.detail:(0,i.tB)(r)&&(n=r.data.detail[0].msg),e(n)}}},s=n(27378),c=function(e){var r=(0,s.useRef)(void 0);return(0,s.useEffect)((function(){var n=function(n){var t;null!==(t=r.current)&&void 0!==t&&t.contains(n.target)||e()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[r,e]),{ref:r}}},36653:function(e,r,n){n.d(r,{V:function(){return a}});var t=n(90849),i=n(28841),o=n(24246);function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function c(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var a=function(){var e=(0,i.pmc)();return{errorAlert:function(r,n,t){var s=c(c({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,o.jsxs)(i.bZj,{alignItems:"normal",status:"error",children:[(0,o.jsx)(i.zMQ,{}),(0,o.jsxs)(i.xuv,{children:[n&&(0,o.jsx)(i.CdC,{children:n}),(0,o.jsx)(i.XaZ,{children:r})]}),(0,o.jsx)(i.PZ7,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,s):e(s)},successAlert:function(r,n,t){var s=c(c({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,o.jsxs)(i.bZj,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,o.jsx)(i.zMQ,{}),(0,o.jsxs)(i.xuv,{children:[n&&(0,o.jsx)(i.CdC,{children:n}),(0,o.jsx)(i.XaZ,{children:r})]}),(0,o.jsx)(i.PZ7,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,s):e(s)}}}},40377:function(e,r,n){n.d(r,{Z:function(){return p}});var t=n(90849),i=n(28841),o=n(97865),s=n(27378),c=n(24246),a=function(e){var r=e.isOpen,n=e.onClose,t=e.onApproveRequest,a=e.isLoading,u=e.subjectRequest,l=u.identity,d=u.identity_verified_at,f=u.custom_privacy_request_fields,p=(0,s.useCallback)((function(){t().then((function(){n()}))}),[t,n]);return(0,c.jsxs)(i.u_l,{isOpen:r,onClose:n,size:"lg",isCentered:!0,children:[(0,c.jsx)(i.ZAr,{}),(0,c.jsxs)(i.hzk,{children:[(0,c.jsx)(i.xBx,{children:"Privacy request approval"}),(0,c.jsxs)(i.fef,{paddingTop:0,paddingBottom:0,children:[(0,c.jsx)(i.xvT,{color:"gray.500",fontSize:"14px",marginBottom:4,children:"Are you sure you want to approve this privacy request?"}),(0,c.jsxs)(i.QI$,{children:[Object.entries(l).filter((function(e){return null!==(0,o.Z)(e,2)[1].value})).map((function(e){var r=(0,o.Z)(e,2),n=r[0],t=r[1],s=t.value,a=t.label;return(0,c.jsx)(i.HCh,{children:(0,c.jsxs)(i.kCb,{alignItems:"flex-start",children:[(0,c.jsxs)(i.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[a,":"]}),(0,c.jsx)(i.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:s}),"(",d?"Verified":"Unverified",")"]},n)},n)})),f&&Object.entries(f).filter((function(e){return(0,o.Z)(e,2)[1].value})).map((function(e){var r=(0,o.Z)(e,2),n=r[0],t=r[1];return(0,c.jsx)(i.HCh,{children:(0,c.jsxs)(i.kCb,{alignItems:"flex-start",children:[(0,c.jsxs)(i.xvT,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[t.label,":"]}),(0,c.jsxs)(i.xvT,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:[Array.isArray(t.value)?t.value.join(", "):t.value," "]}),"(Unverified)"]},n)},n)}))]})]}),(0,c.jsx)(i.mzw,{children:(0,c.jsxs)(i.MIq,{columns:2,width:"100%",children:[(0,c.jsx)(i.zxk,{variant:"outline",size:"sm",mr:3,"data-testid":"cancel-btn",onClick:n,children:"Cancel"}),(0,c.jsx)(i.zxk,{colorScheme:"primary",variant:"solid",size:"sm","data-testid":"continue-btn",onClick:p,isLoading:a,children:"Confirm"})]})})]})]})},u=n(759),l=n(34333);function d(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function f(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?d(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var p=(0,i.Gpc)((function(e,r){var n=e.buttonProps,t=e.children,o=e.onClose,s=e.subjectRequest,d=(0,u.Z)({subjectRequest:s}),p=d.handleApproveRequest,b=d.isLoading,v=(0,i.qY0)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.S,f(f({ref:r,onClick:v.onOpen,isLoading:b,isDisabled:b},n),{},{"data-testid":"privacy-request-approve-btn",children:t})),(0,c.jsx)(a,{isOpen:v.isOpen,isLoading:b,onClose:function(){v.onClose(),null===o||void 0===o||o()},onApproveRequest:p,subjectRequest:s})]})}))},20970:function(e,r,n){n.d(r,{Z:function(){return h}});var t=n(90849),i=n(28841),o=n(43139),s=n(34090),c=n(27378),a=n(14633),u=n(24246),l={denialReason:""},d=function(e){var r=e.isOpen,n=e.onClose,t=e.onDenyRequest,d=(0,c.useCallback)((function(e,r){var i=r.setSubmitting;t(e.denialReason).then((function(){i(!1),n()}))}),[t,n]);return(0,u.jsxs)(i.u_l,{isOpen:r,onClose:n,isCentered:!0,returnFocusOnClose:!1,children:[(0,u.jsx)(i.ZAr,{}),(0,u.jsx)(i.hzk,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,u.jsx)(s.J9,{initialValues:l,validationSchema:a.Ry({denialReason:a.Z_().required().label("Reason for denial")}),onSubmit:d,children:function(e){var r=e.isSubmitting,t=e.dirty,c=e.isValid;return(0,u.jsxs)(s.l0,{children:[(0,u.jsx)(i.xBx,{children:"Privacy request denial"}),(0,u.jsx)(i.fef,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,u.jsx)(i.fef,{children:(0,u.jsx)(o.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,u.jsxs)(i.mzw,{children:[(0,u.jsx)(i.zxk,{variant:"outline",size:"sm",width:"100%",maxWidth:"198px",mr:3,disabled:r,onClick:n,children:"Cancel"}),(0,u.jsx)(i.zxk,{type:"submit",size:"sm",width:"100%",maxWidth:"198px",colorScheme:"primary",variant:"solid",disabled:!t||!c,isLoading:r,"data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})},f=n(759),p=n(34333);function b(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function v(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?b(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var h=(0,i.Gpc)((function(e,r){var n=e.buttonProps,t=e.children,o=e.onClose,s=e.subjectRequest,c=(0,f.Z)({subjectRequest:s}),a=c.handleDenyRequest,l=c.isLoading,b=(0,i.qY0)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p.S,v(v({ref:r,onClick:b.onOpen,isLoading:l,isDisabled:l},n),{},{"data-testid":"privacy-request-deny-btn",children:t})),(0,u.jsx)(d,{isOpen:b.isOpen,onClose:function(){b.onClose(),null===o||void 0===o||o()},onDenyRequest:a})]})}))},30199:function(e,r,n){var t=n(90849),i=n(55732),o=n(97865),s=n(34707),c=n.n(s),a=n(28841),u=n(27378),l=n(6848),d=n(78624),f=n(9408),p=n(51365),b=n(24246);function v(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function h(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var g=(0,a.Gpc)((function(e,r){var n=e.buttonProps,t=e.handleBlur,s=e.subjectRequest,v=(0,l.T)(),g=(0,u.useState)(!1),j=g[0],y=g[1],x=(0,f.VY)(),m=x.errorAlert,O=x.successAlert,P=(0,l.C)(p.fe).errorRequests,w=(0,p.JD)(),C=(0,o.Z)(w,1)[0],q=(0,p.Fq)(),R=(0,o.Z)(q,1)[0],k=function(){var e=(0,i.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,C(P);case 3:"error"in(r=e.sent)?(v((0,p.uT)({checkAll:!1,errorRequests:[]})),m((0,d.e$)(r.error),"DSR batch automation has failed due to the following:",{duration:null})):(r.data.failed.length>0&&m((0,b.jsxs)(a.xuv,{children:["DSR automation has failed for"," ",(0,b.jsx)(a.xvT,{as:"span",fontWeight:"semibold",children:r.data.failed.length})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null}),r.data.succeeded.length>0&&O("Privacy request(s) are now being reprocessed.")),y(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return y(!0),e.next=5,R(s);case 5:"error"in(n=e.sent)?m((0,d.e$)(n.error),"DSR automation has failed for this privacy request due to the following:",{duration:null}):O("Privacy request is now being reprocessed."),y(!1),t&&t(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(a.zxk,h(h({},n),{},{isDisabled:j,isLoading:j,loadingText:"Reprocessing",onClick:s?S:k,ref:r,spinnerPlacement:"end",variant:"outline",_hover:{bg:"gray.100"},_loading:{opacity:1,div:{opacity:.4}},children:"Reprocess"}))}));r.Z=g},34333:function(e,r,n){n.d(r,{S:function(){return c}});var t=n(90849),i=n(28841),o=n(24246);function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}var c=(0,i.Gpc)((function(e,r){return(0,o.jsx)(i.zxk,function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({ref:r,size:"xs",bg:"white",_loading:{opacity:1,div:{opacity:.4}},_hover:{bg:"gray.100"}},e))}))},759:function(e,r,n){n.d(r,{Z:function(){return o}});var t=n(97865),i=n(51365),o=function(e){var r=e.subjectRequest,n=(0,i.RW)({fixedCacheKey:r.id}),o=(0,t.Z)(n,2),s=o[0],c=o[1],a=(0,i.F1)({fixedCacheKey:r.id}),u=(0,t.Z)(a,2),l=u[0],d=u[1],f=d.isLoading||c.isLoading;return{approveRequest:s,approveRequestResult:c,denyRequest:l,denyRequestResult:d,handleApproveRequest:function(){return s(r)},handleDenyRequest:function(e){return l({id:r.id,reason:e})},isLoading:f}}},9481:function(e,r,n){var t,i;n.d(r,{U:function(){return t},n:function(){return i}}),function(e){e.ACCESS="access",e.ERASURE="erasure",e.CONSENT="consent",e.UPDATE="update"}(t||(t={})),function(e){e.IN_PROCESSING="in_processing",e.PENDING="pending",e.COMPLETE="complete",e.ERROR="error",e.PAUSED="paused",e.RETRYING="retrying",e.SKIPPED="skipped"}(i||(i={}))}}]);