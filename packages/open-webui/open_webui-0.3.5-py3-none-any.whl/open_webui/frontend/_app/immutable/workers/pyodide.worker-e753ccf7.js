var se=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Se=se((Fe,x)=>{var le=Object.create,N=Object.defineProperty,ce=Object.getOwnPropertyDescriptor,ue=Object.getOwnPropertyNames,fe=Object.getPrototypeOf,de=Object.prototype.hasOwnProperty,p=(e,t)=>N(e,"name",{value:t,configurable:!0}),j=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,i)=>(typeof require<"u"?require:t)[i]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pe=(e,t,i,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ue(t))!de.call(e,s)&&s!==i&&N(e,s,{get:()=>t[s],enumerable:!(a=ce(t,s))||a.enumerable});return e},me=(e,t,i)=>(i=e!=null?le(fe(e)):{},pe(t||!e||!e.__esModule?N(i,"default",{value:e,enumerable:!0}):i,e)),ye=T((e,t)=>{(function(i,a){typeof define=="function"&&define.amd?define("stackframe",[],a):typeof e=="object"?t.exports=a():i.StackFrame=a()})(e,function(){function i(d){return!isNaN(parseFloat(d))&&isFinite(d)}p(i,"_isNumber");function a(d){return d.charAt(0).toUpperCase()+d.substring(1)}p(a,"_capitalize");function s(d){return function(){return this[d]}}p(s,"_getter");var o=["isConstructor","isEval","isNative","isToplevel"],r=["columnNumber","lineNumber"],l=["fileName","functionName","source"],n=["args"],u=["evalOrigin"],c=o.concat(r,l,n,u);function f(d){if(d)for(var h=0;h<c.length;h++)d[c[h]]!==void 0&&this["set"+a(c[h])](d[c[h]])}p(f,"StackFrame"),f.prototype={getArgs:function(){return this.args},setArgs:function(d){if(Object.prototype.toString.call(d)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=d},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(d){if(d instanceof f)this.evalOrigin=d;else if(d instanceof Object)this.evalOrigin=new f(d);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var d=this.getFileName()||"",h=this.getLineNumber()||"",g=this.getColumnNumber()||"",b=this.getFunctionName()||"";return this.getIsEval()?d?"[eval] ("+d+":"+h+":"+g+")":"[eval]:"+h+":"+g:b?b+" ("+d+":"+h+":"+g+")":d+":"+h+":"+g}},f.fromString=p(function(d){var h=d.indexOf("("),g=d.lastIndexOf(")"),b=d.substring(0,h),oe=d.substring(h+1,g).split(","),R=d.substring(g+1);if(R.indexOf("@")===0)var S=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(R,""),ie=S[1],ae=S[2],ne=S[3];return new f({functionName:b,args:oe||void 0,fileName:ie,lineNumber:ae||void 0,columnNumber:ne||void 0})},"StackFrame$$fromString");for(var m=0;m<o.length;m++)f.prototype["get"+a(o[m])]=s(o[m]),f.prototype["set"+a(o[m])]=function(d){return function(h){this[d]=!!h}}(o[m]);for(var y=0;y<r.length;y++)f.prototype["get"+a(r[y])]=s(r[y]),f.prototype["set"+a(r[y])]=function(d){return function(h){if(!i(h))throw new TypeError(d+" must be a Number");this[d]=Number(h)}}(r[y]);for(var v=0;v<l.length;v++)f.prototype["get"+a(l[v])]=s(l[v]),f.prototype["set"+a(l[v])]=function(d){return function(h){this[d]=String(h)}}(l[v]);return f})}),he=T((e,t)=>{(function(i,a){typeof define=="function"&&define.amd?define("error-stack-parser",["stackframe"],a):typeof e=="object"?t.exports=a(ye()):i.ErrorStackParser=a(i.StackFrame)})(e,p(function(i){var a=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,o=/^(eval@)?(\[native code])?$/;return{parse:p(function(r){if(typeof r.stacktrace<"u"||typeof r["opera#sourceloc"]<"u")return this.parseOpera(r);if(r.stack&&r.stack.match(s))return this.parseV8OrIE(r);if(r.stack)return this.parseFFOrSafari(r);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:p(function(r){if(r.indexOf(":")===-1)return[r];var l=/(.+?)(?::(\d+))?(?::(\d+))?$/,n=l.exec(r.replace(/[()]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:p(function(r){var l=r.stack.split(`
`).filter(function(n){return!!n.match(s)},this);return l.map(function(n){n.indexOf("(eval ")>-1&&(n=n.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var u=n.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),c=u.match(/ (\(.+\)$)/);u=c?u.replace(c[0],""):u;var f=this.extractLocation(c?c[1]:u),m=c&&u||void 0,y=["eval","<anonymous>"].indexOf(f[0])>-1?void 0:f[0];return new i({functionName:m,fileName:y,lineNumber:f[1],columnNumber:f[2],source:n})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:p(function(r){var l=r.stack.split(`
`).filter(function(n){return!n.match(o)},this);return l.map(function(n){if(n.indexOf(" > eval")>-1&&(n=n.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),n.indexOf("@")===-1&&n.indexOf(":")===-1)return new i({functionName:n});var u=/((.*".+"[^@]*)?[^@]*)(?:@)/,c=n.match(u),f=c&&c[1]?c[1]:void 0,m=this.extractLocation(n.replace(u,""));return new i({functionName:f,fileName:m[0],lineNumber:m[1],columnNumber:m[2],source:n})},this)},"ErrorStackParser$$parseFFOrSafari"),parseOpera:p(function(r){return!r.stacktrace||r.message.indexOf(`
`)>-1&&r.message.split(`
`).length>r.stacktrace.split(`
`).length?this.parseOpera9(r):r.stack?this.parseOpera11(r):this.parseOpera10(r)},"ErrorStackParser$$parseOpera"),parseOpera9:p(function(r){for(var l=/Line (\d+).*script (?:in )?(\S+)/i,n=r.message.split(`
`),u=[],c=2,f=n.length;c<f;c+=2){var m=l.exec(n[c]);m&&u.push(new i({fileName:m[2],lineNumber:m[1],source:n[c]}))}return u},"ErrorStackParser$$parseOpera9"),parseOpera10:p(function(r){for(var l=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=r.stacktrace.split(`
`),u=[],c=0,f=n.length;c<f;c+=2){var m=l.exec(n[c]);m&&u.push(new i({functionName:m[3]||void 0,fileName:m[2],lineNumber:m[1],source:n[c]}))}return u},"ErrorStackParser$$parseOpera10"),parseOpera11:p(function(r){var l=r.stack.split(`
`).filter(function(n){return!!n.match(a)&&!n.match(/^Error created at/)},this);return l.map(function(n){var u=n.split("@"),c=this.extractLocation(u.pop()),f=u.shift()||"",m=f.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,y;f.match(/\(([^)]*)\)/)&&(y=f.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var v=y===void 0||y==="[arguments not available]"?void 0:y.split(",");return new i({functionName:m,args:v,fileName:c[0],lineNumber:c[1],columnNumber:c[2],source:n})},this)},"ErrorStackParser$$parseOpera11")}},"ErrorStackParser"))}),ve=me(he()),w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&typeof process.browser>"u",A=w&&typeof x<"u"&&typeof x.exports<"u"&&typeof j<"u"&&typeof __dirname<"u",we=w&&!A,ge=typeof Deno<"u",U=!w&&!ge,be=U&&typeof window<"u"&&typeof document<"u"&&typeof document.createElement<"u"&&typeof sessionStorage<"u"&&typeof importScripts>"u",ke=U&&typeof importScripts<"u"&&typeof self<"u";typeof navigator<"u"&&typeof navigator.userAgent<"u"&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")>-1;var M,_,I,D,$;async function L(){if(!w||(M=(await import("./chunks/__vite-browser-external-dfc062b5.js")).default,D=await import("./chunks/__vite-browser-external-dfc062b5.js"),$=await import("./chunks/__vite-browser-external-dfc062b5.js"),I=(await import("./chunks/__vite-browser-external-dfc062b5.js")).default,_=await import("./chunks/__vite-browser-external-dfc062b5.js"),P=_.sep,typeof j<"u"))return;let e=D,t=await import("./chunks/__vite-browser-external-dfc062b5.js"),i=await import("./chunks/__vite-browser-external-dfc062b5.js"),a=await import("./chunks/__vite-browser-external-dfc062b5.js"),s={fs:e,crypto:t,ws:i,child_process:a};globalThis.require=function(o){return s[o]}}p(L,"initNodeModules");function C(e,t){return _.resolve(t||".",e)}p(C,"node_resolvePath");function q(e,t){return t===void 0&&(t=location),new URL(e,t).toString()}p(q,"browser_resolvePath");var F;w?F=C:F=q;var P;w||(P="/");function H(e,t){return e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?{response:fetch(e)}:{binary:$.readFile(e).then(i=>new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}}p(H,"node_getBinaryResponse");function W(e,t){let i=new URL(e,location);return{response:fetch(i,t?{integrity:t}:{})}}p(W,"browser_getBinaryResponse");var O;w?O=H:O=W;async function z(e,t){let{response:i,binary:a}=O(e,t);if(a)return a;let s=await i;if(!s.ok)throw new Error(`Failed to load '${e}': request failed.`);return new Uint8Array(await s.arrayBuffer())}p(z,"loadBinaryFile");var E;if(be)E=p(async e=>await import(e),"loadScript");else if(ke)E=p(async e=>{try{globalThis.importScripts(e)}catch(t){if(t instanceof TypeError)await import(e);else throw t}},"loadScript");else if(w)E=B;else throw new Error("Cannot determine runtime environment");async function B(e){e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?I.runInThisContext(await(await fetch(e)).text()):await import(M.pathToFileURL(e).href)}p(B,"nodeLoadScript");async function V(e){if(w){await L();let t=await $.readFile(e,{encoding:"utf8"});return JSON.parse(t)}else return await(await fetch(e)).json()}p(V,"loadLockFile");async function J(){if(A)return __dirname;let e;try{throw new Error}catch(a){e=a}let t=ve.default.parse(e)[0].fileName;if(we){let a=await import("./chunks/__vite-browser-external-dfc062b5.js");return(await import("./chunks/__vite-browser-external-dfc062b5.js")).fileURLToPath(a.dirname(t))}let i=t.lastIndexOf(P);if(i===-1)throw new Error("Could not extract indexURL path from pyodide module location");return t.slice(0,i)}p(J,"calculateDirname");function Y(e){let t=e.FS,i=e.FS.filesystems.MEMFS,a=e.PATH,s={DIR_MODE:16895,FILE_MODE:33279,mount:function(o){if(!o.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return i.mount.apply(null,arguments)},syncfs:async(o,r,l)=>{try{let n=s.getLocalSet(o),u=await s.getRemoteSet(o),c=r?u:n,f=r?n:u;await s.reconcile(o,c,f),l(null)}catch(n){l(n)}},getLocalSet:o=>{let r=Object.create(null);function l(c){return c!=="."&&c!==".."}p(l,"isRealDir");function n(c){return f=>a.join2(c,f)}p(n,"toAbsolute");let u=t.readdir(o.mountpoint).filter(l).map(n(o.mountpoint));for(;u.length;){let c=u.pop(),f=t.stat(c);t.isDir(f.mode)&&u.push.apply(u,t.readdir(c).filter(l).map(n(c))),r[c]={timestamp:f.mtime,mode:f.mode}}return{type:"local",entries:r}},getRemoteSet:async o=>{let r=Object.create(null),l=await Ee(o.opts.fileSystemHandle);for(let[n,u]of l)n!=="."&&(r[a.join2(o.mountpoint,n)]={timestamp:u.kind==="file"?(await u.getFile()).lastModifiedDate:new Date,mode:u.kind==="file"?s.FILE_MODE:s.DIR_MODE});return{type:"remote",entries:r,handles:l}},loadLocalEntry:o=>{let r=t.lookupPath(o).node,l=t.stat(o);if(t.isDir(l.mode))return{timestamp:l.mtime,mode:l.mode};if(t.isFile(l.mode))return r.contents=i.getFileDataAsTypedArray(r),{timestamp:l.mtime,mode:l.mode,contents:r.contents};throw new Error("node type not supported")},storeLocalEntry:(o,r)=>{if(t.isDir(r.mode))t.mkdirTree(o,r.mode);else if(t.isFile(r.mode))t.writeFile(o,r.contents,{canOwn:!0});else throw new Error("node type not supported");t.chmod(o,r.mode),t.utime(o,r.timestamp,r.timestamp)},removeLocalEntry:o=>{var r=t.stat(o);t.isDir(r.mode)?t.rmdir(o):t.isFile(r.mode)&&t.unlink(o)},loadRemoteEntry:async o=>{if(o.kind==="file"){let r=await o.getFile();return{contents:new Uint8Array(await r.arrayBuffer()),mode:s.FILE_MODE,timestamp:r.lastModifiedDate}}else{if(o.kind==="directory")return{mode:s.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+o.kind)}},storeRemoteEntry:async(o,r,l)=>{let n=o.get(a.dirname(r)),u=t.isFile(l.mode)?await n.getFileHandle(a.basename(r),{create:!0}):await n.getDirectoryHandle(a.basename(r),{create:!0});if(u.kind==="file"){let c=await u.createWritable();await c.write(l.contents),await c.close()}o.set(r,u)},removeRemoteEntry:async(o,r)=>{await o.get(a.dirname(r)).removeEntry(a.basename(r)),o.delete(r)},reconcile:async(o,r,l)=>{let n=0,u=[];Object.keys(r.entries).forEach(function(m){let y=r.entries[m],v=l.entries[m];(!v||t.isFile(y.mode)&&y.timestamp.getTime()>v.timestamp.getTime())&&(u.push(m),n++)}),u.sort();let c=[];if(Object.keys(l.entries).forEach(function(m){r.entries[m]||(c.push(m),n++)}),c.sort().reverse(),!n)return;let f=r.type==="remote"?r.handles:l.handles;for(let m of u){let y=a.normalize(m.replace(o.mountpoint,"/")).substring(1);if(l.type==="local"){let v=f.get(y),d=await s.loadRemoteEntry(v);s.storeLocalEntry(m,d)}else{let v=s.loadLocalEntry(m);await s.storeRemoteEntry(f,y,v)}}for(let m of c)if(l.type==="local")s.removeLocalEntry(m);else{let y=a.normalize(m.replace(o.mountpoint,"/")).substring(1);await s.removeRemoteEntry(f,y)}}};e.FS.filesystems.NATIVEFS_ASYNC=s}p(Y,"initializeNativeFS");var Ee=p(async e=>{let t=[];async function i(s){for await(let o of s.values())t.push(o),o.kind==="directory"&&await i(o)}p(i,"collect"),await i(e);let a=new Map;a.set(".",e);for(let s of t){let o=(await e.resolve(s)).join("/");a.set(o,s)}return a},"getFsHandles");function G(){let e={};return e.noImageDecoding=!0,e.noAudioDecoding=!0,e.noWasmDecoding=!1,e.preRun=[],e.quit=(t,i)=>{throw e.exited={status:t,toThrow:i},i},e}p(G,"createModule");function K(e,t){e.preRun.push(function(){let i="/";try{e.FS.mkdirTree(t)}catch(a){console.error(`Error occurred while making a home directory '${t}':`),console.error(a),console.error(`Using '${i}' for a home directory instead`),t=i}e.FS.chdir(t)})}p(K,"createHomeDirectory");function Q(e,t){e.preRun.push(function(){Object.assign(e.ENV,t)})}p(Q,"setEnvironment");function X(e,t){e.preRun.push(()=>{for(let i of t)e.FS.mkdirTree(i),e.FS.mount(e.FS.filesystems.NODEFS,{root:i},i)})}p(X,"mountLocalDirectories");function Z(e,t){let i=z(t);e.preRun.push(()=>{let a=e._py_version_major(),s=e._py_version_minor();e.FS.mkdirTree("/lib"),e.FS.mkdirTree(`/lib/python${a}.${s}/site-packages`),e.addRunDependency("install-stdlib"),i.then(o=>{e.FS.writeFile(`/lib/python${a}${s}.zip`,o)}).catch(o=>{console.error("Error occurred while installing the standard library:"),console.error(o)}).finally(()=>{e.removeRunDependency("install-stdlib")})})}p(Z,"installStdlib");function ee(e,t){let i;t.stdLibURL!=null?i=t.stdLibURL:i=t.indexURL+"python_stdlib.zip",Z(e,i),K(e,t.env.HOME),Q(e,t.env),X(e,t._node_mounts),e.preRun.push(()=>Y(e))}p(ee,"initializeFileSystem");function te(e,t){let{binary:i,response:a}=O(t+"pyodide.asm.wasm");e.instantiateWasm=function(s,o){return async function(){try{let r;a?r=await WebAssembly.instantiateStreaming(a,s):r=await WebAssembly.instantiate(await i,s);let{instance:l,module:n}=r;typeof WasmOffsetConverter<"u"&&(wasmOffsetConverter=new WasmOffsetConverter(wasmBinary,n)),o(l,n)}catch(r){console.warn("wasm instantiation failed!"),console.warn(r)}}(),{}}}p(te,"preloadWasm");var k="0.26.0a4";async function re(e={}){await L();let t=e.indexURL||await J();t=F(t),t.endsWith("/")||(t+="/"),e.indexURL=t;let i={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,lockFileURL:t+"pyodide-lock.json",args:[],_node_mounts:[],env:{},packageCacheDir:t,packages:[]},a=Object.assign(i,e);a.env.HOME||(a.env.HOME="/home/pyodide");let s=G();s.print=a.stdout,s.printErr=a.stderr,s.arguments=a.args;let o={config:a};s.API=o,o.lockFilePromise=V(a.lockFileURL),te(s,t),ee(s,a);let r=new Promise(n=>s.postRun=n);if(s.locateFile=n=>a.indexURL+n,typeof _createPyodideModule!="function"){let n=`${a.indexURL}pyodide.asm.js`;await E(n)}if(await _createPyodideModule(s),await r,s.exited)throw s.exited.toThrow;if(e.pyproxyToStringRepr&&o.setPyProxyToStringMethod(!0),o.version!==k)throw new Error(`Pyodide version does not match: '${k}' <==> '${o.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);s.locateFile=n=>{throw new Error("Didn't expect to load any more file_packager files!")};let l=o.finalizeBootstrap();if(l.version.includes("dev")||o.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${l.version}/full/`),await o.packageIndexReady,o._pyodide.set_excepthook(),o._pyodide._importhook.register_module_not_found_hook(o._import_name_to_package_name,o.lockfile_unvendored_stdlibs_and_test),o.lockfile_info.version!==k)throw new Error(`Lock file version doesn't match Pyodide version.
   lockfile version: ${o.lockfile_info.version}
   pyodide  version: ${k}`);return o.package_loader.init_loaded_packages(),a.fullStdLib&&await l.loadPackage(o.lockfile_unvendored_stdlibs),o.initializeStreams(a.stdin,a.stdout,a.stderr),l}p(re,"loadPyodide");async function Oe(e=[]){self.stdout=null,self.stderr=null,self.result=null,self.pyodide=await re({indexURL:"/pyodide/",stdout:i=>{console.log("Python output:",i),self.stdout?self.stdout+=`${i}
`:self.stdout=`${i}
`},stderr:i=>{console.log("An error occurred:",i),self.stderr?self.stderr+=`${i}
`:self.stderr=`${i}
`},packages:["micropip"]}),await self.pyodide.pyimport("micropip").install(e)}self.onmessage=async e=>{const{id:t,code:i,...a}=e.data;console.log(e.data);for(const s of Object.keys(a))self[s]=a[s];await Oe(self.packages);try{self.result=await self.pyodide.runPythonAsync(i)}catch(s){self.stderr=s.toString()}self.postMessage({id:t,result:self.result,stdout:self.stdout,stderr:self.stderr})}});export default Se();
//# sourceMappingURL=pyodide.worker-e753ccf7.js.map
