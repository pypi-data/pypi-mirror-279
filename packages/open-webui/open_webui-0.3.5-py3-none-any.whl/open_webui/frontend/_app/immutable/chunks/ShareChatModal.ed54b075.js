import{w as ee,b as ze,U as He,o as Pe,i as fe,n as de,h as Re,c as We}from"./index.92b94e22.js";import{s as le,z as te,A as ae,h as I,d as c,j as u,i as M,r as p,C as ce,p as Ie,W as Me,w as J,P as Be,V as je,E as Ae,a as j,c as A,F as Le,G as Ue,H as Ne,f as S,l as O,e as ve,g as $,R as se,m as D,u as Z,n as z,v as qe,o as Ge}from"./scheduler.8ceb707f.js";import{S as ne,i as oe,f as Oe,b as Y,d as F,m as K,a as H,t as R,e as Q,g as De,c as Ve}from"./index.07e72a31.js";import"./updater.e153cbf1.js";import{b as Je,c as Ze,M as Ye}from"./menu-trigger.0f0338f1.js";import{g as Fe}from"./navigation.f0e36ffc.js";import{f as Ke}from"./index.87fe8e34.js";import{T as Qe}from"./Tooltip.fbf062c2.js";import{A as Xe,B as xe,k as be,o as ke,C as et,n as tt,b as at,m as he,D as st,E as lt}from"./index.93cbbd84.js";import{T as nt}from"./Tags.0b9cb38c.js";import{a as ye}from"./Toaster.svelte_svelte_type_style_lang.a1b53f72.js";import{a as ot}from"./index.d8705ee6.js";import{M as rt}from"./dayjs.min.5e6a5a69.js";const qt=async l=>{let e=null;const a=await fetch(`${ee}/memories/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return a},Gt=async(l,e)=>{let a=null;const t=await fetch(`${ee}/memories/add`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:e})}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(a=s.detail,console.log(s),null));if(a)throw a;return t},Jt=async(l,e,a)=>{let t=null;const s=await fetch(`${ee}/memories/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:a})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).catch(o=>(t=o.detail,console.log(o),null));if(t)throw t;return s},Zt=async(l,e)=>{let a=null;const t=await fetch(`${ee}/memories/query`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:e})}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(a=s.detail,console.log(s),null));if(a)throw a;return t},Yt=async(l,e)=>{let a=null;const t=await fetch(`${ee}/memories/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).then(s=>s).catch(s=>(a=s.detail,console.log(s),null));if(a)throw a;return t},Ft=async l=>{let e=null;const a=await fetch(`${ee}/memories/user`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return a};function it(l){let e,a;return{c(){e=te("svg"),a=te("path"),this.h()},l(t){e=ae(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=I(e);a=ae(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),I(a).forEach(c),s.forEach(c),this.h()},h(){u(a,"stroke-linecap","round"),u(a,"stroke-linejoin","round"),u(a,"d","m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",l[1]),u(e,"stroke","currentColor"),u(e,"class",l[0])},m(t,s){M(t,e,s),p(e,a)},p(t,[s]){s&2&&u(e,"stroke-width",t[1]),s&1&&u(e,"class",t[0])},i:ce,o:ce,d(t){t&&c(e)}}}function ct(l,e,a){let{className:t="size-3.5"}=e,{strokeWidth:s="2.5"}=e;return l.$$set=o=>{"className"in o&&a(0,t=o.className),"strokeWidth"in o&&a(1,s=o.strokeWidth)},[t,s]}class ut extends ne{constructor(e){super(),oe(this,e,ct,it,le,{className:0,strokeWidth:1})}}const ft=l=>({}),Te=l=>({});function dt(l){let e;const a=l[8].default,t=Ae(a,l,l[16],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o&65536)&&Le(t,a,s,s[16],e?Ne(a,s[16],o,null):Ue(s[16]),null)},i(s){e||(H(t,s),e=!0)},o(s){R(t,s),e=!1},d(s){t&&t.d(s)}}}function Ce(l){let e,a,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',s,o,n=l[3].t("Admin Panel")+"",r,i,m;return{c(){e=S("button"),a=S("div"),a.innerHTML=t,s=j(),o=S("div"),r=O(n),this.h()},l(v){e=$(v,"BUTTON",{class:!0});var f=I(e);a=$(f,"DIV",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-1vodyax"&&(a.innerHTML=t),s=A(f),o=$(f,"DIV",{class:!0});var k=I(o);r=D(k,n),k.forEach(c),f.forEach(c),this.h()},h(){u(a,"class","self-center mr-3"),u(o,"class","self-center font-medium"),u(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(v,f){M(v,e,f),p(e,a),p(e,s),p(e,o),p(o,r),i||(m=Z(e,"click",l[11]),i=!0)},p(v,f){f&8&&n!==(n=v[3].t("Admin Panel")+"")&&z(r,n)},d(v){v&&c(e),i=!1,m()}}}function Ee(l){let e,a,t,s;return t=new Qe({props:{content:l[5]&&l[5].length>0?`${l[3].t("Running")}: ${l[5].join(", ")} ✨`:"",$$slots:{default:[ht]},$$scope:{ctx:l}}}),{c(){e=S("hr"),a=j(),Y(t.$$.fragment),this.h()},l(o){e=$(o,"HR",{class:!0}),a=A(o),F(t.$$.fragment,o),this.h()},h(){u(e,"class","dark:border-gray-800 my-1.5 p-0")},m(o,n){M(o,e,n),M(o,a,n),K(t,o,n),s=!0},p(o,n){const r={};n&40&&(r.content=o[5]&&o[5].length>0?`${o[3].t("Running")}: ${o[5].join(", ")} ✨`:""),n&65560&&(r.$$scope={dirty:n,ctx:o}),t.$set(r)},i(o){s||(H(t.$$.fragment,o),s=!0)},o(o){R(t.$$.fragment,o),s=!1},d(o){o&&(c(e),c(a)),Q(t,o)}}}function ht(l){let e,a,t='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>',s,o,n,r=l[3].t("Active Users")+"",i,m,v,f,k;return{c(){e=S("div"),a=S("div"),a.innerHTML=t,s=j(),o=S("div"),n=S("span"),i=O(r),m=O(":"),v=j(),f=S("span"),k=O(l[4]),this.h()},l(_){e=$(_,"DIV",{class:!0});var w=I(e);a=$(w,"DIV",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-dl2p8d"&&(a.innerHTML=t),s=A(w),o=$(w,"DIV",{class:!0});var C=I(o);n=$(C,"SPAN",{class:!0});var E=I(n);i=D(E,r),m=D(E,":"),E.forEach(c),v=A(C),f=$(C,"SPAN",{class:!0});var T=I(f);k=D(T,l[4]),T.forEach(c),C.forEach(c),w.forEach(c),this.h()},h(){u(a,"class","flex items-center"),u(n,"class","font-medium"),u(f,"class","font-semibold"),u(o,"class",""),u(e,"class","flex rounded-md py-1.5 px-3 text-xs gap-2.5 items-center")},m(_,w){M(_,e,w),p(e,a),p(e,s),p(e,o),p(o,n),p(n,i),p(n,m),p(o,v),p(o,f),p(f,k)},p(_,w){w&8&&r!==(r=_[3].t("Active Users")+"")&&z(i,r),w&16&&z(k,_[4])},d(_){_&&c(e)}}}function mt(l){let e,a,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',s,o,n=l[3].t("Settings")+"",r,i,m,v,f,k,_,w=l[3].t("Archived Chats")+"",C,E,T,N,g,h,U,d='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z" clip-rule="evenodd"></path></svg>',y,P,W=l[3].t("Sign Out")+"",X,G,q,x,ue,me;f=new ut({props:{className:"size-5",strokeWidth:"1.5"}});let V=l[1]==="admin"&&Ce(l),L=l[4]&&Ee(l);return{c(){e=S("button"),a=S("div"),a.innerHTML=t,s=j(),o=S("div"),r=O(n),i=j(),m=S("button"),v=S("div"),Y(f.$$.fragment),k=j(),_=S("div"),C=O(w),E=j(),V&&V.c(),T=j(),N=S("hr"),g=j(),h=S("button"),U=S("div"),U.innerHTML=d,y=j(),P=S("div"),X=O(W),G=j(),L&&L.c(),q=ve(),this.h()},l(b){e=$(b,"BUTTON",{class:!0});var B=I(e);a=$(B,"DIV",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-1ew1v3e"&&(a.innerHTML=t),s=A(B),o=$(B,"DIV",{class:!0});var pe=I(o);r=D(pe,n),pe.forEach(c),B.forEach(c),i=A(b),m=$(b,"BUTTON",{class:!0});var re=I(m);v=$(re,"DIV",{class:!0});var _e=I(v);F(f.$$.fragment,_e),_e.forEach(c),k=A(re),_=$(re,"DIV",{class:!0});var ge=I(_);C=D(ge,w),ge.forEach(c),re.forEach(c),E=A(b),V&&V.l(b),T=A(b),N=$(b,"HR",{class:!0}),g=A(b),h=$(b,"BUTTON",{class:!0});var ie=I(h);U=$(ie,"DIV",{class:!0,"data-svelte-h":!0}),se(U)!=="svelte-1svlfdm"&&(U.innerHTML=d),y=A(ie),P=$(ie,"DIV",{class:!0});var we=I(P);X=D(we,W),we.forEach(c),ie.forEach(c),G=A(b),L&&L.l(b),q=ve(),this.h()},h(){u(a,"class","self-center mr-3"),u(o,"class","self-center font-medium"),u(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),u(v,"class","self-center mr-3"),u(_,"class","self-center font-medium"),u(m,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),u(N,"class","dark:border-gray-800 my-1.5 p-0"),u(U,"class","self-center mr-3"),u(P,"class","self-center font-medium"),u(h,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(b,B){M(b,e,B),p(e,a),p(e,s),p(e,o),p(o,r),M(b,i,B),M(b,m,B),p(m,v),K(f,v,null),p(m,k),p(m,_),p(_,C),M(b,E,B),V&&V.m(b,B),M(b,T,B),M(b,N,B),M(b,g,B),M(b,h,B),p(h,U),p(h,y),p(h,P),p(P,X),M(b,G,B),L&&L.m(b,B),M(b,q,B),x=!0,ue||(me=[Z(e,"click",l[9]),Z(m,"click",l[10]),Z(h,"click",l[12])],ue=!0)},p(b,B){(!x||B&8)&&n!==(n=b[3].t("Settings")+"")&&z(r,n),(!x||B&8)&&w!==(w=b[3].t("Archived Chats")+"")&&z(C,w),b[1]==="admin"?V?V.p(b,B):(V=Ce(b),V.c(),V.m(T.parentNode,T)):V&&(V.d(1),V=null),(!x||B&8)&&W!==(W=b[3].t("Sign Out")+"")&&z(X,W),b[4]?L?(L.p(b,B),B&16&&H(L,1)):(L=Ee(b),L.c(),H(L,1),L.m(q.parentNode,q)):L&&(De(),R(L,1,1,()=>{L=null}),Ve())},i(b){x||(H(f.$$.fragment,b),H(L),x=!0)},o(b){R(f.$$.fragment,b),R(L),x=!1},d(b){b&&(c(e),c(i),c(m),c(E),c(T),c(N),c(g),c(h),c(G),c(q)),Q(f),V&&V.d(b),L&&L.d(b),ue=!1,qe(me)}}}function pt(l){let e,a;return e=new Ye({props:{class:"w-full "+l[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:8,side:"bottom",align:"start",transition:l[13],$$slots:{default:[mt]},$$scope:{ctx:l}}}),{c(){Y(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){K(e,t,s),a=!0},p(t,s){const o={};s&4&&(o.class="w-full "+t[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow"),s&65595&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){a||(H(e.$$.fragment,t),a=!0)},o(t){R(e.$$.fragment,t),a=!1},d(t){Q(e,t)}}}function _t(l){let e,a,t;e=new Ze({props:{$$slots:{default:[dt]},$$scope:{ctx:l}}});const s=l[8].content,o=Ae(s,l,l[16],Te),n=o||pt(l);return{c(){Y(e.$$.fragment),a=j(),n&&n.c()},l(r){F(e.$$.fragment,r),a=A(r),n&&n.l(r)},m(r,i){K(e,r,i),M(r,a,i),n&&n.m(r,i),t=!0},p(r,i){const m={};i&65536&&(m.$$scope={dirty:i,ctx:r}),e.$set(m),o?o.p&&(!t||i&65536)&&Le(o,s,r,r[16],t?Ne(s,r[16],i,ft):Ue(r[16]),Te):n&&n.p&&(!t||i&63)&&n.p(r,t?i:-1)},i(r){t||(H(e.$$.fragment,r),H(n,r),t=!0)},o(r){R(e.$$.fragment,r),R(n,r),t=!1},d(r){r&&c(a),Q(e,r),n&&n.d(r)}}}function gt(l){let e,a,t;function s(n){l[15](n)}let o={onOpenChange:l[14],$$slots:{default:[_t]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.open=l[0]),e=new Je({props:o}),Ie.push(()=>Oe(e,"open",s)),{c(){Y(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,[r]){const i={};r&65599&&(i.$$scope={dirty:r,ctx:n}),!a&&r&1&&(a=!0,i.open=n[0],Me(()=>a=!1)),e.$set(i)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function wt(l,e,a){let t,s,o;J(l,ze,h=>a(4,s=h)),J(l,He,h=>a(5,o=h));let{$$slots:n={},$$scope:r}=e;const i=Be("i18n");J(l,i,h=>a(3,t=h));let{show:m=!1}=e,{role:v=""}=e,{className:f="max-w-[240px]"}=e;const k=je(),_=async()=>{await Pe.set(!0),a(0,m=!1)},w=()=>{k("show","archived-chat"),a(0,m=!1)},C=()=>{Fe("/admin"),a(0,m=!1)},E=()=>{localStorage.removeItem("token"),location.href="/auth",a(0,m=!1)},T=h=>Ke(h,{duration:100}),N=h=>{k("change",h)};function g(h){m=h,a(0,m)}return l.$$set=h=>{"show"in h&&a(0,m=h.show),"role"in h&&a(1,v=h.role),"className"in h&&a(2,f=h.className),"$$scope"in h&&a(16,r=h.$$scope)},[m,v,f,t,s,o,i,k,n,_,w,C,E,T,N,g,r]}class Kt extends ne{constructor(e){super(),oe(this,e,wt,gt,le,{show:0,role:1,className:2})}}function vt(l){let e,a;return e=new nt({props:{tags:l[0],deleteTag:l[2],addTag:l[1]}}),{c(){Y(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,s){K(e,t,s),a=!0},p(t,[s]){const o={};s&1&&(o.tags=t[0]),e.$set(o)},i(t){a||(H(e.$$.fragment,t),a=!0)},o(t){R(e.$$.fragment,t),a=!1},d(t){Q(e,t)}}}function bt(l,e,a){let t,s;J(l,fe,f=>a(4,t=f)),J(l,de,f=>a(5,s=f));const o=je();let{chatId:n=""}=e,r=[];const i=async()=>await Xe(localStorage.token,n).catch(async f=>[]),m=async f=>{await xe(localStorage.token,n,f),a(0,r=await i()),await be(localStorage.token,n,{tags:r}),de.set(await ke(localStorage.token))},v=async f=>{await et(localStorage.token,n,f),a(0,r=await i()),await be(localStorage.token,n,{tags:r}),console.log(s),await de.set(await ke(localStorage.token)),console.log(s),s.map(k=>k.name).includes(f)?(await fe.set(await tt(localStorage.token,f)),t.find(k=>k.id===n)&&o("close")):await fe.set(await at(localStorage.token))};return Ge(async()=>{n&&a(0,r=await i())}),l.$$set=f=>{"chatId"in f&&a(3,n=f.chatId)},[r,m,v,n]}class Qt extends ne{constructor(e){super(),oe(this,e,bt,vt,le,{chatId:3})}}function kt(l){let e,a,t;return{c(){e=te("svg"),a=te("path"),t=te("path"),this.h()},l(s){e=ae(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var o=I(e);a=ae(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),I(a).forEach(c),t=ae(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),I(t).forEach(c),o.forEach(c),this.h()},h(){u(a,"fill-rule","evenodd"),u(a,"d","M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z"),u(a,"clip-rule","evenodd"),u(t,"fill-rule","evenodd"),u(t,"d","M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"viewBox","0 0 16 16"),u(e,"fill","currentColor"),u(e,"class",l[0])},m(s,o){M(s,e,o),p(e,a),p(e,t)},p(s,[o]){o&1&&u(e,"class",s[0])},i:ce,o:ce,d(s){s&&c(e)}}}function yt(l,e,a){let{className:t="w-4 h-4"}=e;return l.$$set=s=>{"className"in s&&a(0,t=s.className)},[t]}class Tt extends ne{constructor(e){super(),oe(this,e,yt,kt,le,{className:0})}}function Se(l){var U;let e,a,t,s,o,n,r,i,m,v,f,k,_;function w(d,y){return d[2].share_id?Et:Ct}let C=w(l),E=C(l),T=((U=l[4])==null?void 0:U.features.enable_community_sharing)&&$e(l);m=new Tt({});function N(d,y){return d[2].share_id?$t:St}let g=N(l),h=g(l);return{c(){e=S("div"),a=S("div"),E.c(),t=j(),s=S("div"),o=S("div"),n=S("div"),T&&T.c(),r=j(),i=S("button"),Y(m.$$.fragment),v=j(),h.c(),this.h()},l(d){e=$(d,"DIV",{class:!0});var y=I(e);a=$(y,"DIV",{class:!0});var P=I(a);E.l(P),P.forEach(c),t=A(y),s=$(y,"DIV",{class:!0});var W=I(s);o=$(W,"DIV",{class:!0});var X=I(o);n=$(X,"DIV",{class:!0});var G=I(n);T&&T.l(G),r=A(G),i=$(G,"BUTTON",{class:!0,type:!0,id:!0});var q=I(i);F(m.$$.fragment,q),v=A(q),h.l(q),q.forEach(c),G.forEach(c),X.forEach(c),W.forEach(c),y.forEach(c),this.h()},h(){u(a,"class","text-sm dark:text-gray-300 mb-1"),u(i,"class","self-center flex items-center gap-1 px-3.5 py-2 rounded-xl text-sm font-medium bg-emerald-600 hover:bg-emerald-500 text-white"),u(i,"type","button"),u(i,"id","copy-and-share-chat-button"),u(n,"class","flex gap-1"),u(o,"class","flex flex-col items-end space-x-1 mt-1.5"),u(s,"class","flex justify-end"),u(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(d,y){M(d,e,y),p(e,a),E.m(a,null),p(e,t),p(e,s),p(s,o),p(o,n),T&&T.m(n,null),p(n,r),p(n,i),K(m,i,null),p(i,v),h.m(i,null),f=!0,k||(_=Z(i,"click",l[11]),k=!0)},p(d,y){var P;C===(C=w(d))&&E?E.p(d,y):(E.d(1),E=C(d),E&&(E.c(),E.m(a,null))),(P=d[4])!=null&&P.features.enable_community_sharing?T?T.p(d,y):(T=$e(d),T.c(),T.m(n,r)):T&&(T.d(1),T=null),g===(g=N(d))&&h?h.p(d,y):(h.d(1),h=g(d),h&&(h.c(),h.m(i,null)))},i(d){f||(H(m.$$.fragment,d),f=!0)},o(d){R(m.$$.fragment,d),f=!1},d(d){d&&c(e),E.d(),T&&T.d(),Q(m),h.d(),k=!1,_()}}}function Ct(l){let e=l[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",a;return{c(){a=O(e)},l(t){a=D(t,e)},m(t,s){M(t,a,s)},p(t,s){s&8&&e!==(e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&z(a,e)},d(t){t&&c(a)}}}function Et(l){let e,a=l[3].t("You have shared this chat")+"",t,s,o,n=l[3].t("before")+"",r,i,m,v,f=l[3].t("Click here to")+"",k,_,w,C=l[3].t("delete this link")+"",E,T,N=l[3].t("and create a new shared link.")+"",g,h,U;return{c(){e=S("a"),t=O(a),s=j(),o=S("span"),r=O(n),i=O("."),v=j(),k=O(f),_=j(),w=S("button"),E=O(C),T=j(),g=O(N),this.h()},l(d){e=$(d,"A",{href:!0,target:!0});var y=I(e);t=D(y,a),s=A(y),o=$(y,"SPAN",{class:!0});var P=I(o);r=D(P,n),P.forEach(c),i=D(y,"."),y.forEach(c),v=A(d),k=D(d,f),_=A(d),w=$(d,"BUTTON",{class:!0});var W=I(w);E=D(W,C),W.forEach(c),T=A(d),g=D(d,N),this.h()},h(){u(o,"class","underline"),u(e,"href",m="/s/"+l[2].share_id),u(e,"target","_blank"),u(w,"class","underline")},m(d,y){M(d,e,y),p(e,t),p(e,s),p(e,o),p(o,r),p(e,i),M(d,v,y),M(d,k,y),M(d,_,y),M(d,w,y),p(w,E),M(d,T,y),M(d,g,y),h||(U=Z(w,"click",l[9]),h=!0)},p(d,y){y&8&&a!==(a=d[3].t("You have shared this chat")+"")&&z(t,a),y&8&&n!==(n=d[3].t("before")+"")&&z(r,n),y&4&&m!==(m="/s/"+d[2].share_id)&&u(e,"href",m),y&8&&f!==(f=d[3].t("Click here to")+"")&&z(k,f),y&8&&C!==(C=d[3].t("delete this link")+"")&&z(E,C),y&8&&N!==(N=d[3].t("and create a new shared link.")+"")&&z(g,N)},d(d){d&&(c(e),c(v),c(k),c(_),c(w),c(T),c(g)),h=!1,U()}}}function $e(l){let e,a=l[3].t("Share to OpenWebUI Community")+"",t,s,o;return{c(){e=S("button"),t=O(a),this.h()},l(n){e=$(n,"BUTTON",{class:!0,type:!0});var r=I(e);t=D(r,a),r.forEach(c),this.h()},h(){u(e,"class","self-center px-3.5 py-2 rounded-xl text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white"),u(e,"type","button")},m(n,r){M(n,e,r),p(e,t),s||(o=Z(e,"click",l[10]),s=!0)},p(n,r){r&8&&a!==(a=n[3].t("Share to OpenWebUI Community")+"")&&z(t,a)},d(n){n&&c(e),s=!1,o()}}}function St(l){let e=l[3].t("Copy Link")+"",a;return{c(){a=O(e)},l(t){a=D(t,e)},m(t,s){M(t,a,s)},p(t,s){s&8&&e!==(e=t[3].t("Copy Link")+"")&&z(a,e)},d(t){t&&c(a)}}}function $t(l){let e=l[3].t("Update and Copy Link")+"",a;return{c(){a=O(e)},l(t){a=D(t,e)},m(t,s){M(t,a,s)},p(t,s){s&8&&e!==(e=t[3].t("Update and Copy Link")+"")&&z(a,e)},d(t){t&&c(a)}}}function It(l){let e,a,t,s=l[3].t("Share Chat")+"",o,n,r,i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',m,v,f,k,_=l[2]&&Se(l);return{c(){e=S("div"),a=S("div"),t=S("div"),o=O(s),n=j(),r=S("button"),r.innerHTML=i,m=j(),_&&_.c(),this.h()},l(w){e=$(w,"DIV",{});var C=I(e);a=$(C,"DIV",{class:!0});var E=I(a);t=$(E,"DIV",{class:!0});var T=I(t);o=D(T,s),T.forEach(c),n=A(E),r=$(E,"BUTTON",{class:!0,"data-svelte-h":!0}),se(r)!=="svelte-745w2y"&&(r.innerHTML=i),E.forEach(c),m=A(C),_&&_.l(C),C.forEach(c),this.h()},h(){u(t,"class","text-lg font-medium self-center"),u(r,"class","self-center"),u(a,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(w,C){M(w,e,C),p(e,a),p(a,t),p(t,o),p(a,n),p(a,r),p(e,m),_&&_.m(e,null),v=!0,f||(k=Z(r,"click",l[8]),f=!0)},p(w,C){(!v||C&8)&&s!==(s=w[3].t("Share Chat")+"")&&z(o,s),w[2]?_?(_.p(w,C),C&4&&H(_,1)):(_=Se(w),_.c(),H(_,1),_.m(e,null)):_&&(De(),R(_,1,1,()=>{_=null}),Ve())},i(w){v||(H(_),v=!0)},o(w){R(_),v=!1},d(w){w&&c(e),_&&_.d(),f=!1,k()}}}function Mt(l){let e,a,t;function s(n){l[12](n)}let o={size:"sm",$$slots:{default:[It]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.show=l[0]),e=new rt({props:o}),Ie.push(()=>Oe(e,"show",s)),{c(){Y(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,[r]){const i={};r&65567&&(i.$$scope={dirty:r,ctx:n}),!a&&r&1&&(a=!0,i.show=n[0],Me(()=>a=!1)),e.$set(i)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Bt(l,e,a){let t,s,o;J(l,Re,g=>a(14,t=g)),J(l,We,g=>a(4,o=g));let{chatId:n}=e,r=null,i=null;const m=Be("i18n");J(l,m,g=>a(3,s=g));const v=async()=>{const g=await st(localStorage.token,n);return i=`${window.location.origin}/s/${g.id}`,console.log(i),a(2,r=await he(localStorage.token,n)),i},f=async()=>{const g=r.chat;console.log("share",g),ye.success(s.t("Redirecting you to OpenWebUI Community"));const h="https://openwebui.com",U=await window.open(`${h}/chats/upload`,"_blank");window.addEventListener("message",d=>{d.origin===h&&d.data==="loaded"&&U.postMessage(JSON.stringify({chat:g,models:t.filter(y=>g.models.includes(y.id))}),"*")},!1)};let{show:k=!1}=e;const _=g=>r?g?r.id!==g.id||r.share_id!==g.share_id:!1:!0,w=()=>{a(0,k=!1)},C=async()=>{await lt(localStorage.token,n)&&a(2,r=await he(localStorage.token,n))},E=()=>{f(),a(0,k=!1)},T=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){console.log("isSafari");const h=async()=>{const U=await v();return new Blob([U],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":h()})]).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(U=>(console.error("Async: Could not copy text: ",U),!1))}else ot(await v());ye.success(s.t("Copied shared chat URL to clipboard!")),a(0,k=!1)};function N(g){k=g,a(0,k)}return l.$$set=g=>{"chatId"in g&&a(1,n=g.chatId),"show"in g&&a(0,k=g.show)},l.$$.update=()=>{l.$$.dirty&7&&k&&(async()=>{if(n){const g=await he(localStorage.token,n);_(g)&&a(2,r=g)}else a(2,r=null),console.log(r)})()},[k,n,r,s,o,m,v,f,w,C,E,T,N]}class Xt extends ne{constructor(e){super(),oe(this,e,Bt,Mt,le,{chatId:1,show:0})}}export{ut as A,Xt as S,Qt as T,Kt as U,Gt as a,Ft as b,Yt as d,qt as g,Zt as q,Jt as u};
//# sourceMappingURL=ShareChatModal.ed54b075.js.map
